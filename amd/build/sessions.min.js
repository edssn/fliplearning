define ("local_fliplearning/sessions",["local_fliplearning/vue","local_fliplearning/vuetify","local_fliplearning/axios","local_fliplearning/moment","local_fliplearning/pagination","local_fliplearning/chartstatic","local_fliplearning/pageheader"],function(a,b,c,d,e,f,g){"use strict";return{init:function(d){console.log(d);a.use(b);a.component("pagination",e);a.component("chart",f);a.component("pageheader",g);var h=new a({delimiters:["[[","]]"],el:"#work_sessions",vuetify:new b,data:function data(){return{strings:d.strings,groups:d.groups,userid:d.userid,courseid:d.courseid,timezone:d.timezone,render_has:d.profile_render,loading:!1,errors:[],pages:d.pages,hours_sessions:d.sessions_by_hours,weeks_sessions:d.sessions_by_weeks,progress_table:d.progress_table,session_count:d.session_count,search:null}},mounted:function mounted(){document.querySelector("#sessions-loader").style.display="none";document.querySelector("#work_sessions").style.display="block"},methods:{get_help_content:function get_help_content(){var a=[],b="teacher"==this.render_has?this.strings.time_inside_plataform_description_teacher:this.strings.time_inside_plataform_description_student,c="teacher"==this.render_has?this.strings.activity_inside_plataform_description_teacher:this.strings.activity_inside_plataform_description_student;a.push({title:this.strings.time_inside_plataform,description:b});a.push({title:this.strings.activity_inside_plataform,description:c});return a},update_interactions:function update_interactions(a){var b=this;this.loading=!0;this.errors=[];var d={action:"worksessions",userid:this.userid,courseid:this.courseid,weekcode:a.weekcode,profile:this.render_has};c({method:"get",url:M.cfg.wwwroot+"/local/fliplearning/ajax.php",params:d}).then(function(a){if(200==a.status&&a.data.ok){b.hours_sessions=a.data.data.sessions_by_hours;b.session_count=a.data.data.session_count}else{b.error_messages.push(b.strings.error_network)}}).catch(function(){b.errors.push(b.strings.api_error_network)}).finally(function(){b.loading=!1});return this.data},get_point_category_name:function get_point_category_name(a,b){var c=a.series,d="y"===b,e=c[d?"yAxis":"xAxis"];return e.categories[a[d?"y":"x"]]},build_chart_session_by_hours:function build_chart_session_by_hours(){var a={};a.title={text:this.strings.hours_sessions_title};a.chart={type:"heatmap",marginTop:40,marginBottom:80,plotBorderWidth:0,backgroundColor:"#FAFAFA"};a.xAxis={categories:this.strings.days};a.yAxis={categories:this.strings.hours,title:null,reversed:!0};a.colorAxis={min:0,stops:[[0,"#E0E0E0"],[.25,"#D6E7F9"],[.5,"#9AC4EF"],[.75,"#5DA1E5"],[1,"#3384D6"]]};a.legend={layout:"horizontal",margin:30,verticalAlign:"bottom"};a.tooltip={formatter:function formatter(){var a=h.get_point_category_name(this.point,"x"),b=h.get_point_category_name(this.point,"y"),c=h.strings.sessions_text;if(1==this.point.value){c=h.strings.session_text}return"<b>"+a+" "+b+"</b>: "+this.point.value+" "+c}};a.series=[{borderWidth:2,borderColor:"#FAFAFA",data:this.hours_sessions,dataLabels:{enabled:!1}}];a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},build_chart_session_by_weeks:function build_chart_session_by_weeks(){var a={};a.title={text:this.strings.weeks_sessions_title};a.chart={type:"heatmap",marginTop:40,marginBottom:80,plotBorderWidth:0,backgroundColor:"#FAFAFA"};a.xAxis={categories:this.strings.weeks};a.yAxis={categories:this.weeks_sessions.categories,title:null,reversed:!0};a.colorAxis={min:0,stops:[[0,"#E0E0E0"],[.25,"#D6E7F9"],[.5,"#9AC4EF"],[.75,"#5DA1E5"],[1,"#3384D6"]]};a.legend={layout:"horizontal",margin:30,verticalAlign:"bottom"};a.tooltip={formatter:function formatter(){var a=h.weeks_sessions.weeks[this.point.y][this.point.x]||"",b=h.get_point_category_name(this.point,"x"),c=h.get_point_category_name(this.point,"y"),d=h.strings.sessions_text;if(1==this.point.value){d=h.strings.session_text}return"<b>"+c+" "+b+"</b>: "+this.point.value+" "+d+"<br/>"+a}};a.series=[{borderWidth:2,borderColor:"#FAFAFA",data:this.weeks_sessions.data,dataLabels:{enabled:!1}}];a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},build_chart_session_count:function build_chart_session_count(){var a={};a.chart={backgroundColor:"#FAFAFA"};a.title={text:this.strings.session_count_title};a.yAxis={title:{text:this.strings.session_count_yaxis_title},allowDecimals:!1};a.xAxis={categories:this.session_count.categories};a.tooltip={valueSuffix:this.strings.session_count_tooltip_suffix};a.legend={layout:"horizontal",margin:10,verticalAlign:"bottom"};a.series=this.session_count.data,a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},get_timezone:function get_timezone(){var a="".concat(this.strings.ss_change_timezone," ").concat(this.timezone);return a},table_headers:function table_headers(){var a=[{text:"",value:"id",align:"center",sortable:!1},{text:this.strings.thead_name,value:"firstname"},{text:this.strings.thead_lastname,value:"lastname"},{text:this.strings.thead_email,value:"email"},{text:this.strings.thead_progress,value:"progress_percentage",align:"center"},{text:this.strings.thead_sessions,value:"sessions",align:"center"},{text:this.strings.thead_time,value:"inverted_time",align:"center"}];return a},get_picture_url:function get_picture_url(a){var b="".concat(M.cfg.wwwroot,"/user/pix.php?file=/").concat(a,"/f1.jpg");return b},get_percentage_progress:function get_percentage_progress(a){return"".concat(a," %")},get_progress_tooltip:function get_progress_tooltip(a){var b=this.strings.modules_label,c=this.strings.finisheds_label;if(1==a.complete_cms){b=this.strings.module_label;c=this.strings.finished_label}return"".concat(a.complete_cms," ").concat(b," ").concat(c," ").concat(this.strings.of_conector," ").concat(a.total_cms)}}})}}});
//# sourceMappingURL=sessions.min.js.map
