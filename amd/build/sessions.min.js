define ("local_fliplearning/sessions",["local_fliplearning/vue","local_fliplearning/vuetify","local_fliplearning/axios","local_fliplearning/moment","local_fliplearning/pagination","local_fliplearning/chartstatic","local_fliplearning/pageheader","local_fliplearning/helpdialog"],function(a,b,c,d,e,f,g,h){"use strict";return{init:function(d){a.use(b);a.component("pagination",e);a.component("chart",f);a.component("pageheader",g);a.component("helpdialog",h);var i=new a({delimiters:["[[","]]"],el:"#work_sessions",vuetify:new b,data:function data(){return{strings:d.strings,groups:d.groups,userid:d.userid,courseid:d.courseid,timezone:d.timezone,render_has:d.profile_render,loading:!1,errors:[],pages:d.pages,hours_sessions:d.indicators.sessions,session_count:d.indicators.count,inverted_time:d.indicators.time,hours_sessions_colors:d.hours_sessions_colors,inverted_time_colors:d.inverted_time_colors,sessions_count_colors:d.sessions_count_colors,search:null,help_dialog:!1,help_contents:[]}},mounted:function mounted(){document.querySelector("#sessions-loader").style.display="none";document.querySelector("#work_sessions").style.display="block"},methods:{get_help_content:function get_help_content(){var a=[{title:this.strings.section_help_title,description:this.strings.section_help_description}];return a},update_interactions:function update_interactions(a){var b=this;this.loading=!0;this.errors=[];var d={action:"worksessions",userid:this.userid,courseid:this.courseid,weekcode:a.weekcode,profile:this.render_has};c({method:"get",url:M.cfg.wwwroot+"/local/fliplearning/ajax.php",params:d}).then(function(a){if(200==a.status&&a.data.ok){b.hours_sessions=a.data.data.indicators.sessions;b.session_count=a.data.data.indicators.count;b.inverted_time=a.data.data.indicators.time}else{b.error_messages.push(b.strings.error_network)}}).catch(function(){b.errors.push(b.strings.api_error_network)}).finally(function(){b.loading=!1});return this.data},get_point_category_name:function get_point_category_name(a,b){var c=a.series,d="y"===b,e=c[d?"yAxis":"xAxis"];return e.categories[a[d?"y":"x"]]},build_hours_sessions_chart:function build_hours_sessions_chart(){var a={};a.title={text:null};a.chart={type:"heatmap",backgroundColor:null,style:{fontFamily:"poppins"}};a.xAxis={categories:this.strings.days};a.yAxis={categories:this.strings.hours,title:null,reversed:!0};a.colorAxis={min:0,minColor:this.hours_sessions_colors[0],maxColor:this.hours_sessions_colors[1]};a.legend={layout:"horizontal",verticalAlign:"bottom"};a.tooltip={useHTML:!0,formatter:function formatter(){var a=i.get_point_category_name(this.point,"x"),b=i.get_point_category_name(this.point,"y");return"<small>"+a+" "+b+"</small><br/><b style=\"color: "+i.hours_sessions_colors[1]+";\">\u2022 </b>"+i.capitalizeFirstLetter(i.strings.sessions_text)+": "+this.point.value+"<br/>"}};a.series=[{borderWidth:2,borderColor:"#FAFAFA",data:this.hours_sessions}];return a},build_inverted_time_chart:function build_inverted_time_chart(){var a={};a.chart={type:"bar",backgroundColor:null,style:{fontFamily:"poppins"}};a.title={text:null};a.colors=this.inverted_time_colors;a.xAxis={type:"category",crosshair:!0};a.yAxis={title:{text:this.strings.time_inverted_x_axis}};a.tooltip={shared:!0,useHTML:!0,formatter:function formatter(){var a=this.points[0].key,b=i.convert_time(this.y);return"<small>".concat(a,"</small></br><b>").concat(b,"</b>")}};a.legend={enabled:!1};a.series=[{colorByPoint:!0,data:this.inverted_time.data}];return a},build_sessions_count_chart:function build_sessions_count_chart(){var a={};a.chart={backgroundColor:null,style:{fontFamily:"poppins"}};a.title={text:null};a.colors=this.sessions_count_colors;a.yAxis={title:{text:this.strings.session_count_yaxis_title},allowDecimals:!1};a.xAxis={categories:this.session_count.categories};a.tooltip={valueSuffix:this.strings.session_count_tooltip_suffix};a.legend={layout:"horizontal",verticalAlign:"bottom"};a.series=this.session_count.data;return a},convert_time:function convert_time(a){a*=3600;var b=this.strings.hours_short,c=this.strings.minutes_short,d=this.strings.seconds_short,e=Math.floor(a/3600),f=Math.floor(a%3600/60),g=Math.floor(a%60),h;if(1<=e){if(1<=f){h="".concat(e).concat(b," ").concat(f).concat(c)}else{h="".concat(e).concat(b)}}else if(1<=f){if(1<=g){h="".concat(f).concat(c," ").concat(g).concat(d)}else{h="".concat(f).concat(c)}}else{h="".concat(g).concat(d)}return h},capitalizeFirstLetter:function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)},open_chart_help:function open_chart_help(a){var b=[];if("inverted_time"==a){b.push({title:this.strings.inverted_time_help_title,description:this.strings.inverted_time_help_description_p1});b.push({description:this.strings.inverted_time_help_description_p2})}else if("hours_sessions"==a){b.push({title:this.strings.hours_sessions_help_title,description:this.strings.hours_sessions_help_description_p1});b.push({description:this.strings.hours_sessions_help_description_p2})}else if("sessions_count"==a){b.push({title:this.strings.sessions_count_help_title,description:this.strings.sessions_count_help_description_p1});b.push({description:this.strings.sessions_count_help_description_p2})}this.help_contents=b;if(this.help_contents.length){this.help_dialog=!0}},update_help_dialog:function update_help_dialog(a){this.help_dialog=a},get_timezone:function get_timezone(){var a="".concat(this.strings.ss_change_timezone," ").concat(this.timezone);return a}}})}}});
//# sourceMappingURL=sessions.min.js.map
