define ("local_fliplearning/assignments",["local_fliplearning/vue","local_fliplearning/vuetify","local_fliplearning/axios","local_fliplearning/moment","local_fliplearning/pagination","local_fliplearning/chartcomponent","local_fliplearning/pageheader","local_fliplearning/emailform","local_fliplearning/alertify"],function(a,b,c,d,e,f,g,h,i){"use strict";return{init:function(d){console.log(d);a.use(b);a.component("pagination",e);a.component("chart",f);a.component("pageheader",g);a.component("emailform",h);var j=new a({delimiters:["[[","]]"],el:"#submissions",vuetify:new b,data:function data(){return{dialog:!1,selected_users:[],moduleid:!1,valid_form:!0,subject_label:d.strings.email_strings.subject_label,subject_rules:[function(a){return!!a||d.strings.email_strings.validation_subject_text}],message:"",message_label:d.strings.email_strings.message_label,message_rules:[function(a){return!!a||d.strings.email_strings.validation_message_text}],submit_button:d.strings.email_strings.submit_button,cancel_button:d.strings.email_strings.cancel_button,emailform_title:d.strings.email_strings.emailform_title,sending_text:d.strings.email_strings.sending_text,recipients:d.strings.email_strings.recipients_label,loader_dialog:!1,snackbar:!1,snackbar_text:d.strings.email_strings.snackbar_text,snackbar_close_text:d.strings.email_strings.snackbar_close,snackbar_timeout:3e3,strings:d.strings,groups:d.groups,userid:d.userid,courseid:d.courseid,timezone:d.timezone,render_has:d.profile_render,loading:!1,errors:[],pages:d.pages,submissions:d.submissions,email_strings:d.strings.email_strings}},mounted:function mounted(){document.querySelector("#sessions-loader").style.display="none";document.querySelector("#submissions").style.display="block"},computed:{},methods:{get_help_content:function get_help_content(){return"Texto de Ayuda"},update_interactions:function update_interactions(a){var b=this;this.loading=!0;this.errors=[];var d={action:"assignments",userid:this.userid,courseid:this.courseid,weekcode:a.weekcode,profile:this.render_has};c({method:"get",url:M.cfg.wwwroot+"/local/fliplearning/ajax.php",params:d}).then(function(a){b.submissions=a.data.submissions}).catch(function(){b.errors.push(b.strings.api_error_network)}).finally(function(){b.loading=!1});return this.data},build_chart_submissions:function build_chart_submissions(){var a={};a.chart={type:"column",backgroundColor:"#FAFAFA"};a.title={text:this.strings.assignsubs_chart_title};a.xAxis={categories:this.submissions.categories,crosshair:!0};a.yAxis={min:0,title:{text:this.strings.assignsubs_chart_yaxis}};a.tooltip={valueSuffix:" estudiantes"};a.plotOptions={series:{cursor:"pointer",point:{events:{click:function click(){var a=this.category.split("</b>");a=a[0]||"";a=a.split("<b>");a=a[1]||"";j.email_strings.subject=j.email_strings.subject_prefix+" - "+a;var b=this.x,c=this.series.colorIndex;j.dialog=!0;j.selected_users=j.submissions.users[b][c];j.moduleid=j.submissions.modules[b]}}}}};a.series=this.submissions.data;a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},get_picture_url:function get_picture_url(a){var b="".concat(M.cfg.wwwroot,"/user/pix.php?file=/").concat(a,"/f1.jpg");return b},submit:function submit(){var a=this,b="";this.selected_users.forEach(function(a){b=b.concat(a.id,",")});this.loader_dialog=!0;this.errors=[];var d={action:"sendmail",subject:this.subject,recipients:b,text:this.message,userid:this.userid,courseid:this.courseid,moduleid:this.moduleid};console.log(d);c({method:"get",url:M.cfg.wwwroot+"/local/fliplearning/ajax.php",params:d}).then(function(b){console.log(b);a.loader_dialog=!1;a.dialog=!1;a.snackbar=!0;a.$refs.form.reset();i.success(a.snackbar_text)}).catch(function(b){console.log(b);i.error("Error en la comunicacion con el servidor");a.loader_dialog=!1})},reset:function reset(){this.dialog=!1},update_dialog:function update_dialog(a){this.dialog=a}}})}}});
//# sourceMappingURL=assignments.min.js.map
