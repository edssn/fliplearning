{"version":3,"sources":["../src/setweeks.js"],"names":["define","Vue","Vuetify","Axios","Sortable","Draggable","Datepicker","Moment","Alertify","PageHeader","init","content","use","component","delimiters","el","vuetify","data","display_settings","settings","new_group","scroll_mode","strings","sections","sectionsWithCms","courseid","userid","raw_weeks","weeks","disabled_dates","days","saving_loader","error_messages","save_successful","dates","datesLabels","previousRangeStart","beforeMount","length","setModulesInSections","mounted","initBlockDates","document","querySelector","style","display","computed","dateRangeText","i","dates_array","map","date","Date","sort","sortDates","formatDate","weekstart","split","reverse","join","weekend","totalTime","j","total","cms","forEach","a","isNumber","hoursDedication","methods","section_name","section","name","section_exist","exist","exists","format_name","position","customFormatter","weeks_start_at","format","addWeek","weeksCount","endLastWeek","start","addDays","end","push","week","collapsabled","hours_dedications","removable","cmsTimeDialog","modal","blockDate","remove_week","index","element_index","indexOf","splice","save_changes","empty_weeks","error","error_empty_week","weeks_deleted_from_course","error_section_removed","confirm","save_warning_content","action","newinstance","minify_query","url","window","location","href","method","M","cfg","wwwroot","params","then","response","status","ok","success","error_network","catch","finally","warning","cancel_action","set","title","save_warning_title","labels","cancel","confirm_cancel","confirm_ok","minify","wk","h","s","e","sid","sectionid","JSON","stringify","week_position","section_position","exists_mistakes","change_collapsabled","course_finished","finished","last","now","b","getTime","year","getUTCFullYear","month_number","getUTCMonth","month","day_number","getUTCDate","day","saveWeek","newVal","nextDate","previousStartDate","currentStartDate","diffDays","Math","ceil","currentDates","setDate","getDate","toISOString","substr","savePreviousRangeStart","get_help_content","help_contents","help","help_title","description","help_description","x","isNaN","parseInt","getModuleIcon","modname","getModuleUrl","module","id","saveCourseModulesTime","dialog","weekIndex","cm","value"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\n        \"local_fliplearning/vuetify\",\n        \"local_fliplearning/axios\",\n        \"local_fliplearning/sortablejs\",\n        \"local_fliplearning/draggable\",\n        \"local_fliplearning/datepicker\",\n        \"local_fliplearning/moment\",\n        \"local_fliplearning/alertify\",\n        \"local_fliplearning/pageheader\",\n    ],\n    function(Vue, Vuetify, Axios, Sortable, Draggable, Datepicker, Moment, Alertify, PageHeader) {\n        \"use strict\";\n\n        function init(content) {\n            // console.log(content);\n            Vue.use(Vuetify);\n            Vue.component('draggable', Draggable);\n            Vue.component('datepicker', Datepicker);\n            Vue.component('pageheader', PageHeader);\n            const app = new Vue({\n                delimiters: [\"[[\", \"]]\"],\n                el: \"#setweeks\",\n                vuetify: new Vuetify(),\n                data: {\n                    display_settings: false,\n                    settings: content.settings,\n                    new_group: false,\n                    scroll_mode: false,\n                    strings: content.strings,\n                    sections: content.sections,\n                    sectionsWithCms: content.sectionsWithCms,\n                    courseid: content.courseid,\n                    userid: content.userid,\n                    raw_weeks: content.weeks,\n                    disabled_dates: {\n                        days: [0, 2, 3, 4, 5, 6]\n                    },\n                    saving_loader: false,\n                    error_messages: [],\n                    save_successful: false,\n\n                    dates: [],\n                    datesLabels: [],\n                    previousRangeStart: null,\n                },\n                beforeMount() {\n                    if (this.raw_weeks.length) {\n                        this.setModulesInSections();\n                    }\n                },\n                mounted() {\n                    this.initBlockDates();\n                    document.querySelector(\"#setweeks-loader\").style.display = \"none\";\n                    document.querySelector(\"#setweeks\").style.display = \"block\";\n                },\n                computed: {\n\n                    dateRangeText() {\n                        return (i) => {\n                            let dates_array = this.raw_weeks[i].dates.map((date) => new Date(date));\n                            // Se ordenan las fechas seleccionadas\n                            dates_array.sort(this.sortDates);\n\n                            dates_array = dates_array.map(date => this.formatDate(date));\n                            this.raw_weeks[i].weekstart = dates_array[0].split('/').reverse().join('-');\n                            this.raw_weeks[i].weekend = dates_array[1]\n                                ? dates_array[1].split('/').reverse().join('-')\n                                : this.raw_weeks[i].weekstart;\n\n                            // Se retorna el arreglo de fechas ordenado y formateado\n                            // return dates_array.map((date) => this.formatDate(date)).join(\" → \");\n                            return dates_array.join(\" → \");\n                            // Return this.raw_weeks[i].dates.join(\" → \");\n                        };\n                    },\n\n                    totalTime() {\n                        return (i, j) => {\n                            let total = 0;\n                            this.raw_weeks[i].sections[j].cms.forEach((a) => {\n                                total = total + this.isNumber(a.hoursDedication);\n                            });\n                            return total;\n                        };\n                    },\n                },\n                methods: {\n                    section_name(section) {\n                        let name = null;\n                        if (typeof (section.section_name) != 'undefined' && section.section_name.length > 0) {\n                            name = section.section_name;\n                        } else {\n                            name = section.name;\n                        }\n                        return name;\n                    },\n\n                    section_exist(section) {\n                        let exist = true;\n                        if (typeof (section) != 'undefined' && typeof (section.exists) != 'undefined' && section.exists == false) {\n                            exist = false;\n                        }\n                        return exist;\n                    },\n\n                    format_name(name, position) {\n                        return name + \" \" + (position + 1);\n                    },\n\n                    customFormatter(date) {\n                        let weeks_start_at = Moment(date).format('YYYY-MM-DD');\n                        return weeks_start_at;\n                    },\n\n                    addWeek() {\n                        let weeksCount = this.raw_weeks.length;\n                        let endLastWeek = this.raw_weeks[weeksCount - 1].dates[1];\n\n                        // let start = this.get_start_week(new Date(this.get_last_date()));\n                        let start = this.addDays(new Date(endLastWeek), 1);\n                        let end = this.addDays(new Date(start), 6);\n                        this.raw_weeks.push({\n                            name: this.strings.week,\n                            position: (this.raw_weeks.length + 1),\n                            weekstart: start,\n                            weekend: end,\n                            collapsabled: false,\n                            hours_dedications: 0,\n                            removable: true,\n                            sections: [],\n                            cmsTimeDialog: false,\n\n                            dates: [start, end],\n                            modal: false,\n                            blockDate: start,\n                        });\n                    },\n\n                    remove_week(week, index) {\n                        if (index == 0) {\n                            return null;\n                        }\n                        for (let i = 0; i < week.sections.length; i++) {\n                            this.sections.push(week.sections[i]);\n                        }\n                        let element_index = this.raw_weeks.indexOf(week);\n                        this.raw_weeks.splice(element_index, 1);\n                    },\n\n                    position(index) {\n                        index++;\n                        return `${index} - `;\n                    },\n\n                    save_changes() {\n                        this.save_successful = false;\n                        this.error_messages = [];\n                        if (this.empty_weeks()) {\n                            this.saving_loader = false;\n                            Alertify.error(this.strings.error_empty_week);\n                            this.error_messages.push(this.strings.error_empty_week);\n                            return false;\n                        }\n                        if (this.weeks_deleted_from_course()) {\n                            this.saving_loader = false;\n                            this.error_messages.push(this.strings.error_section_removed);\n                            return false;\n                        }\n\n                        Alertify.confirm(this.strings.save_warning_content,\n                                () => {\n                                    this.saving_loader = true;\n                                    let weeks = this.raw_weeks;\n                                    // Weeks[0].weekstart = Moment(weeks[0].weekstart).format(\"YYYY-MM-DD\");\n                                    let data = {\n                                        action: \"saveconfigweek\",\n                                        userid: this.userid,\n                                        courseid: this.courseid,\n                                        newinstance: this.new_group,\n                                        weeks: this.minify_query(weeks), // Stringify is a hack to clone object :D\n                                        url: window.location.href,\n                                    };\n                                    Axios({\n                                        method: 'get',\n                                        url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\n                                        params: data,\n                                    }).then((response) => {\n                                        if (response.status == 200 && response.data.ok) {\n                                            this.settings = response.data.data.settings;\n                                            Alertify.success(this.strings.save_successful);\n                                            this.save_successful = true;\n                                        } else {\n                                            Alertify.error(this.strings.error_network);\n                                            this.error_messages.push(this.strings.error_network);\n                                        }\n                                    }).catch((e) => {\n                                        Alertify.error(this.strings.error_network);\n                                        this.error_messages.push(this.strings.error_network);\n                                    }).finally(() => {\n                                        this.saving_loader = false;\n                                    });\n                                },\n                                () => { // ON CANCEL\n                                    this.saving_loader = false;\n                                    Alertify.warning(this.strings.cancel_action);\n                                }).set({title: this.strings.save_warning_title})\n                            .set({labels: {cancel: this.strings.confirm_cancel, ok: this.strings.confirm_ok}});\n                    },\n\n                    minify_query(weeks) {\n                        var minify = [];\n                        weeks.forEach(week => {\n                            var wk = new Object();\n                            wk.h = week.hours_dedications;\n                            wk.s = week.weekstart;\n                            wk.e = week.weekend;\n                            wk.sections = [];\n                            week.sections.forEach(section => {\n                                var s = new Object();\n                                s.sid = section.sectionid;\n                                wk.sections.push(s);\n                            });\n                            minify.push(wk);\n                        });\n                        return JSON.stringify(minify);\n                    },\n\n                    empty_weeks() {\n                        if (this.raw_weeks.length >= 2 && this.raw_weeks[0].sections.length < 1) {\n                            return true;\n                        }\n                        for (let i = 0; i < this.raw_weeks.length; i++) {\n                            if (i > 0 && this.raw_weeks[i].sections.length <= 0) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    },\n\n                    weeks_deleted_from_course() {\n                        for (let week_position = 0; week_position < this.raw_weeks.length; week_position++) {\n                            for (let section_position = 0; section_position < this.raw_weeks[week_position].sections.length; section_position++) {\n                                if (!this.section_exist(this.raw_weeks[week_position].sections[section_position])) {\n                                    return true;\n                                }\n                            }\n                        }\n                        return false;\n                    },\n\n                    exists_mistakes() {\n                        let exists_mistakes = this.error_messages.length > 0;\n                        return exists_mistakes;\n                    },\n\n                    change_collapsabled(index) {\n                        this.raw_weeks[index].collapsabled = !this.raw_weeks[index].collapsabled;\n                    },\n\n                    course_finished() {\n                        let finished = false;\n                        let last = this.raw_weeks.length - 1;\n                        let end = Moment(this.raw_weeks[last].dates[1]).format(\"X\");\n                        let now = Moment().format(\"X\");\n                        if (now > end) {\n                            finished = true;\n                        } else {\n                            finished = false;\n                        }\n                        return finished;\n                    },\n\n                    sortDates(a, b) {\n                        return b.getTime() > a.getTime() ? -1 : b.getTime() < a.getTime() ? 1 : 0;\n                    },\n\n                    formatDate(date) {\n                        const year = date.getUTCFullYear();\n                        const month_number = date.getUTCMonth() + 1;\n                        const month = month_number < 10 ? `0${month_number}` : month_number;\n                        const day_number = date.getUTCDate();\n                        const day = day_number < 10 ? `0${day_number}` : day_number;\n                        return `${day}/${month}/${year}`;\n                    },\n\n                    saveWeek(dates, index) {\n\n                        // Guardar la selección de una semana completa\n                        let newVal = dates[dates.length == 1 ? 0 : 1];\n                        let nextDate = this.addDays(new Date(newVal), 6);\n                        this.raw_weeks[index].dates = [newVal, nextDate];\n\n                        // Cerrar el modal\n                        this.raw_weeks[index].modal = false;\n\n                        // Convertir a dates la fecha de inicio anterior del rango\n                        // y la fecha actual de inicio del rango\n                        let previousStartDate = new Date(this.previousRangeStart);\n                        let currentStartDate = new Date(this.raw_weeks[index].dates[0]);\n\n                        // Obtener diferencia en dias entre el inicio del rango previo\n                        // y el inicio de rango actual\n                        let diffTime = currentStartDate - previousStartDate;\n                        let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n                        // Recalcular las fechas siguientes a la semana\n                        // que se modificó\n                        let i, currentDates, start, end;\n                        for (i = index + 1; i < this.raw_weeks.length; i++) {\n\n                            // Ordenar las fechas de la semana seleccionada\n                            currentDates = this.raw_weeks[i].dates.map(\n                                (date) => new Date(date)\n                            );\n\n                            // Calcular el nuevo inicio y final del rango de fechas\n                            // sumando la diferencia de dias antes calculado\n                            start = this.addDays(currentDates[0], diffDays);\n                            end = this.addDays(currentDates[1], diffDays);\n\n                            // Asignar nuevo rango\n                            this.raw_weeks[i].dates = [start, end];\n\n                            // Asignar nuevas fechas de bloqueo de rango\n                            this.raw_weeks[i].blockDate = this.addDays(new Date(this.raw_weeks[i - 1].dates[1]), 1)\n                        }\n                    },\n\n                    addDays(date, days) {\n                        let nextDate = new Date(date.setDate(date.getDate() + days));\n                        return nextDate.toISOString().substr(0, 10);\n                    },\n\n                    savePreviousRangeStart(index) {\n                        this.previousRangeStart = this.raw_weeks[index].dates[0];\n                    },\n\n                    get_help_content() {\n                        let help_contents = [];\n                        let help = new Object();\n                        help.title = this.strings.help_title;\n                        help.description = this.strings.help_description;\n                        help_contents.push(help);\n                        return help_contents;\n                    },\n\n                    initBlockDates() {\n                        if (this.raw_weeks.length > 1) {\n                            for (let i = 1; i < this.raw_weeks.length; i++) {\n                                this.raw_weeks[i].blockDate = this.addDays(new Date(this.raw_weeks[i - 1].weekend), 1);\n                            }\n                        }\n                    },\n\n                    setModulesInSections() {\n                        let i, j, sid;\n                        for (i = 0; i < this.raw_weeks.length; i++) {\n                            this.raw_weeks[i].cmsTimeDialog = false;\n                            for (j = 0; j < this.raw_weeks[i].sections.length; j++) {\n                                sid = `sid${this.raw_weeks[i].sections[j].sectionid}`;\n                                this.raw_weeks[i].sections[j].cms = this.sectionsWithCms[sid];\n                            }\n                        }\n\n                        for (i = 0; i < this.sections.length; i++) {\n                            sid = `sid${this.sections[i].sectionid}`;\n                            this.sections[i].cms = this.sectionsWithCms[sid];\n                        }\n                    },\n\n                    isNumber(x) {\n                        if (x === \"\") {\n                            return 0;\n                        }\n                        if (isNaN(x)) {\n                            return 0;\n                        }\n                        return parseInt(x);\n                    },\n\n                    getModuleIcon(modname) {\n                        return `${M.cfg.wwwroot}/theme/image.php/boost/${modname}/1/icon`;\n                    },\n\n                    getModuleUrl(module) {\n                        return `${M.cfg.wwwroot}/mod/${module.modname}/view.php?id=${module.id}`;\n                    },\n\n                    saveCourseModulesTime(dialog, weekIndex) {\n                        let total = 0;\n                        this.raw_weeks[weekIndex].sections.forEach((section) => {\n                            section.cms.forEach((cm) => {\n                                total = total + this.isNumber(cm.hoursDedication);\n                            });\n                        });\n                        this.raw_weeks[weekIndex].hours_dedications = this.isNumber(total);\n                        dialog.value = false;\n                    },\n                }\n            });\n        }\n\n        return {\n            init: init\n        };\n    });"],"file":"setweeks.min.js"}