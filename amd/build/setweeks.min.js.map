{"version":3,"sources":["../src/setweeks.js"],"names":["define","Vue","Vuetify","Axios","Sortable","Draggable","Datepicker","Moment","Alertify","PageHeader","add_collapsabled_property_to_weeks","content","i","week","weeks","length","collapsabled","init","use","component","delimiters","el","vuetify","data","display_settings","settings","new_group","scroll_mode","weeks_started_at","Date","weekstart","strings","sections","courseid","userid","raw_weeks","disabled_dates","days","saving_loader","error_messages","save_successful","dates","datesLabels","modal","mounted","document","querySelector","style","display","computed","start_weeks","weekend","get_end_week","get_start_week","dateRangeText","dates_array","map","date","sort","sortDates","formatDate","join","methods","section_name","section","name","section_exist","exist","exists","format_name","position","customFormatter","weeks_start_at","format","add_week","push","hours_dedications","removable","has_items","array","remove_week","index","close_delete_confirm","element_index","indexOf","splice","ask_delete_confirm","delete_confirm","pass_week","start_date","add","start_week","end_date","get_date_next_day","requested_day","output_format","toLowerCase","current_day","parseInt","save_changes","empty_weeks","error","error_empty_week","weeks_deleted_from_course","error_section_removed","confirm","save_warning_content","action","newinstance","minify_query","url","window","location","href","method","M","cfg","wwwroot","params","then","response","status","ok","success","error_network","catch","finally","warning","cancel_action","set","title","save_warning_title","labels","cancel","confirm_cancel","confirm_ok","minify","forEach","wk","h","s","e","sid","sectionid","JSON","stringify","week_position","section_position","exists_mistakes","change_collapsabled","course_finished","finished","last","end","now","get_settings_status","visible","Object","keys","key","tw_plugin_visible","tw_plugin_hidden","a","b","getTime","year","getUTCFullYear","month_number","getUTCMonth","month","day_number","getUTCDate","day","get_help_content","help_contents","help","help_title","description","help_description"],"mappings":"AAAAA,OAAM,+BAAC,CAAC,wBAAD,CACC,4BADD,CAEC,0BAFD,CAGC,+BAHD,CAIC,8BAJD,CAKC,+BALD,CAMC,2BAND,CAOC,6BAPD,CAQC,+BARD,CAAD,CAUF,SAASC,CAAT,CAAcC,CAAd,CAAuBC,CAAvB,CAA8BC,CAA9B,CAAwCC,CAAxC,CAAmDC,CAAnD,CAA+DC,CAA/D,CAAuEC,CAAvE,CAAiFC,CAAjF,CAA6F,CACzF,aA2TA,QAASC,CAAAA,CAAT,CAA4CC,CAA5C,CAAqD,CACjD,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAR,CACGC,CADR,CAAgBD,CAAC,CAAGD,CAAO,CAACG,KAAR,CAAcC,MAAlC,CAA0CH,CAAC,EAA3C,CAA+C,CACvCC,CADuC,CAChCF,CAAO,CAACG,KAAR,CAAcF,CAAd,CADgC,CAE3C,GAAiC,WAA7B,QAAOC,CAAAA,CAAI,CAACG,YAAhB,CAA8C,CAC1CH,CAAI,CAACG,YAAL,GACH,CACJ,CACD,MAAOL,CAAAA,CACV,CAED,MAAO,CACHM,IAAI,CApUR,SAAcN,CAAd,CAAuB,CACnBA,CAAO,CAAGD,CAAkC,CAACC,CAAD,CAA5C,CACAV,CAAG,CAACiB,GAAJ,CAAQhB,CAAR,EACAD,CAAG,CAACkB,SAAJ,CAAc,WAAd,CAA2Bd,CAA3B,EACAJ,CAAG,CAACkB,SAAJ,CAAc,YAAd,CAA4Bb,CAA5B,EACAL,CAAG,CAACkB,SAAJ,CAAc,YAAd,CAA4BV,CAA5B,EACY,GAAIR,CAAAA,CAAJ,CAAQ,CAChBmB,UAAU,CAAE,CAAC,IAAD,CAAO,IAAP,CADI,CAEhBC,EAAE,CAAE,WAFY,CAGhBC,OAAO,CAAE,GAAIpB,CAAAA,CAHG,CAIhBqB,IAAI,CAAE,CACFC,gBAAgB,GADd,CAEFC,QAAQ,CAAEd,CAAO,CAACc,QAFhB,CAGFC,SAAS,GAHP,CAIFC,WAAW,GAJT,CAKFC,gBAAgB,CAAE,GAAIC,CAAAA,IAAJ,CAAStB,CAAM,CAAsC,GAArC,EAAOI,CAAO,CAACG,KAAR,CAAc,CAAd,EAAiBgB,SAAzB,CAAf,CALhB,CAMFC,OAAO,CAAEpB,CAAO,CAACoB,OANf,CAOFC,QAAQ,CAAErB,CAAO,CAACqB,QAPhB,CAQFC,QAAQ,CAAEtB,CAAO,CAACsB,QARhB,CASFC,MAAM,CAAEvB,CAAO,CAACuB,MATd,CAUFC,SAAS,CAAExB,CAAO,CAACG,KAVjB,CAWFsB,cAAc,CAAE,CACZC,IAAI,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CADM,CAXd,CAcFC,aAAa,GAdX,CAeFC,cAAc,CAAE,EAfd,CAgBFC,eAAe,GAhBb,CAkBFC,KAAK,CAAE,EAlBL,CAmBFC,WAAW,CAAE,EAnBX,CAoBFC,KAAK,GApBH,CAJU,CA2BhBC,OA3BgB,mBA2BN,CACNC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CC,KAA3C,CAAiDC,OAAjD,CAA2D,MAA3D,CACAH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,CAAoD,OACvD,CA9Be,CA+BhBC,QAAQ,CAAE,CACNnC,KADM,iBACE,CACJ,IAAK,GAAIF,CAAAA,CAAC,CAAG,CAAR,CACGC,CADR,CAAgBD,CAAC,CAAG,KAAKuB,SAAL,CAAepB,MAAnC,CAA2CH,CAAC,EAA5C,CAAgD,CACxCC,CADwC,CACjC,KAAKsB,SAAL,CAAevB,CAAf,CADiC,CAE5C,GAAS,CAAL,EAAAA,CAAJ,CAAY,CACR,GAAIsC,CAAAA,CAAW,CAAG,KAAKtB,gBAAvB,CACAf,CAAI,CAACiB,SAAL,CAAiBoB,CAAjB,CACArC,CAAI,CAACsC,OAAL,CAAe,KAAKC,YAAL,CAAkB,KAAKxB,gBAAvB,CAClB,CAJD,IAIO,CACHf,CAAI,CAACiB,SAAL,CAAiB,KAAKuB,cAAL,CAAoB,KAAKlB,SAAL,CAAevB,CAAC,CAAG,CAAnB,EAAsBuC,OAA1C,CAAjB,CACAtC,CAAI,CAACsC,OAAL,CAAe,KAAKC,YAAL,CAAkBvC,CAAI,CAACiB,SAAvB,CAClB,CACJ,CACD,MAAO,MAAKK,SACf,CAdK,CAgBNmB,aAhBM,yBAgBW,YACTC,CAAW,CAAG,KAAKd,KAAL,CAAWe,GAAX,CAAe,SAAAC,CAAI,QAAI,IAAI5B,CAAAA,IAAJ,CAAS4B,CAAT,CAAJ,CAAnB,CADL,CAEbF,CAAW,CAACG,IAAZ,CAAiB,KAAKC,SAAtB,EACA,KAAKjB,WAAL,CAAmBa,CAAW,CAACC,GAAZ,CAAgB,SAAAC,CAAI,QAAI,CAAA,CAAI,CAACG,UAAL,CAAgBH,CAAhB,CAAJ,CAApB,CAAnB,CACA,MAAO,MAAKf,WAAL,CAAiBmB,IAAjB,CAAsB,UAAtB,CACV,CArBK,CA/BM,CAsDhBC,OAAO,CAAE,CACLC,YADK,uBACQC,CADR,CACiB,CAClB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACA,GAAoC,WAAhC,QAAOD,CAAAA,CAAO,CAACD,YAAf,EAA6E,CAA9B,CAAAC,CAAO,CAACD,YAAR,CAAqBhD,MAAxE,CAAoF,CAChFkD,CAAI,CAAGD,CAAO,CAACD,YAClB,CAFD,IAEO,CACHE,CAAI,CAAGD,CAAO,CAACC,IAClB,CACD,MAAOA,CAAAA,CACV,CATI,CAWLC,aAXK,wBAWSF,CAXT,CAWkB,CACnB,GAAIG,CAAAA,CAAK,GAAT,CACA,GAAuB,WAAnB,QAAOH,CAAAA,CAAP,EAA4D,WAA1B,QAAOA,CAAAA,CAAO,CAACI,MAAjD,EAA2E,IAAAJ,CAAO,CAACI,MAAvF,CAAwG,CACpGD,CAAK,GACR,CACD,MAAOA,CAAAA,CACV,CAjBI,CAmBLE,WAnBK,sBAmBOJ,CAnBP,CAmBaK,CAnBb,CAmBuB,CACxB,MAAOL,CAAAA,CAAI,CAAG,GAAP,EAAcK,CAAQ,CAAG,CAAzB,CACV,CArBI,CAuBLC,eAvBK,0BAuBWd,CAvBX,CAuBiB,CAClB,GAAIe,CAAAA,CAAc,CAAGjE,CAAM,CAACkD,CAAD,CAAN,CAAagB,MAAb,CAAoB,YAApB,CAArB,CACA,MAAOD,CAAAA,CACV,CA1BI,CA4BLE,QA5BK,oBA4BM,CACP,KAAKvC,SAAL,CAAewC,IAAf,CAAoB,CAChBV,IAAI,CAAE,KAAKlC,OAAL,CAAalB,IADH,CAEhByD,QAAQ,CAAG,KAAKxD,KAAL,CAAWC,MAAX,CAAoB,CAFf,CAGhBe,SAAS,CAAE,IAHK,CAIhBqB,OAAO,CAAE,IAJO,CAKhBnC,YAAY,GALI,CAMhB4D,iBAAiB,CAAE,CANH,CAOhBC,SAAS,GAPO,CAQhB7C,QAAQ,CAAE,EARM,CAApB,CAUH,CAvCI,CAyCL8C,SAzCK,oBAyCKC,CAzCL,CAyCY,CACb,MAAsB,EAAf,CAAAA,CAAK,CAAChE,MAChB,CA3CI,CA6CLiE,WA7CK,sBA6COnE,CA7CP,CA6CaoE,CA7Cb,CA6CoB,CACrB,GAAa,CAAT,EAAAA,CAAJ,CAAgB,CACZ,MAAO,KACV,CACD,KAAKC,oBAAL,GACA,IAAK,GAAItE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGC,CAAI,CAACmB,QAAL,CAAcjB,MAAlC,CAA0CH,CAAC,EAA3C,CAA+C,CAC3C,KAAKoB,QAAL,CAAc2C,IAAd,CAAmB9D,CAAI,CAACmB,QAAL,CAAcpB,CAAd,CAAnB,CACH,CACD,GAAIuE,CAAAA,CAAa,CAAG,KAAKhD,SAAL,CAAeiD,OAAf,CAAuBvE,CAAvB,CAApB,CACA,KAAKsB,SAAL,CAAekD,MAAf,CAAsBF,CAAtB,CAAqC,CAArC,CACH,CAvDI,CAyDLG,kBAzDK,8BAyDgB,CACjB,KAAKC,cAAL,GACH,CA3DI,CA6DLL,oBA7DK,gCA6DkB,CACnB,KAAKK,cAAL,GACH,CA/DI,CAiELlC,cAjEK,yBAiEUmC,CAjEV,CAiEqB,CACtB,GAAIC,CAAAA,CAAU,CAAGlF,CAAM,CAACA,CAAM,CAACiF,CAAD,CAAN,CAAkBE,GAAlB,CAAsB,CAAtB,CAAyB,MAAzB,CAAD,CAAN,CAAyCjB,MAAzC,CAAgD,YAAhD,CAAjB,CACA,MAAOgB,CAAAA,CACV,CApEI,CAsELrC,YAtEK,uBAsEQuC,CAtER,CAsEoB,CACrB,GAAIC,CAAAA,CAAQ,CAAGrF,CAAM,CAACA,CAAM,CAACoF,CAAD,CAAN,CAAmBD,GAAnB,CAAuB,CAAvB,CAA0B,MAA1B,CAAD,CAAN,CAA0CjB,MAA1C,CAAiD,YAAjD,CAAf,CACA,MAAOmB,CAAAA,CACV,CAzEI,CA2ELC,iBA3EK,4BA2EaC,CA3Eb,CA2E4BrC,CA3E5B,CA2EwD,IAAtBsC,CAAAA,CAAsB,wDAAN,IAAM,CACzDD,CAAa,CAAGA,CAAa,CAACE,WAAd,EAAhB,CACA,GAAIC,CAAAA,CAAW,CAAG1F,CAAM,CAACkD,CAAD,CAAN,CAAagB,MAAb,CAAoB,MAApB,EAA4BuB,WAA5B,EAAlB,CACA,MAAOC,CAAW,EAAIH,CAAtB,CAAqC,CACjCrC,CAAI,CAAGlD,CAAM,CAACkD,CAAD,CAAN,CAAaiC,GAAb,CAAiB,CAAjB,CAAoB,MAApB,CAAP,CACAO,CAAW,CAAG1F,CAAM,CAACkD,CAAD,CAAN,CAAagB,MAAb,CAAoB,MAApB,EAA4BuB,WAA5B,EACjB,CACD,GAAID,CAAJ,CAAmB,CACftC,CAAI,CAAGA,CAAI,CAACgB,MAAL,CAAYsB,CAAZ,CACV,CAFD,IAEO,CACH,GAAoB,QAAhB,QAAOtC,CAAAA,CAAX,CAA8B,CAC1BA,CAAI,CAAGyC,QAAQ,CAACzC,CAAI,CAACgB,MAAL,CAAY,GAAZ,CAAD,CAClB,CACJ,CACD,MAAOhB,CAAAA,CACV,CA1FI,CA4FLa,QA5FK,mBA4FIW,CA5FJ,CA4FW,CACZA,CAAK,GACL,gBAAUA,CAAV,OACH,CA/FI,CAiGLkB,YAjGK,wBAiGU,YACX,KAAK3D,eAAL,IACA,KAAKD,cAAL,CAAsB,EAAtB,CACA,GAAI,KAAK6D,WAAL,EAAJ,CAAwB,CACpB,KAAK9D,aAAL,IACA9B,CAAQ,CAAC6F,KAAT,CAAe,KAAKtE,OAAL,CAAauE,gBAA5B,EACA,KAAK/D,cAAL,CAAoBoC,IAApB,CAAyB,KAAK5C,OAAL,CAAauE,gBAAtC,EACA,QACH,CACD,GAAI,KAAKC,yBAAL,EAAJ,CAAsC,CAClC,KAAKjE,aAAL,IACA,KAAKC,cAAL,CAAoBoC,IAApB,CAAyB,KAAK5C,OAAL,CAAayE,qBAAtC,EACA,QACH,CAEDhG,CAAQ,CAACiG,OAAT,CAAiB,KAAK1E,OAAL,CAAa2E,oBAA9B,CACQ,UAAM,CACF,CAAI,CAACpE,aAAL,IACA,GAAIxB,CAAAA,CAAK,CAAG,CAAI,CAACA,KAAjB,CACAA,CAAK,CAAC,CAAD,CAAL,CAASgB,SAAT,CAAqBvB,CAAM,CAACO,CAAK,CAAC,CAAD,CAAL,CAASgB,SAAV,CAAN,CAA2B2C,MAA3B,CAAkC,YAAlC,CAArB,CACA,GAAIlD,CAAAA,CAAI,CAAG,CACPoF,MAAM,CAAE,gBADD,CAEPzE,MAAM,CAAE,CAAI,CAACA,MAFN,CAGPD,QAAQ,CAAE,CAAI,CAACA,QAHR,CAIP2E,WAAW,CAAE,CAAI,CAAClF,SAJX,CAKPZ,KAAK,CAAE,CAAI,CAAC+F,YAAL,CAAkB/F,CAAlB,CALA,CAMPgG,GAAG,CAAEC,MAAM,CAACC,QAAP,CAAgBC,IANd,CAAX,CAUA9G,CAAK,CAAC,CACF+G,MAAM,CAAE,KADN,CAEFJ,GAAG,CAAEK,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,8BAFnB,CAGFC,MAAM,CAAE/F,CAHN,CAAD,CAAL,CAIGgG,IAJH,CAIQ,SAACC,CAAD,CAAc,CAClB,GAAuB,GAAnB,EAAAA,CAAQ,CAACC,MAAT,EAA0BD,CAAQ,CAACjG,IAAT,CAAcmG,EAA5C,CAAgD,CAC5C,CAAI,CAACjG,QAAL,CAAgB+F,CAAQ,CAACjG,IAAT,CAAcA,IAAd,CAAmBE,QAAnC,CACAjB,CAAQ,CAACmH,OAAT,CAAiB,CAAI,CAAC5F,OAAL,CAAaS,eAA9B,EACA,CAAI,CAACA,eAAL,GACH,CAJD,IAIO,CACHhC,CAAQ,CAAC6F,KAAT,CAAe,CAAI,CAACtE,OAAL,CAAa6F,aAA5B,EACA,CAAI,CAACrF,cAAL,CAAoBoC,IAApB,CAAyB,CAAI,CAAC5C,OAAL,CAAa6F,aAAtC,CACH,CACJ,CAbD,EAaGC,KAbH,CAaS,UAAO,CACZrH,CAAQ,CAAC6F,KAAT,CAAe,CAAI,CAACtE,OAAL,CAAa6F,aAA5B,EACA,CAAI,CAACrF,cAAL,CAAoBoC,IAApB,CAAyB,CAAI,CAAC5C,OAAL,CAAa6F,aAAtC,CACH,CAhBD,EAgBGE,OAhBH,CAgBW,UAAM,CACb,CAAI,CAACxF,aAAL,GACH,CAlBD,CAmBH,CAlCT,CAmCQ,UAAM,CACF,CAAI,CAACA,aAAL,IACA9B,CAAQ,CAACuH,OAAT,CAAiB,CAAI,CAAChG,OAAL,CAAaiG,aAA9B,CACH,CAtCT,EAsCWC,GAtCX,CAsCe,CAAEC,KAAK,CAAE,KAAKnG,OAAL,CAAaoG,kBAAtB,CAtCf,EAuCKF,GAvCL,CAuCS,CAAEG,MAAM,CAAE,CAAEC,MAAM,CAAE,KAAKtG,OAAL,CAAauG,cAAvB,CAAuCZ,EAAE,CAAE,KAAK3F,OAAL,CAAawG,UAAxD,CAAV,CAvCT,CAwCH,CAxJI,CA0JL1B,YA1JK,uBA0JQ/F,CA1JR,CA0Je,CAChB,GAAI0H,CAAAA,CAAM,CAAG,EAAb,CACA1H,CAAK,CAAC2H,OAAN,CAAc,SAAA5H,CAAI,CAAI,CAClB,GAAI6H,CAAAA,CAAE,GAAN,CACAA,CAAE,CAACC,CAAH,CAAO9H,CAAI,CAAC+D,iBAAZ,CACA8D,CAAE,CAACE,CAAH,CAAO/H,CAAI,CAACiB,SAAZ,CACA4G,CAAE,CAACG,CAAH,CAAOhI,CAAI,CAACsC,OAAZ,CACAuF,CAAE,CAAC1G,QAAH,CAAc,EAAd,CACAnB,CAAI,CAACmB,QAAL,CAAcyG,OAAd,CAAsB,SAAAzE,CAAO,CAAI,CAC7B,GAAI4E,CAAAA,CAAC,GAAL,CACAA,CAAC,CAACE,GAAF,CAAQ9E,CAAO,CAAC+E,SAAhB,CACAL,CAAE,CAAC1G,QAAH,CAAY2C,IAAZ,CAAiBiE,CAAjB,CACH,CAJD,EAKAJ,CAAM,CAAC7D,IAAP,CAAY+D,CAAZ,CACH,CAZD,EAaA,MAAOM,CAAAA,IAAI,CAACC,SAAL,CAAeT,CAAf,CACV,CA1KI,CA4KLpC,WA5KK,uBA4KS,CACV,GAAyB,CAArB,OAAKtF,KAAL,CAAWC,MAAX,EAA0D,CAAhC,MAAKD,KAAL,CAAW,CAAX,EAAckB,QAAd,CAAuBjB,MAArD,CAAiE,CAC7D,QACH,CACD,IAAK,GAAIH,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKE,KAAL,CAAWC,MAA/B,CAAuCH,CAAC,EAAxC,CAA4C,CACxC,GAAQ,CAAJ,CAAAA,CAAC,EAAyC,CAAjC,OAAKE,KAAL,CAAWF,CAAX,EAAcoB,QAAd,CAAuBjB,MAApC,CAAiD,CAC7C,QACH,CACJ,CACD,QACH,CAtLI,CAwLLwF,yBAxLK,qCAwLuB,CACxB,IAAK,GAAI2C,CAAAA,CAAa,CAAG,CAAzB,CAA4BA,CAAa,CAAG,KAAKpI,KAAL,CAAWC,MAAvD,CAA+DmI,CAAa,EAA5E,CAAgF,CAC5E,IAAK,GAAIC,CAAAA,CAAgB,CAAG,CAA5B,CAA+BA,CAAgB,CAAG,KAAKrI,KAAL,CAAWoI,CAAX,EAA0BlH,QAA1B,CAAmCjB,MAArF,CAA6FoI,CAAgB,EAA7G,CAAiH,CAC7G,GAAI,CAAC,KAAKjF,aAAL,CAAmB,KAAKpD,KAAL,CAAWoI,CAAX,EAA0BlH,QAA1B,CAAmCmH,CAAnC,CAAnB,CAAL,CAA+E,CAC3E,QACH,CACJ,CACJ,CACD,QACH,CAjMI,CAmMLC,eAnMK,WAmMa,CACd,GAAIA,CAAAA,CAAe,CAAgC,CAA7B,MAAK7G,cAAL,CAAoBxB,MAA1C,CACA,MAAOqI,CAAAA,CACV,CAtMI,CAwMLC,mBAxMK,8BAwMepE,CAxMf,CAwMsB,CACvB,KAAK9C,SAAL,CAAe8C,CAAf,EAAsBjE,YAAtB,CAAqC,CAAC,KAAKmB,SAAL,CAAe8C,CAAf,EAAsBjE,YAC/D,CA1MI,CA4MLsI,eA5MK,2BA4Ma,IACVC,CAAAA,CAAQ,GADE,CAEVC,CAAI,CAAG,KAAK1I,KAAL,CAAWC,MAAX,CAAoB,CAFjB,CAGV0I,CAAG,CAAGlJ,CAAM,CAAC,KAAKO,KAAL,CAAW0I,CAAX,EAAiBrG,OAAlB,CAAN,CAAiCsB,MAAjC,CAAwC,GAAxC,CAHI,CAIViF,CAAG,CAAGnJ,CAAM,GAAGkE,MAAT,CAAgB,GAAhB,CAJI,CAKd,GAAIiF,CAAG,CAAGD,CAAV,CAAe,CACXF,CAAQ,GACX,CAFD,IAEO,CACHA,CAAQ,GACX,CACD,MAAOA,CAAAA,CACV,CAvNI,CAyNLI,mBAzNK,+BAyNiB,YACdC,CAAO,GADO,CAElBC,MAAM,CAACC,IAAP,CAAY,KAAKrI,QAAjB,EAA2B+B,GAA3B,CAA+B,SAAAuG,CAAG,CAAI,CAClC,GAAI,CAAC,CAAI,CAACtI,QAAL,CAAcsI,CAAd,CAAL,CAAyB,CACrBH,CAAO,GACV,CACJ,CAJD,EAKA,GAAInC,CAAAA,CAAM,CAAGmC,CAAO,CAAG,KAAK7H,OAAL,CAAaiI,iBAAhB,CAAoC,KAAKjI,OAAL,CAAakI,gBAArE,CACA,MAAOxC,CAAAA,CACV,CAlOI,CAoOL9D,SApOK,oBAoOMuG,CApON,CAoOSC,CApOT,CAoOY,CACb,MAAOA,CAAAA,CAAC,CAACC,OAAF,GAAcF,CAAC,CAACE,OAAF,EAAd,CAA4B,CAAC,CAA7B,CAAiCD,CAAC,CAACC,OAAF,GAAcF,CAAC,CAACE,OAAF,EAAd,CAA4B,CAA5B,CAAgC,CAC3E,CAtOI,CAwOLxG,UAxOK,qBAwOOH,CAxOP,CAwOa,IACR4G,CAAAA,CAAI,CAAG5G,CAAI,CAAC6G,cAAL,EADC,CAERC,CAAY,CAAG9G,CAAI,CAAC+G,WAAL,GAAqB,CAF5B,CAGRC,CAAK,CAAkB,EAAf,CAAAF,CAAY,YAAYA,CAAZ,EAA6BA,CAHzC,CAIRG,CAAU,CAAGjH,CAAI,CAACkH,UAAL,EAJL,CAKRC,CAAG,CAAgB,EAAb,CAAAF,CAAU,YAAYA,CAAZ,EAA2BA,CALnC,CAMd,gBAAUE,CAAV,aAAiBH,CAAjB,aAA0BJ,CAA1B,CACH,CA/OI,CAiPLQ,gBAjPK,4BAiPc,IACXC,CAAAA,CAAa,CAAG,EADL,CAEXC,CAAI,GAFO,CAGfA,CAAI,CAAC7C,KAAL,CAAa,KAAKnG,OAAL,CAAaiJ,UAA1B,CACAD,CAAI,CAACE,WAAL,CAAmB,KAAKlJ,OAAL,CAAamJ,gBAAhC,CACAJ,CAAa,CAACnG,IAAd,CAAmBoG,CAAnB,EACA,MAAOD,CAAAA,CACV,CAxPI,CAtDO,CAAR,CAiTf,CAYM,CAGV,CAnVC,CAAN","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/sortablejs\",\r\n        \"local_fliplearning/draggable\",\r\n        \"local_fliplearning/datepicker\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/alertify\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Sortable, Draggable, Datepicker, Moment, Alertify, PageHeader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            content = add_collapsabled_property_to_weeks(content);\r\n            Vue.use(Vuetify);\r\n            Vue.component('draggable', Draggable);\r\n            Vue.component('datepicker', Datepicker);\r\n            Vue.component('pageheader', PageHeader);\r\n            const app = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#setweeks\",\r\n                vuetify: new Vuetify(),\r\n                data: {\r\n                    display_settings: false,\r\n                    settings: content.settings,\r\n                    new_group: false,\r\n                    scroll_mode: false,\r\n                    weeks_started_at: new Date(Moment(Number(content.weeks[0].weekstart) * 1000)),\r\n                    strings: content.strings,\r\n                    sections: content.sections,\r\n                    courseid: content.courseid,\r\n                    userid: content.userid,\r\n                    raw_weeks: content.weeks,\r\n                    disabled_dates: {\r\n                        days: [0, 2, 3, 4, 5, 6]\r\n                    },\r\n                    saving_loader: false,\r\n                    error_messages: [],\r\n                    save_successful: false,\r\n\r\n                    dates: [],\r\n                    datesLabels: [],\r\n                    modal: false,\r\n\r\n                },\r\n                mounted() {\r\n                    document.querySelector(\"#setweeks-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#setweeks\").style.display = \"block\";\r\n                },\r\n                computed: {\r\n                    weeks() {\r\n                        for (let i = 0; i < this.raw_weeks.length; i++) {\r\n                            let week = this.raw_weeks[i];\r\n                            if (i == 0) {\r\n                                let start_weeks = this.weeks_started_at;\r\n                                week.weekstart = start_weeks;\r\n                                week.weekend = this.get_end_week(this.weeks_started_at);\r\n                            } else {\r\n                                week.weekstart = this.get_start_week(this.raw_weeks[i - 1].weekend);\r\n                                week.weekend = this.get_end_week(week.weekstart);\r\n                            }\r\n                        }\r\n                        return this.raw_weeks;\r\n                    },\r\n\r\n                    dateRangeText () {\r\n                        let dates_array = this.dates.map(date => new Date(date));\r\n                        dates_array.sort(this.sortDates);\r\n                        this.datesLabels = dates_array.map(date => this.formatDate(date));\r\n                        return this.datesLabels.join(' → ');\r\n                    },\r\n                },\r\n                methods: {\r\n                    section_name(section) {\r\n                        let name = null;\r\n                        if (typeof(section.section_name) != 'undefined' && section.section_name.length > 0) {\r\n                            name = section.section_name;\r\n                        } else {\r\n                            name = section.name;\r\n                        }\r\n                        return name;\r\n                    },\r\n\r\n                    section_exist(section) {\r\n                        let exist = true;\r\n                        if (typeof(section) != 'undefined' && typeof(section.exists) != 'undefined' && section.exists == false) {\r\n                            exist = false;\r\n                        }\r\n                        return exist;\r\n                    },\r\n\r\n                    format_name(name, position) {\r\n                        return name + \" \" + (position + 1);\r\n                    },\r\n\r\n                    customFormatter(date) {\r\n                        let weeks_start_at = Moment(date).format('YYYY-MM-DD');\r\n                        return weeks_start_at;\r\n                    },\r\n\r\n                    add_week() {\r\n                        this.raw_weeks.push({\r\n                            name: this.strings.week,\r\n                            position: (this.weeks.length + 1),\r\n                            weekstart: null,\r\n                            weekend: null,\r\n                            collapsabled: false,\r\n                            hours_dedications: 0,\r\n                            removable: true,\r\n                            sections: []\r\n                        });\r\n                    },\r\n\r\n                    has_items(array) {\r\n                        return array.length > 0;\r\n                    },\r\n\r\n                    remove_week(week, index) {\r\n                        if (index == 0) {\r\n                            return null;\r\n                        }\r\n                        this.close_delete_confirm();\r\n                        for (let i = 0; i < week.sections.length; i++) {\r\n                            this.sections.push(week.sections[i]);\r\n                        }\r\n                        let element_index = this.raw_weeks.indexOf(week);\r\n                        this.raw_weeks.splice(element_index, 1);\r\n                    },\r\n\r\n                    ask_delete_confirm() {\r\n                        this.delete_confirm = true;\r\n                    },\r\n\r\n                    close_delete_confirm() {\r\n                        this.delete_confirm = false;\r\n                    },\r\n\r\n                    get_start_week(pass_week) {\r\n                        let start_date = Moment(Moment(pass_week).add(1, 'days')).format('YYYY-MM-DD');\r\n                        return start_date;\r\n                    },\r\n\r\n                    get_end_week(start_week) {\r\n                        let end_date = Moment(Moment(start_week).add(6, 'days')).format('YYYY-MM-DD');\r\n                        return end_date;\r\n                    },\r\n\r\n                    get_date_next_day(requested_day, date, output_format = null) {\r\n                        requested_day = requested_day.toLowerCase();\r\n                        let current_day = Moment(date).format('dddd').toLowerCase();\r\n                        while (current_day != requested_day) {\r\n                            date = Moment(date).add(1, 'days');\r\n                            current_day = Moment(date).format('dddd').toLowerCase();\r\n                        }\r\n                        if (output_format) {\r\n                            date = date.format(output_format);\r\n                        } else {\r\n                            if (typeof(date) != 'number') {\r\n                                date = parseInt(date.format(\"x\"));\r\n                            }\r\n                        }\r\n                        return date;\r\n                    },\r\n\r\n                    position(index) {\r\n                        index++;\r\n                        return `${index} - `;\r\n                    },\r\n\r\n                    save_changes() {\r\n                        this.save_successful = false;\r\n                        this.error_messages = [];\r\n                        if (this.empty_weeks()) {\r\n                            this.saving_loader = false;\r\n                            Alertify.error(this.strings.error_empty_week);\r\n                            this.error_messages.push(this.strings.error_empty_week);\r\n                            return false;\r\n                        }\r\n                        if (this.weeks_deleted_from_course()) {\r\n                            this.saving_loader = false;\r\n                            this.error_messages.push(this.strings.error_section_removed);\r\n                            return false;\r\n                        }\r\n\r\n                        Alertify.confirm(this.strings.save_warning_content,\r\n                                () => {\r\n                                    this.saving_loader = true;\r\n                                    let weeks = this.weeks;\r\n                                    weeks[0].weekstart = Moment(weeks[0].weekstart).format(\"YYYY-MM-DD\");\r\n                                    let data = {\r\n                                        action: \"saveconfigweek\",\r\n                                        userid: this.userid,\r\n                                        courseid: this.courseid,\r\n                                        newinstance: this.new_group,\r\n                                        weeks: this.minify_query(weeks), // Stringify is a hack to clone object :D\r\n                                        url: window.location.href,\r\n                                    };\r\n\r\n\r\n                                    Axios({\r\n                                        method: 'get',\r\n                                        url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                                        params: data,\r\n                                    }).then((response) => {\r\n                                        if (response.status == 200 && response.data.ok) {\r\n                                            this.settings = response.data.data.settings;\r\n                                            Alertify.success(this.strings.save_successful);\r\n                                            this.save_successful = true;\r\n                                        } else {\r\n                                            Alertify.error(this.strings.error_network);\r\n                                            this.error_messages.push(this.strings.error_network);\r\n                                        }\r\n                                    }).catch((e) => {\r\n                                        Alertify.error(this.strings.error_network);\r\n                                        this.error_messages.push(this.strings.error_network);\r\n                                    }).finally(() => {\r\n                                        this.saving_loader = false;\r\n                                    });\r\n                                },\r\n                                () => { // ON CANCEL\r\n                                    this.saving_loader = false;\r\n                                    Alertify.warning(this.strings.cancel_action);\r\n                                }).set({ title: this.strings.save_warning_title })\r\n                            .set({ labels: { cancel: this.strings.confirm_cancel, ok: this.strings.confirm_ok } });\r\n                    },\r\n\r\n                    minify_query(weeks) {\r\n                        var minify = [];\r\n                        weeks.forEach(week => {\r\n                            var wk = new Object();\r\n                            wk.h = week.hours_dedications;\r\n                            wk.s = week.weekstart;\r\n                            wk.e = week.weekend;\r\n                            wk.sections = [];\r\n                            week.sections.forEach(section => {\r\n                                var s = new Object();\r\n                                s.sid = section.sectionid;\r\n                                wk.sections.push(s);\r\n                            });\r\n                            minify.push(wk);\r\n                        });\r\n                        return JSON.stringify(minify);\r\n                    },\r\n\r\n                    empty_weeks() {\r\n                        if (this.weeks.length >= 2 && this.weeks[0].sections.length < 1) {\r\n                            return true;\r\n                        }\r\n                        for (let i = 0; i < this.weeks.length; i++) {\r\n                            if (i > 0 && this.weeks[i].sections.length <= 0) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    weeks_deleted_from_course() {\r\n                        for (var week_position = 0; week_position < this.weeks.length; week_position++) {\r\n                            for (var section_position = 0; section_position < this.weeks[week_position].sections.length; section_position++) {\r\n                                if (!this.section_exist(this.weeks[week_position].sections[section_position])) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    exists_mistakes() {\r\n                        let exists_mistakes = this.error_messages.length > 0;\r\n                        return exists_mistakes;\r\n                    },\r\n\r\n                    change_collapsabled(index) {\r\n                        this.raw_weeks[index].collapsabled = !this.raw_weeks[index].collapsabled;\r\n                    },\r\n\r\n                    course_finished() {\r\n                        let finished = false;\r\n                        let last = this.weeks.length - 1;\r\n                        let end = Moment(this.weeks[last].weekend).format(\"X\");\r\n                        let now = Moment().format(\"X\");\r\n                        if (now > end) {\r\n                            finished = true;\r\n                        } else {\r\n                            finished = false;\r\n                        }\r\n                        return finished;\r\n                    },\r\n\r\n                    get_settings_status() {\r\n                        let visible = true;\r\n                        Object.keys(this.settings).map(key => {\r\n                            if (!this.settings[key]) {\r\n                                visible = false;\r\n                            }\r\n                        });\r\n                        let status = visible ? this.strings.tw_plugin_visible : this.strings.tw_plugin_hidden;\r\n                        return status;\r\n                    },\r\n\r\n                    sortDates (a, b) {\r\n                        return b.getTime() > a.getTime() ? -1 : b.getTime() < a.getTime() ? 1 : 0;\r\n                    },\r\n\r\n                    formatDate (date) {\r\n                        const year = date.getUTCFullYear();\r\n                        const month_number = date.getUTCMonth() + 1;\r\n                        const month = month_number < 10 ? `0${month_number}` : month_number;\r\n                        const day_number = date.getUTCDate();\r\n                        const day = day_number < 10 ? `0${day_number}` : day_number;\r\n                        return `${day}/${month}/${year}`;\r\n                    },\r\n\r\n                    get_help_content() {\r\n                        let help_contents = [];\r\n                        let help = new Object();\r\n                        help.title = this.strings.help_title;\r\n                        help.description = this.strings.help_description;\r\n                        help_contents.push(help);\r\n                        return help_contents;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function add_collapsabled_property_to_weeks(content) {\r\n            for (let i = 0; i < content.weeks.length; i++) {\r\n                let week = content.weeks[i];\r\n                if (typeof(week.collapsabled) == \"undefined\") {\r\n                    week.collapsabled = false;\r\n                }\r\n            }\r\n            return content;\r\n        }\r\n\r\n        return {\r\n            init: init\r\n        };\r\n    });"],"file":"setweeks.min.js"}