{"version":3,"sources":["../src/setweeks.js"],"names":["define","Vue","Vuetify","Axios","Sortable","Draggable","Datepicker","Moment","Alertify","Pageheader","add_collapsabled_property_to_weeks","content","i","week","weeks","length","collapsabled","init","console","log","use","component","delimiters","el","vuetify","data","display_settings","settings","new_group","scroll_mode","weeks_started_at","Date","weekstart","strings","sections","courseid","userid","raw_weeks","disabled_dates","days","saving_loader","error_messages","save_successful","mounted","document","querySelector","style","display","computed","start_weeks","format","weekend","get_end_week","get_start_week","methods","section_name","section","name","section_exist","exist","exists","format_name","position","customFormatter","date","weeks_start_at","add_week","push","start","end","hours_dedications","removable","has_items","array","remove_week","index","close_delete_confirm","element_index","indexOf","splice","ask_delete_confirm","delete_confirm","pass_week","start_date","add","start_week","end_date","get_date_next_day","requested_day","output_format","toLowerCase","current_day","parseInt","save_changes","empty_weeks","error","error_empty_week","weeks_deleted_from_course","error_section_removed","confirm","save_warning_content","action","newgroup","minify_query","method","url","M","cfg","wwwroot","params","then","response","status","valid","success","error_network","catch","warning","cancel_action","set","title","save_warning_title","labels","cancel","confirm_cancel","ok","confirm_ok","minify","forEach","wk","h","s","e","sid","sectionid","JSON","stringify","week_position","section_position","exists_mistakes","change_collapsabled","course_finished","finished","last","now","get_settings_status","visible","Object","keys","map","key","plugin_visible","plugin_hidden","get_help_content","help_contents","help","description"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/sortablejs\",\r\n        \"local_fliplearning/draggable\",\r\n        \"local_fliplearning/datepicker\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/alertify\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Sortable, Draggable, Datepicker, Moment, Alertify, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            console.log(content);\r\n            content = add_collapsabled_property_to_weeks(content);\r\n            Vue.use(Vuetify);\r\n            Vue.component('draggable', Draggable);\r\n            Vue.component('datepicker', Datepicker);\r\n            Vue.component('pageheader', Pageheader);\r\n            const app = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#setweeks\",\r\n                vuetify: new Vuetify(),\r\n                data: {\r\n                    display_settings: false,\r\n                    settings: content.settings,\r\n                    new_group: false,\r\n                    scroll_mode: false,\r\n                    weeks_started_at: new Date(Moment(content.weeks[0].weekstart)),\r\n                    strings: content.strings,\r\n                    sections: content.sections,\r\n                    courseid: content.courseid,\r\n                    userid: content.userid,\r\n                    raw_weeks: content.weeks,\r\n                    disabled_dates: {\r\n                        days: [0, 2, 3, 4, 5, 6]\r\n                    },\r\n                    saving_loader: false,\r\n                    error_messages: [],\r\n                    save_successful: false\r\n                },\r\n                mounted() {\r\n                    document.querySelector(\"#setweeks-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#setweeks\").style.display = \"block\";\r\n                },\r\n                computed: {\r\n                    weeks() {\r\n                        for (let i = 0; i < this.raw_weeks.length; i++) {\r\n                            let week = this.raw_weeks[i];\r\n                            if (i == 0) {\r\n                                var start_weeks = Moment(new Date(this.weeks_started_at)).format('YYYY-MM-DD');\r\n                                var start_weeks = this.weeks_started_at;\r\n                                week.weekstart = start_weeks;\r\n                                week.weekend = this.get_end_week(this.weeks_started_at);\r\n                            } else {\r\n                                week.weekstart = this.get_start_week(this.raw_weeks[i - 1].weekend);\r\n                                week.weekend = this.get_end_week(week.weekstart);\r\n                            }\r\n                        }\r\n                        return this.raw_weeks;\r\n                    }\r\n                },\r\n                methods: {\r\n                    section_name(section) {\r\n                        let name = null;\r\n                        if (typeof (section.section_name) != 'undefined' && section.section_name.length > 0) {\r\n                            name = section.section_name;\r\n                        } else {\r\n                            name = section.name;\r\n                        }\r\n                        return name;\r\n                    },\r\n\r\n                    section_exist(section) {\r\n                        let exist = true;\r\n                        if (typeof (section) != 'undefined' && typeof (section.exists) != 'undefined' && section.exists == false) {\r\n                            exist = false;\r\n                        }\r\n                        return exist;\r\n                    },\r\n\r\n                    format_name(name, position) {\r\n                        return name + \" \" + (position + 1);\r\n                    },\r\n\r\n                    customFormatter(date) {\r\n                        let weeks_start_at = Moment(date).format('YYYY-MM-DD');\r\n                        return weeks_start_at;\r\n                    },\r\n\r\n                    add_week() {\r\n                        this.raw_weeks.push({\r\n                            name: this.strings.week,\r\n                            position: (this.weeks.length + 1),\r\n                            start: null,\r\n                            end: null,\r\n                            collapsabled: false,\r\n                            hours_dedications: 0,\r\n                            removable: true,\r\n                            sections: []\r\n                        });\r\n                    },\r\n\r\n                    has_items(array) {\r\n                        return array.length > 0;\r\n                    },\r\n\r\n                    remove_week(week, index) {\r\n                        if (index == 0) {\r\n                            return null;\r\n                        }\r\n                        this.close_delete_confirm();\r\n                        for (let i = 0; i < week.sections.length; i++) {\r\n                            this.sections.push(week.sections[i]);\r\n                        }\r\n                        let element_index = this.raw_weeks.indexOf(week);\r\n                        this.raw_weeks.splice(element_index, 1);\r\n                    },\r\n\r\n                    ask_delete_confirm() {\r\n                        this.delete_confirm = true;\r\n                    },\r\n\r\n                    close_delete_confirm() {\r\n                        this.delete_confirm = false;\r\n                    },\r\n\r\n                    get_start_week(pass_week) {\r\n                        var start_date = Moment(Moment(pass_week).add(1, 'days')).format('YYYY-MM-DD');\r\n                        return start_date;\r\n                    },\r\n\r\n                    get_end_week(start_week) {\r\n                        let end_date = Moment(Moment(start_week).add(6, 'days')).format('YYYY-MM-DD');\r\n                        return end_date;\r\n                    },\r\n\r\n                    get_date_next_day(requested_day, date, output_format = null) {\r\n                        requested_day = requested_day.toLowerCase();\r\n                        let current_day = Moment(date).format('dddd').toLowerCase();\r\n                        while (current_day != requested_day) {\r\n                            date = Moment(date).add(1, 'days');\r\n                            current_day = Moment(date).format('dddd').toLowerCase();\r\n                        }\r\n                        if (output_format) {\r\n                            date = date.format(output_format);\r\n                        } else {\r\n                            if (typeof (date) != 'number') {\r\n                                date = parseInt(date.format(\"x\"));\r\n                            }\r\n                        }\r\n                        return date;\r\n                    },\r\n\r\n                    position(index) {\r\n                        index++;\r\n                        return `${index} - `;\r\n                    },\r\n\r\n                    save_changes() {\r\n                        this.save_successful = false;\r\n                        this.error_messages = [];\r\n                        if (this.empty_weeks()) {\r\n                            this.saving_loader = false;\r\n                            Alertify.error(this.strings.error_empty_week);\r\n                            this.error_messages.push(this.strings.error_empty_week);\r\n                            return false;\r\n                        }\r\n                        if (this.weeks_deleted_from_course()) {\r\n                            this.saving_loader = false;\r\n                            this.error_messages.push(this.strings.error_section_removed);\r\n                            return false;\r\n                        }\r\n\r\n                        Alertify.confirm(this.strings.save_warning_content,\r\n                            ()=>{\r\n                                this.saving_loader = true;\r\n                                var weeks = this.weeks;\r\n                                weeks[0].weekstart = Moment(weeks[0].weekstart).format(\"YYYY-MM-DD\");\r\n                                var data = {\r\n                                    action: \"saveconfigweek\",\r\n                                    userid: this.userid,\r\n                                    courseid: this.courseid,\r\n                                    newgroup: this.new_group,\r\n                                    weeks: this.minify_query(weeks) // Stringify is a hack to clone object :D\r\n                                };\r\n\r\n                                Axios({\r\n                                    method: 'get',\r\n                                    url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                                    params: data,\r\n                                }).then((response) => {\r\n                                    if (response.status == 200 && response.data.valid) {\r\n                                        this.settings = response.data.data.settings;\r\n                                        Alertify.success(this.strings.save_successful);\r\n                                        this.save_successful = true;\r\n                                    } else {\r\n                                        Alertify.error(this.strings.error_network);\r\n                                        this.error_messages.push(this.strings.error_network);\r\n                                    }\r\n                                    this.saving_loader = false;\r\n\r\n                                }).catch((e) => {\r\n                                    Alertify.error(this.strings.error_network);\r\n                                    this.error_messages.push(this.strings.error_network);\r\n                                    this.saving_loader = false;\r\n                                });\r\n                            },\r\n                            ()=>{ // ON CANCEL\r\n                                this.saving_loader = false;\r\n                                Alertify.warning(this.strings.cancel_action);\r\n                            }).set({title: this.strings.save_warning_title})\r\n                            .set({labels: {cancel: this.strings.confirm_cancel, ok: this.strings.confirm_ok}});\r\n                    },\r\n\r\n                    minify_query(weeks) {\r\n                        var minify = [];\r\n                        weeks.forEach(week => {\r\n                            var wk = new Object();\r\n                            wk.h = week.hours_dedications;\r\n                            wk.s = week.weekstart;\r\n                            wk.e = week.weekend;\r\n                            wk.sections = [];\r\n                            week.sections.forEach(section => {\r\n                                var s = new Object();\r\n                                s.sid = section.sectionid;\r\n                                wk.sections.push(s);\r\n                            });\r\n                            minify.push(wk);\r\n                        });\r\n                        return JSON.stringify(minify);\r\n                    },\r\n\r\n                    empty_weeks() {\r\n                        if (this.weeks.length >= 2 && this.weeks[0].sections.length < 1) {\r\n                            return true;\r\n                        }\r\n                        for (let i = 0; i < this.weeks.length; i++) {\r\n                            if (i > 0 && this.weeks[i].sections.length <= 0) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    weeks_deleted_from_course() {\r\n                        for (var week_position = 0; week_position < this.weeks.length; week_position++) {\r\n                            for (var section_position = 0; section_position < this.weeks[week_position].sections.length; section_position++) {\r\n                                if (!this.section_exist(this.weeks[week_position].sections[section_position])) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    exists_mistakes() {\r\n                        let exists_mistakes = this.error_messages.length > 0;\r\n                        return exists_mistakes;\r\n                    },\r\n\r\n                    change_collapsabled(index) {\r\n                        this.raw_weeks[index].collapsabled = !this.raw_weeks[index].collapsabled;\r\n                    },\r\n\r\n                    course_finished() {\r\n                        let finished = false;\r\n                        let last = this.weeks.length - 1;\r\n                        let end = Moment(this.weeks[last].weekend).format(\"X\");\r\n                        let now = Moment().format(\"X\");\r\n                        if (now > end) {\r\n                            finished = true;\r\n                        } else {\r\n                            finished = false;\r\n                        }\r\n                        return finished;\r\n                    },\r\n\r\n                    get_settings_status() {\r\n                        let visible = true;\r\n                        Object.keys(this.settings).map(key => {\r\n                            if (!this.settings[key]) {\r\n                                visible = false;\r\n                            }\r\n                        });\r\n                        let status = visible ? this.strings.plugin_visible : this.strings.plugin_hidden;\r\n                        return status;\r\n                    },\r\n\r\n                    get_help_content() {\r\n                        var help_contents = [];\r\n                        var help = new Object();\r\n                        help.title = this.strings.title;\r\n                        help.description = this.strings.description;\r\n                        help_contents.push(help);\r\n                        return help_contents;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function add_collapsabled_property_to_weeks(content) {\r\n            for (var i = 0; i < content.weeks.length; i++) {\r\n                var week = content.weeks[i];\r\n                if (typeof (week.collapsabled) == \"undefined\") {\r\n                    week.collapsabled = false;\r\n                }\r\n            }\r\n            return content;\r\n        }\r\n\r\n        return {\r\n            init: init\r\n        };\r\n    });"],"file":"setweeks.min.js"}