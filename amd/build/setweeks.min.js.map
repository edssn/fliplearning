{"version":3,"sources":["../src/setweeks.js"],"names":["define","Vue","Vuetify","Axios","Sortable","Draggable","Datepicker","Moment","Alertify","PageHeader","init","content","use","component","delimiters","el","vuetify","data","display_settings","settings","new_group","scroll_mode","strings","sections","sectionsWithCms","courseid","userid","raw_weeks","weeks","disabled_dates","days","saving_loader","error_messages","save_successful","dates","datesLabels","beforeMount","length","setModulesInSections","mounted","initBlockDates","document","querySelector","style","display","computed","dateRangeText","i","dates_array","map","date","Date","sort","sortDates","formatDate","weekstart","split","reverse","join","weekend","totalTime","j","total","cms","forEach","a","isNumber","hoursDedication","methods","section_name","section","name","section_exist","exist","exists","format_name","position","customFormatter","weeks_start_at","format","add_week","start","get_start_week","get_last_date","end","get_end_week","push","week","collapsabled","hours_dedications","removable","cmsTimeDialog","modal","blockDate","has_items","array","remove_week","index","close_delete_confirm","element_index","indexOf","splice","ask_delete_confirm","delete_confirm","get_date_next_day","requested_day","output_format","toLowerCase","current_day","add","parseInt","save_changes","empty_weeks","error","error_empty_week","weeks_deleted_from_course","error_section_removed","confirm","save_warning_content","action","newinstance","minify_query","url","window","location","href","method","M","cfg","wwwroot","params","then","response","status","ok","success","error_network","catch","finally","warning","cancel_action","set","title","save_warning_title","labels","cancel","confirm_cancel","confirm_ok","minify","wk","h","s","e","sid","sectionid","JSON","stringify","week_position","section_position","exists_mistakes","change_collapsabled","course_finished","finished","last","now","get_settings_status","visible","Object","keys","key","tw_plugin_visible","tw_plugin_hidden","b","getTime","year","getUTCFullYear","month_number","getUTCMonth","month","day_number","getUTCDate","day","get_help_content","help_contents","help","help_title","description","help_description","pass_week","start_weeks","setDate","getDate","toISOString","substr","start_week","end_date","saveWeek","diffDays","diffTime","Math","abs","ceil","dates_aux","new_last_dates","newLastDate","x","isNaN","getModuleIcon","modname","getModuleUrl","module","id","saveCourseModulesTime","dialog","weekIndex","cm","value","getHoursAmountMessage"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/sortablejs\",\r\n        \"local_fliplearning/draggable\",\r\n        \"local_fliplearning/datepicker\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/alertify\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Sortable, Draggable, Datepicker, Moment, Alertify, PageHeader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            // console.log(content);\r\n            Vue.use(Vuetify);\r\n            Vue.component('draggable', Draggable);\r\n            Vue.component('datepicker', Datepicker);\r\n            Vue.component('pageheader', PageHeader);\r\n            const app = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#setweeks\",\r\n                vuetify: new Vuetify(),\r\n                data: {\r\n                    display_settings: false,\r\n                    settings: content.settings,\r\n                    new_group: false,\r\n                    scroll_mode: false,\r\n                    strings: content.strings,\r\n                    sections: content.sections,\r\n                    sectionsWithCms: content.sectionsWithCms,\r\n                    courseid: content.courseid,\r\n                    userid: content.userid,\r\n                    raw_weeks: content.weeks,\r\n                    disabled_dates: {\r\n                        days: [0, 2, 3, 4, 5, 6]\r\n                    },\r\n                    saving_loader: false,\r\n                    error_messages: [],\r\n                    save_successful: false,\r\n\r\n                    dates: [],\r\n                    datesLabels: [],\r\n\r\n                },\r\n                beforeMount() {\r\n                    if (this.raw_weeks.length) {\r\n                        this.setModulesInSections();\r\n                    };\r\n                },\r\n                mounted() {\r\n                    this.initBlockDates();\r\n                    document.querySelector(\"#setweeks-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#setweeks\").style.display = \"block\";\r\n                },\r\n                computed: {\r\n\r\n                    dateRangeText() {\r\n                        return (i) => {\r\n                            let dates_array = this.raw_weeks[i].dates.map((date) => new Date(date));\r\n                            // Se ordenan las fechas seleccionadas\r\n                            dates_array.sort(this.sortDates);\r\n\r\n                            dates_array = dates_array.map(date => this.formatDate(date));\r\n                            this.raw_weeks[i].weekstart = dates_array[0].split('/').reverse().join('-');\r\n                            this.raw_weeks[i].weekend = dates_array[1]\r\n                                ? dates_array[1].split('/').reverse().join('-')\r\n                                : this.raw_weeks[i].weekstart;\r\n\r\n                            // Se retorna el arreglo de fechas ordenado y formateado\r\n                            //return dates_array.map((date) => this.formatDate(date)).join(\" → \");\r\n                            return dates_array.join(\" → \");\r\n                            // return this.raw_weeks[i].dates.join(\" → \");\r\n                        };\r\n                    },\r\n\r\n                    totalTime() {\r\n                        return (i, j) => {\r\n                            let total = 0;\r\n                            this.raw_weeks[i].sections[j].cms.forEach((a) => {\r\n                                total = total + this.isNumber(a.hoursDedication);\r\n                            });\r\n                            return total;\r\n                        };\r\n                    },\r\n                },\r\n                methods: {\r\n                    section_name(section) {\r\n                        let name = null;\r\n                        if (typeof(section.section_name) != 'undefined' && section.section_name.length > 0) {\r\n                            name = section.section_name;\r\n                        } else {\r\n                            name = section.name;\r\n                        }\r\n                        return name;\r\n                    },\r\n\r\n                    section_exist(section) {\r\n                        let exist = true;\r\n                        if (typeof(section) != 'undefined' && typeof(section.exists) != 'undefined' && section.exists == false) {\r\n                            exist = false;\r\n                        }\r\n                        return exist;\r\n                    },\r\n\r\n                    format_name(name, position) {\r\n                        return name + \" \" + (position + 1);\r\n                    },\r\n\r\n                    customFormatter(date) {\r\n                        let weeks_start_at = Moment(date).format('YYYY-MM-DD');\r\n                        return weeks_start_at;\r\n                    },\r\n\r\n                    add_week () {\r\n                        let start = this.get_start_week(new Date(this.get_last_date()));\r\n                        let end = this.get_end_week(new Date(start), 6);\r\n                        this.raw_weeks.push({\r\n                            name: this.strings.week,\r\n                            position: (this.raw_weeks.length + 1),\r\n                            weekstart: start,\r\n                            weekend: end,\r\n                            collapsabled: false,\r\n                            hours_dedications: 0,\r\n                            removable: true,\r\n                            sections: [],\r\n                            cmsTimeDialog: false,\r\n\r\n                            dates: [start, end],\r\n                            modal: false,\r\n                            blockDate: start,\r\n                        });\r\n                    },\r\n\r\n                    has_items(array) {\r\n                        return array.length > 0;\r\n                    },\r\n\r\n                    remove_week(week, index) {\r\n                        if (index == 0) {\r\n                            return null;\r\n                        }\r\n                        this.close_delete_confirm();\r\n                        for (let i = 0; i < week.sections.length; i++) {\r\n                            this.sections.push(week.sections[i]);\r\n                        }\r\n                        let element_index = this.raw_weeks.indexOf(week);\r\n                        this.raw_weeks.splice(element_index, 1);\r\n                    },\r\n\r\n                    ask_delete_confirm() {\r\n                        this.delete_confirm = true;\r\n                    },\r\n\r\n                    close_delete_confirm() {\r\n                        this.delete_confirm = false;\r\n                    },\r\n\r\n                    get_date_next_day(requested_day, date, output_format = null) {\r\n                        requested_day = requested_day.toLowerCase();\r\n                        let current_day = Moment(date).format('dddd').toLowerCase();\r\n                        while (current_day != requested_day) {\r\n                            date = Moment(date).add(1, 'days');\r\n                            current_day = Moment(date).format('dddd').toLowerCase();\r\n                        }\r\n                        if (output_format) {\r\n                            date = date.format(output_format);\r\n                        } else {\r\n                            if (typeof(date) != 'number') {\r\n                                date = parseInt(date.format(\"x\"));\r\n                            }\r\n                        }\r\n                        return date;\r\n                    },\r\n\r\n                    position(index) {\r\n                        index++;\r\n                        return `${index} - `;\r\n                    },\r\n\r\n                    save_changes() {\r\n                        this.save_successful = false;\r\n                        this.error_messages = [];\r\n                        if (this.empty_weeks()) {\r\n                            this.saving_loader = false;\r\n                            Alertify.error(this.strings.error_empty_week);\r\n                            this.error_messages.push(this.strings.error_empty_week);\r\n                            return false;\r\n                        }\r\n                        if (this.weeks_deleted_from_course()) {\r\n                            this.saving_loader = false;\r\n                            this.error_messages.push(this.strings.error_section_removed);\r\n                            return false;\r\n                        }\r\n\r\n                        Alertify.confirm(this.strings.save_warning_content,\r\n                                () => {\r\n                                    this.saving_loader = true;\r\n                                    let weeks = this.raw_weeks;\r\n                                    // weeks[0].weekstart = Moment(weeks[0].weekstart).format(\"YYYY-MM-DD\");\r\n                                    let data = {\r\n                                        action: \"saveconfigweek\",\r\n                                        userid: this.userid,\r\n                                        courseid: this.courseid,\r\n                                        newinstance: this.new_group,\r\n                                        weeks: this.minify_query(weeks), // Stringify is a hack to clone object :D\r\n                                        url: window.location.href,\r\n                                    };\r\n                                    Axios({\r\n                                        method: 'get',\r\n                                        url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                                        params: data,\r\n                                    }).then((response) => {\r\n                                        if (response.status == 200 && response.data.ok) {\r\n                                            this.settings = response.data.data.settings;\r\n                                            Alertify.success(this.strings.save_successful);\r\n                                            this.save_successful = true;\r\n                                        } else {\r\n                                            Alertify.error(this.strings.error_network);\r\n                                            this.error_messages.push(this.strings.error_network);\r\n                                        }\r\n                                    }).catch((e) => {\r\n                                        Alertify.error(this.strings.error_network);\r\n                                        this.error_messages.push(this.strings.error_network);\r\n                                    }).finally(() => {\r\n                                        this.saving_loader = false;\r\n                                    });\r\n                                },\r\n                                () => { // ON CANCEL\r\n                                    this.saving_loader = false;\r\n                                    Alertify.warning(this.strings.cancel_action);\r\n                                }).set({ title: this.strings.save_warning_title })\r\n                            .set({ labels: { cancel: this.strings.confirm_cancel, ok: this.strings.confirm_ok } });\r\n                    },\r\n\r\n                    minify_query(weeks) {\r\n                        var minify = [];\r\n                        weeks.forEach(week => {\r\n                            var wk = new Object();\r\n                            wk.h = week.hours_dedications;\r\n                            wk.s = week.weekstart;\r\n                            wk.e = week.weekend;\r\n                            wk.sections = [];\r\n                            week.sections.forEach(section => {\r\n                                var s = new Object();\r\n                                s.sid = section.sectionid;\r\n                                wk.sections.push(s);\r\n                            });\r\n                            minify.push(wk);\r\n                        });\r\n                        return JSON.stringify(minify);\r\n                    },\r\n\r\n                    empty_weeks() {\r\n                        if (this.raw_weeks.length >= 2 && this.raw_weeks[0].sections.length < 1) {\r\n                            return true;\r\n                        }\r\n                        for (let i = 0; i < this.raw_weeks.length; i++) {\r\n                            if (i > 0 && this.raw_weeks[i].sections.length <= 0) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    weeks_deleted_from_course() {\r\n                        for (let week_position = 0; week_position < this.raw_weeks.length; week_position++) {\r\n                            for (let section_position = 0; section_position < this.raw_weeks[week_position].sections.length; section_position++) {\r\n                                if (!this.section_exist(this.raw_weeks[week_position].sections[section_position])) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n\r\n                    exists_mistakes() {\r\n                        let exists_mistakes = this.error_messages.length > 0;\r\n                        return exists_mistakes;\r\n                    },\r\n\r\n                    change_collapsabled(index) {\r\n                        this.raw_weeks[index].collapsabled = !this.raw_weeks[index].collapsabled;\r\n                    },\r\n\r\n                    course_finished() {\r\n                        let finished = false;\r\n                        let last = this.raw_weeks.length - 1;\r\n                        let end = Moment(this.raw_weeks[last].dates[1]).format(\"X\");\r\n                        let now = Moment().format(\"X\");\r\n                        if (now > end) {\r\n                            finished = true;\r\n                        } else {\r\n                            finished = false;\r\n                        }\r\n                        return finished;\r\n                    },\r\n\r\n                    get_settings_status() {\r\n                        let visible = true;\r\n                        Object.keys(this.settings).map(key => {\r\n                            if (!this.settings[key]) {\r\n                                visible = false;\r\n                            }\r\n                        });\r\n                        let status = visible ? this.strings.tw_plugin_visible : this.strings.tw_plugin_hidden;\r\n                        return status;\r\n                    },\r\n\r\n                    sortDates (a, b) {\r\n                        return b.getTime() > a.getTime() ? -1 : b.getTime() < a.getTime() ? 1 : 0;\r\n                    },\r\n\r\n                    formatDate (date) {\r\n                        const year = date.getUTCFullYear();\r\n                        const month_number = date.getUTCMonth() + 1;\r\n                        const month = month_number < 10 ? `0${month_number}` : month_number;\r\n                        const day_number = date.getUTCDate();\r\n                        const day = day_number < 10 ? `0${day_number}` : day_number;\r\n                        return `${day}/${month}/${year}`;\r\n                    },\r\n\r\n                    get_help_content() {\r\n                        let help_contents = [];\r\n                        let help = new Object();\r\n                        help.title = this.strings.help_title;\r\n                        help.description = this.strings.help_description;\r\n                        help_contents.push(help);\r\n                        return help_contents;\r\n                    },\r\n\r\n                    get_start_week(pass_week) {\r\n                        // Se agrega un día a partir de la fecha final del rango anterior\r\n                        let start_weeks = new Date(pass_week.setDate(pass_week.getDate() + 1));\r\n                        // Convertimos la fecha a un formato permitido por el datepicker\r\n                        return start_weeks.toISOString().substr(0, 10);\r\n                    },\r\n\r\n                    get_end_week(start_week, days) {\r\n                        // Establecemos la fecha final (una semana a partir de la fecha inicial)\r\n                        let end_date = new Date(start_week.setDate(start_week.getDate() + days));\r\n                        // Convertimos la fecha a un formato permitido por el datepicker\r\n                        return end_date.toISOString().substr(0, 10);\r\n                    },\r\n\r\n                    get_last_date() {\r\n                        return this.raw_weeks[this.raw_weeks.length - 1].dates[\r\n                            this.raw_weeks[this.raw_weeks.length - 1].dates.length === 1 ? 0 : 1\r\n                        ];\r\n                    },\r\n\r\n                    saveWeek(index) {\r\n                        // Cerrar el modal\r\n                        this.raw_weeks[index].modal = false;\r\n\r\n                        // Recalcular las siguientes fechas con un rango de siete días\r\n                        for (let i = index + 1; i < this.raw_weeks.length; i++) {\r\n\r\n                            let dates_array = this.raw_weeks[i].dates.map((date) => new Date(date));\r\n                            let diffDays = 0;\r\n\r\n                            if(dates_array.length > 1){\r\n                                const diffTime = Math.abs(dates_array[0] - dates_array[1]);\r\n                                diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                            }\r\n\r\n                            // Ordenamos las fechas de la semana seleccionada\r\n                            let dates_aux = this.raw_weeks[i-1].dates.map((date) => new Date(date));\r\n                            dates_aux.sort(this.sortDates);\r\n                            let new_last_dates = dates_aux.map((date) => date.toISOString().substr(0, 10));\r\n\r\n                            let week = this.raw_weeks[i];\r\n                            let newLastDate = new_last_dates[ new_last_dates.length === 1 ? 0 : 1 ];\r\n                            let start = this.get_start_week(new Date(newLastDate));\r\n                            let end = this.get_end_week(new Date(start), diffDays);\r\n                            week.dates = [start, end];\r\n\r\n                            // Actualizar blockDate\r\n                            this.raw_weeks[i].blockDate = this.get_end_week(new Date(this.raw_weeks[i - 1].weekend), 1);\r\n                        }\r\n                    },\r\n\r\n                    initBlockDates() {\r\n                        if (this.raw_weeks.length > 1) {\r\n                            for (let i = 1; i < this.raw_weeks.length; i++) {\r\n                                this.raw_weeks[i].blockDate = this.get_end_week(new Date(this.raw_weeks[i - 1].weekend), 1);\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    setModulesInSections () {\r\n                        let i, j, sid;\r\n                        for (i = 0; i < this.raw_weeks.length; i++) {\r\n                            this.raw_weeks[i].cmsTimeDialog = false;\r\n                            for (j = 0; j < this.raw_weeks[i].sections.length; j++) {\r\n                                sid = `sid${this.raw_weeks[i].sections[j].sectionid}`;\r\n                                this.raw_weeks[i].sections[j].cms = this.sectionsWithCms[sid];\r\n                            }\r\n                        }\r\n\r\n                        for (i = 0; i < this.sections.length; i++) {\r\n                            sid = `sid${this.sections[i].sectionid}`;\r\n                            this.sections[i].cms = this.sectionsWithCms[sid];\r\n                        }\r\n                    },\r\n\r\n                    isNumber(x) {\r\n                        if (x === \"\") {\r\n                            return 0;\r\n                        }\r\n                        if (isNaN(x)) {\r\n                            return 0;\r\n                        }\r\n                        return parseInt(x);\r\n                    },\r\n\r\n                    getModuleIcon(modname){\r\n                        return `${M.cfg.wwwroot}/theme/image.php/boost/${modname}/1/icon`;\r\n                    },\r\n\r\n                    getModuleUrl(module){\r\n                        return `${M.cfg.wwwroot}/mod/${module.modname}/view.php?id=${module.id}`;\r\n                    },\r\n\r\n                    saveCourseModulesTime (dialog, weekIndex) {\r\n                        let total = 0;\r\n                        this.raw_weeks[weekIndex].sections.forEach((section) => {\r\n                            section.cms.forEach((cm) => {\r\n                                total = total + this.isNumber(cm.hoursDedication);\r\n                            });\r\n                        });\r\n                        this.raw_weeks[weekIndex].hours_dedications = this.isNumber(total);\r\n                        dialog.value = false;\r\n                    },\r\n\r\n                    getHoursAmountMessage () {\r\n\r\n                    },\r\n                }\r\n            });\r\n        }\r\n\r\n        return {\r\n            init: init\r\n        };\r\n    });"],"file":"setweeks.min.js"}