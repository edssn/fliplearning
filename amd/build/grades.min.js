define ("local_fliplearning/grades",["local_fliplearning/vue","local_fliplearning/vuetify","local_fliplearning/axios","local_fliplearning/moment","local_fliplearning/pagination","local_fliplearning/chartcomponent","local_fliplearning/pageheader"],function(a,b,c,d,e,f,g){"use strict";return{init:function(c){console.log(c);a.use(b);a.component("pagination",e);a.component("chart",f);a.component("pageheader",g);var d=new a({delimiters:["[[","]]"],el:"#grades",vuetify:new b,data:function data(){return{strings:c.strings,groups:c.groups,userid:c.userid,courseid:c.courseid,timezone:c.timezone,render_has:c.profile_render,loading:!1,errors:[],pages:c.pages,grades:c.grades,default_category:null,average_categories:[],average_data:[],selected_items:[],item_details:[],grade_item_details_title:"",grade_item_details_categories:[],grade_item_details_data:[],selected_item:null}},beforeMount:function beforeMount(){if(this.grades.categories.length){this.default_category=this.grades.categories[0];this.calculate_chart_items_average(this.default_category.items);var a=this.find_first_grade_item(this.default_category.items);this.calculate_chart_item_grade_detail(a)}},mounted:function mounted(){document.querySelector("#sessions-loader").style.display="none";document.querySelector("#grades").style.display="block"},computed:{},methods:{get_help_content:function get_help_content(){return"Texto de Ayuda"},changeCategory:function changeCategory(a){this.calculate_chart_items_average(a);var b=this.find_first_grade_item(a);this.calculate_chart_item_grade_detail(b)},build_chart_items_average:function build_chart_items_average(){var a={};a.chart={type:"column",backgroundColor:"#FAFAFA"};a.title={text:this.strings.grades_chart_title};a.xAxis={categories:this.average_categories};a.legend={enabled:!1};a.plotOptions={series:{cursor:"pointer",point:{events:{click:function click(){var a=this.x,b=d.selected_items[a];d.calculate_chart_item_grade_detail(b)}}}}};a.tooltip={formatter:function formatter(){var a=this.point.x,b=d.selected_items[a],c=this.x,e=b.average.toFixed(2),f=b.grademax,g=b.gradecount,h="<b>"+c+"<b> <br/>"+d.strings.grades_tooltip_average+": "+e+"<br/>"+d.strings.grades_tooltip_grade+": "+f+"<br/>"+g+" "+d.strings.grades_tooltip_students+" "+d.grades.student_count+"<br/>";return h}};a.yAxis=[{allowDecimals:!1,labels:{format:"{value} %"},title:{text:this.strings.grades_yaxis_title}}];a.series=[{data:this.average_data}];a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},build_chart_item_grade_detail:function build_chart_item_grade_detail(){var a={};a.chart={type:"bar",backgroundColor:"#FAFAFA"};a.title={text:this.grade_item_details_title};a.xAxis={categories:this.strings.grade_item_details_categories};a.legend={enabled:!1};a.tooltip={formatter:function formatter(){var a=this.x,b=d.selected_item.itemname,c=d.selected_item.grademax,e=0;if(0==this.point.x){e=d.selected_item.maxrating}else if(1==this.point.x){e=d.selected_item.average}else{e=d.selected_item.minrating}var f="<b>"+b+"<b> <br/>"+a+": "+e+"/"+c+"<br/>";return f}};a.yAxis=[{title:{enabled:!1}}];a.series=[{data:this.grade_item_details_data}];a.credits={enabled:!1};a.lang={noData:this.strings.no_data};return a},calculate_chart_items_average:function calculate_chart_items_average(a){var b=[],c=[];a.forEach(function(a){b.push(a.average_percentage);c.push(a.itemname)});this.average_categories=c;this.average_data=b;this.selected_items=a},calculate_chart_item_grade_detail:function calculate_chart_item_grade_detail(a){this.selected_item=a;var b=[0,0,0];if(a){b=[+a.maxrating.toFixed(2),+a.average.toFixed(2),+a.minrating.toFixed(2)]}this.grade_item_details_title=a.itemname;this.grade_item_details_data=b},find_first_grade_item:function find_first_grade_item(a){var b;if(a.length){for(var c=a.length,d=0;d<c;d++){if(0<a[d].maxrating){b=a[d];break}}if(!b){b=a[0]}}return b}}})}}});
//# sourceMappingURL=grades.min.js.map
