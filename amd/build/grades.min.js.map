{"version":3,"sources":["../src/grades.js"],"names":["define","Vue","Vuetify","Axios","Moment","Pagination","Chart","Pageheader","init","content","console","log","use","component","vue","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","grades","default_category","average_categories","average_data","selected_items","item_details","grade_item_details_title","grade_item_details_categories","grade_item_details_data","selected_item","beforeMount","categories","length","calculate_chart_items_average","items","item","find_first_grade_item","calculate_chart_item_grade_detail","mounted","document","querySelector","style","display","computed","methods","get_help_content","changeCategory","build_chart_items_average","chart","type","backgroundColor","title","text","grades_chart_title","xAxis","legend","enabled","plotOptions","series","cursor","point","events","click","position","x","tooltip","formatter","name","average","toFixed","grademax","count","gradecount","grades_tooltip_average","grades_tooltip_grade","grades_tooltip_students","student_count","yAxis","allowDecimals","labels","format","grades_yaxis_title","credits","lang","noData","no_data","build_chart_item_grade_detail","category","itemname","maxgrade","grade","maxrating","minrating","values","forEach","push","average_percentage","item_data","i"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartcomponent\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, Pagination, Chart, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            console.log(content);\r\n            Vue.use(Vuetify)\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', Chart);\r\n            Vue.component('pageheader', Pageheader);\r\n            let vue = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#grades\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings : content.strings,\r\n                        groups : content.groups,\r\n                        userid : content.userid,\r\n                        courseid : content.courseid,\r\n                        timezone : content.timezone,\r\n                        render_has : content.profile_render,\r\n                        loading : false,\r\n                        errors : [],\r\n                        pages : content.pages,\r\n\r\n                        grades: content.grades,\r\n                        default_category: null,\r\n                        average_categories: [],\r\n                        average_data: [],\r\n                        selected_items: [],\r\n                        item_details: [],\r\n\r\n                        grade_item_details_title: \"\",\r\n                        grade_item_details_categories: [],\r\n                        grade_item_details_data: [],\r\n                        selected_item: null,\r\n                    }\r\n                },\r\n                beforeMount(){\r\n                    if (this.grades.categories.length) {\r\n                        this.default_category = this.grades.categories[0];\r\n                        this.calculate_chart_items_average(this.default_category.items);\r\n                        let item = this.find_first_grade_item(this.default_category.items);\r\n                        this.calculate_chart_item_grade_detail(item);\r\n                    };\r\n                },\r\n                mounted(){\r\n                    document.querySelector(\"#sessions-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#grades\").style.display = \"block\";\r\n                },\r\n                computed :{\r\n\r\n                },\r\n                methods : {\r\n                    get_help_content(){\r\n                        let helpcontents = `Texto de Ayuda`;\r\n                        return helpcontents;\r\n                    },\r\n\r\n                    changeCategory(items) {\r\n                        this.calculate_chart_items_average(items);\r\n                        let item = this.find_first_grade_item(items);\r\n                        this.calculate_chart_item_grade_detail(item);\r\n                    },\r\n\r\n                    build_chart_items_average() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'column',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.grades_chart_title\r\n                        };\r\n                        chart.xAxis = {\r\n                            categories: this.average_categories\r\n                        };\r\n                        chart.legend = {\r\n                            enabled: false\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            let position = this.x;\r\n                                            let item = vue.selected_items[position];\r\n                                            vue.calculate_chart_item_grade_detail(item);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            formatter: function() {\r\n                                let position = this.point.x;\r\n                                let item = vue.selected_items[position];\r\n                                let name = this.x;\r\n                                let average = item.average.toFixed(2);\r\n                                let grademax = item.grademax;\r\n                                let count = item.gradecount;\r\n                                let text = '<b>' + name + '<b> <br/>' +\r\n                                    vue.strings.grades_tooltip_average + ': ' + average + '<br/>' +\r\n                                    vue.strings.grades_tooltip_grade + ': ' + grademax + '<br/>' +\r\n                                    count + ' ' + vue.strings.grades_tooltip_students + ' ' +\r\n                                    vue.grades.student_count\r\n                                    + '<br/>';\r\n                                return text;\r\n                            }\r\n                        };\r\n                        chart.yAxis = [{\r\n                            allowDecimals: false,\r\n                            labels: {\r\n                                format: '{value} %',\r\n                            },\r\n                            title: {\r\n                                text: this.strings.grades_yaxis_title,\r\n                            }\r\n                        }];\r\n                        chart.series = [{\r\n                            data: this.average_data,\r\n                        }];\r\n                        chart.credits = {\r\n                            enabled: false\r\n                        };\r\n                        chart.lang = {\r\n                            noData: this.strings.no_data,\r\n                        };\r\n                        return chart;\r\n                    },\r\n\r\n                    build_chart_item_grade_detail() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'bar',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.grade_item_details_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            categories: this.strings.grade_item_details_categories,\r\n                        };\r\n                        chart.legend = {\r\n                            enabled: false\r\n                        };\r\n                        chart.tooltip = {\r\n                            formatter: function() {\r\n                                let category = this.x;\r\n                                let name = vue.selected_item.itemname;\r\n                                let maxgrade = vue.selected_item.grademax;\r\n                                let grade = 0;\r\n                                if (this.point.x == 0) {\r\n                                    grade = vue.selected_item.maxrating;\r\n                                } else if (this.point.x == 1) {\r\n                                    grade = vue.selected_item.average;\r\n                                } else {\r\n                                    grade = vue.selected_item.minrating;\r\n                                }\r\n\r\n                                let text = '<b>' + name + '<b> <br/>' +\r\n                                    category + ': ' + grade + '/' + maxgrade + '<br/>';\r\n                                return text;\r\n                            }\r\n                        };\r\n                        chart.yAxis = [{\r\n                            title: {\r\n                                enabled: false,\r\n                            }\r\n                        }];\r\n                        chart.series = [{\r\n                            data: this.grade_item_details_data,\r\n                        }];\r\n                        chart.credits = {\r\n                            enabled: false\r\n                        };\r\n                        chart.lang = {\r\n                            noData: this.strings.no_data,\r\n                        };\r\n                        return chart;\r\n                    },\r\n\r\n                    calculate_chart_items_average(items) {\r\n                        let values = [];\r\n                        let categories = [];\r\n                        items.forEach(item => {\r\n                            values.push(item.average_percentage);\r\n                            categories.push(item.itemname);\r\n                        });\r\n                        this.average_categories = categories;\r\n                        this.average_data = values;\r\n                        this.selected_items = items;\r\n                    },\r\n\r\n                    calculate_chart_item_grade_detail(item) {\r\n                        this.selected_item = item;\r\n                        let item_data = [0, 0, 0];\r\n                        if (item) {\r\n                            item_data = [\r\n                                Number(item.maxrating.toFixed(2)),\r\n                                Number(item.average.toFixed(2)),\r\n                                Number(item.minrating.toFixed(2)),\r\n                            ];\r\n                        }\r\n                        this.grade_item_details_title = item.itemname;\r\n                        this.grade_item_details_data = item_data;\r\n                    },\r\n\r\n                    find_first_grade_item(items) {\r\n                        let item;\r\n                        if (items.length) {\r\n                            let count = items.length;\r\n                            for (let i = 0; i < count; i++) {\r\n                                if (items[i].maxrating > 0) {\r\n                                    item = items[i];\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (!item) {\r\n                                item = items[0];\r\n                            }\r\n                        }\r\n                        return item;\r\n                    },\r\n\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init : init\r\n        };\r\n    });"],"file":"grades.min.js"}