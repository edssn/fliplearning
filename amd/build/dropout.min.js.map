{"version":3,"sources":["../src/dropout.js"],"names":["define","Vue","Vuetify","Axios","Moment","Pagination","ChartDynamic","Pageheader","init","content","console","log","use","component","vue","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","dropout","selected_cluster","cluster_users","selected_user","search","beforeMount","clusters","length","change_cluster","users","mounted","document","querySelector","style","display","computed","methods","get_help_content","selected_users","forEach","user","includes","id","push","update_interactions","week","action","weekcode","profile","method","url","M","cfg","wwwroot","params","then","response","status","ok","inverted_time","error_messages","error_network","catch","api_error_network","finally","table_headers","headers","text","value","align","sortable","thead_name","thead_lastname","thead_progress","change_user","get_picture_url","get_user_fullname","firstname","lastname","get_username","username","see_profile","window","open","get_progress_message","module_label","modules_label","finished_label","finisheds_label","cms","complete","of_conector","total_cms","get_progress_percentage","progress_percentage","get_student_grade","grade","coursegrade","finalgrade","maxgrade","student_grade","isInt","toFixed","max_grade","n","get_timezone","information","ss_change_timezone"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartdynamic\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, Pagination, ChartDynamic, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            console.log(content);\r\n            Vue.use(Vuetify)\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', ChartDynamic);\r\n            Vue.component('pageheader', Pageheader);\r\n            let vue = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#dropout\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings : content.strings,\r\n                        groups : content.groups,\r\n                        userid : content.userid,\r\n                        courseid : content.courseid,\r\n                        timezone : content.timezone,\r\n                        render_has : content.profile_render,\r\n                        loading : false,\r\n                        errors : [],\r\n                        pages : content.pages,\r\n\r\n                        dropout: content.dropout,\r\n                        selected_cluster: [],\r\n                        cluster_users: [],\r\n                        selected_user: {},\r\n                        search: null,\r\n                    }\r\n                },\r\n                beforeMount(){\r\n                    if (this.dropout.clusters.length) {\r\n                        this.selected_cluster = this.dropout.clusters[0];\r\n                        this.change_cluster(this.selected_cluster.users);\r\n                    };\r\n                },\r\n                mounted(){\r\n                    document.querySelector(\"#sessions-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#dropout\").style.display = \"block\";\r\n                },\r\n                computed :{\r\n\r\n                },\r\n                methods : {\r\n                    get_help_content(){\r\n                        let helpcontents = `Texto de Ayuda`;\r\n                        return helpcontents;\r\n                    },\r\n\r\n                    change_cluster(users) {\r\n                        let selected_users = [];\r\n                        this.dropout.users.forEach(user => {\r\n                            if (users.includes(user.id)) {\r\n                                selected_users.push(user);\r\n                            }\r\n                        });\r\n                        this.cluster_users = selected_users;\r\n                        this.selected_user = this.cluster_users[0] || {};\r\n                        console.log(this.cluster_users);\r\n                        console.log(this.selected_user);\r\n                    },\r\n\r\n                    update_interactions(week){\r\n                        this.loading = true;\r\n                        this.errors = [];\r\n                        let data = {\r\n                            action : \"time\",\r\n                            userid : this.userid,\r\n                            courseid : this.courseid,\r\n                            weekcode : week.weekcode,\r\n                            profile : this.render_has,\r\n                        }\r\n                        Axios({\r\n                            method:'get',\r\n                            url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                            params : data,\r\n                        }).then((response) => {\r\n                            if (response.status == 200 && response.data.ok) {\r\n                                this.inverted_time = response.data.data.inverted_time;\r\n                            } else {\r\n                                this.error_messages.push(this.strings.error_network);\r\n                            }\r\n                        }).catch((e) => {\r\n                            this.errors.push(this.strings.api_error_network);\r\n                        }).finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                        return this.data;\r\n                    },\r\n\r\n                    table_headers(){\r\n                        let headers = [\r\n                            { text: '', value : 'id', align : 'center', sortable : false},\r\n                            { text: this.strings.thead_name , value : 'firstname'},\r\n                            { text: this.strings.thead_lastname , value : 'lastname'},\r\n                            { text: this.strings.thead_progress , value : 'progress_percentage'},\r\n                        ];\r\n                        return headers;\r\n                    },\r\n\r\n                    change_user(user) {\r\n                        this.selected_user = user;\r\n                    },\r\n\r\n                    get_picture_url(userid){\r\n                        return `${M.cfg.wwwroot}/user/pix.php?file=/${userid}/f1.jpg`;\r\n                    },\r\n\r\n                    get_user_fullname(){\r\n                        return `${this.selected_user.firstname} ${this.selected_user.lastname}`;\r\n                    },\r\n\r\n                    get_username(){\r\n                        return `@${this.selected_user.username}`;\r\n                    },\r\n\r\n                    see_profile () {\r\n                        let id = this.selected_user.id;\r\n                        let url = M.cfg.wwwroot + '/user/view.php?id='+id+'&course='+vue.courseid;\r\n                        window.open(url);\r\n                    },\r\n\r\n                    get_progress_message(){\r\n                        let module_label = this.strings.modules_label;\r\n                        let finished_label = this.strings.finisheds_label;\r\n                        if (this.selected_user.cms.complete == 1) {\r\n                            module_label = this.strings.module_label;\r\n                            finished_label = this.strings.finished_label;\r\n                        }\r\n                        return `${this.selected_user.cms.complete} ${module_label} ${finished_label} ${this.strings.of_conector} ${this.dropout.total_cms}`;\r\n                    },\r\n\r\n                    get_progress_percentage() {\r\n                        return `${this.selected_user.progress_percentage} %`;\r\n                    },\r\n\r\n                    get_student_grade() {\r\n                        let grade = this.selected_user.coursegrade;\r\n                        grade.finalgrade = Number(grade.finalgrade);\r\n                        grade.maxgrade = Number(grade.maxgrade);\r\n                        let student_grade = this.isInt(grade.finalgrade) ? grade.finalgrade : grade.finalgrade.toFixed(2);\r\n                        let max_grade = this.isInt(grade.maxgrade) ? grade.maxgrade : grade.maxgrade.toFixed(2);\r\n                        return `${student_grade}/${max_grade}`;\r\n                    },\r\n\r\n                    isInt(n) {\r\n                        return n % 1 === 0;\r\n                    },\r\n\r\n                    get_timezone(){\r\n                        let information = `${this.strings.ss_change_timezone} ${this.timezone}`\r\n                        return information;\r\n                    },\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init : init\r\n        };\r\n    });"],"file":"dropout.min.js"}