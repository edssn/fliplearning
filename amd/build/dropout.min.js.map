{"version":3,"sources":["../src/dropout.js"],"names":["define","Vue","Vuetify","Axios","Moment","Pagination","ChartDynamic","Pageheader","init","content","console","log","use","component","vue","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","dropout","selected_cluster","cluster_users","selected_user","search","week_modules_chart_data","week_modules_chart_categories","beforeMount","clusters","length","set_modules_in_sections","change_cluster","users","mounted","document","querySelector","style","display","computed","methods","get_help_content","sectionsMap","Map","sectionid","cms","forEach","cm","section","has","set","get","push","sections","modules","selected_users","user","includes","id","calculate_modules_access_by_week","build_modules_access_chart","chart","type","backgroundColor","title","text","modules_access_chart_title","xAxis","yAxis","allowDecimals","enabled","modules_amount","tooltip","formatter","module_text","y","module_label","modules_label","key","modules_details","plotOptions","series","cursor","point","events","click","open_modules_modal","x","legend","colorByPoint","name","modules_access_chart_series_viewed","viewed","modules_access_chart_series_complete","complete","modules_access_chart_series_total","total","build_week_modules_chart","week_modules_chart_title","categories","crosshair","shared","colorIndex","moduleid","weekcompletecms","weekviewedcms","completecms","viewedcms","user_cm","weeks","week","get_section","module","get_user_module","position","i","update_interactions","action","weekcode","profile","method","url","M","cfg","wwwroot","params","then","response","status","ok","inverted_time","error_messages","error_network","catch","api_error_network","finally","table_headers","headers","value","align","sortable","thead_name","thead_lastname","thead_progress","change_user","get_picture_url","get_user_fullname","firstname","lastname","get_username","username","see_profile","window","open","get_progress_message","finished_label","finisheds_label","of_conector","total_cms","get_progress_percentage","progress_percentage","get_student_grade","grade","coursegrade","finalgrade","maxgrade","student_grade","isInt","toFixed","max_grade","n","get_timezone","information","ss_change_timezone"],"mappings":"AAAAA,OAAM,8BAAC,CAAC,wBAAD,CACC,4BADD,CAEC,0BAFD,CAGC,2BAHD,CAIC,+BAJD,CAKC,iCALD,CAMC,+BAND,CAAD,CAQF,SAASC,CAAT,CAAcC,CAAd,CAAuBC,CAAvB,CAA8BC,CAA9B,CAAsCC,CAAtC,CAAkDC,CAAlD,CAAgEC,CAAhE,CAA4E,CACxE,aAmWA,MAAO,CACHC,IAAI,CAlWR,SAAcC,CAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACAR,CAAG,CAACW,GAAJ,CAAQV,CAAR,EACAD,CAAG,CAACY,SAAJ,CAAc,YAAd,CAA4BR,CAA5B,EACAJ,CAAG,CAACY,SAAJ,CAAc,OAAd,CAAuBP,CAAvB,EACAL,CAAG,CAACY,SAAJ,CAAc,YAAd,CAA4BN,CAA5B,EACA,GAAIO,CAAAA,CAAG,CAAG,GAAIb,CAAAA,CAAJ,CAAQ,CACdc,UAAU,CAAE,CAAC,IAAD,CAAO,IAAP,CADE,CAEdC,EAAE,CAAE,UAFU,CAGdC,OAAO,CAAE,GAAIf,CAAAA,CAHC,CAIdgB,IAJc,gBAIP,CACH,MAAO,CACHC,OAAO,CAAGV,CAAO,CAACU,OADf,CAEHC,MAAM,CAAGX,CAAO,CAACW,MAFd,CAGHC,MAAM,CAAGZ,CAAO,CAACY,MAHd,CAIHC,QAAQ,CAAGb,CAAO,CAACa,QAJhB,CAKHC,QAAQ,CAAGd,CAAO,CAACc,QALhB,CAMHC,UAAU,CAAGf,CAAO,CAACgB,cANlB,CAOHC,OAAO,GAPJ,CAQHC,MAAM,CAAG,EARN,CASHC,KAAK,CAAGnB,CAAO,CAACmB,KATb,CAWHC,OAAO,CAAEpB,CAAO,CAACoB,OAXd,CAYHC,gBAAgB,CAAE,EAZf,CAaHC,aAAa,CAAE,EAbZ,CAcHC,aAAa,CAAE,EAdZ,CAeHC,MAAM,CAAE,IAfL,CAgBHC,uBAAuB,CAAE,EAhBtB,CAiBHC,6BAA6B,CAAE,EAjB5B,CAmBV,CAxBa,CAyBdC,WAzBc,uBAyBD,CACT,GAAI,KAAKP,OAAL,CAAaQ,QAAb,CAAsBC,MAA1B,CAAkC,CAC9B,KAAKC,uBAAL,GACA,KAAKT,gBAAL,CAAwB,KAAKD,OAAL,CAAaQ,QAAb,CAAsB,CAAtB,CAAxB,CACA,KAAKG,cAAL,CAAoB,KAAKV,gBAAL,CAAsBW,KAA1C,CACH,CACJ,CA/Ba,CAgCdC,OAhCc,mBAgCL,CACLC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CC,KAA3C,CAAiDC,OAAjD,CAA2D,MAA3D,CACAH,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCC,KAAnC,CAAyCC,OAAzC,CAAmD,OACtD,CAnCa,CAoCdC,QAAQ,CAAE,EApCI,CAuCdC,OAAO,CAAG,CACNC,gBADM,4BACY,CAEd,sBACH,CAJK,CAMNV,uBANM,mCAMoB,IAClBW,CAAAA,CAAW,CAAG,GAAIC,CAAAA,GADA,CAElBC,CAAS,CAAG,CAFM,CAGtB,KAAKvB,OAAL,CAAawB,GAAb,CAAiBC,OAAjB,CAAyB,SAAAC,CAAE,CAAI,CAC3BH,CAAS,EAAUG,CAAE,CAACC,OAAtB,CACA,GAAI,CAACN,CAAW,CAACO,GAAZ,CAAgBL,CAAhB,CAAL,CAAiC,CAC7BF,CAAW,CAACQ,GAAZ,CAAgBN,CAAhB,CAA2B,CAACG,CAAD,CAA3B,CACH,CAFD,IAEO,CACHL,CAAW,CAACS,GAAZ,CAAgBP,CAAhB,EAA2BQ,IAA3B,CAAgCL,CAAhC,CACH,CACJ,CAPD,EAQA,KAAK1B,OAAL,CAAagC,QAAb,CAAsBP,OAAtB,CAA8B,SAAAE,CAAO,CAAI,CACrCJ,CAAS,EAAUI,CAAO,CAACJ,SAA3B,CACAI,CAAO,CAACJ,SAAR,CAAoBA,CAApB,CACAI,CAAO,CAACM,OAAR,CAAkBZ,CAAW,CAACS,GAAZ,CAAgBP,CAAhB,CACrB,CAJD,CAKH,CAtBK,CAwBNZ,cAxBM,yBAwBSC,CAxBT,CAwBgB,CAClB,GAAIsB,CAAAA,CAAc,CAAG,EAArB,CACA,KAAKlC,OAAL,CAAaY,KAAb,CAAmBa,OAAnB,CAA2B,SAAAU,CAAI,CAAI,CAC/B,GAAIvB,CAAK,CAACwB,QAAN,CAAeD,CAAI,CAACE,EAApB,CAAJ,CAA6B,CACzBH,CAAc,CAACH,IAAf,CAAoBI,CAApB,CACH,CACJ,CAJD,EAKA,KAAKjC,aAAL,CAAqBgC,CAArB,CACA,KAAK/B,aAAL,CAAqB,KAAKD,aAAL,CAAmB,CAAnB,GAAyB,EAA9C,CAEArB,OAAO,CAACC,GAAR,CAAY,KAAKqB,aAAjB,EACA,KAAKmC,gCAAL,EACH,CApCK,CAsCNC,0BAtCM,sCAsCuB,CACzB,GAAIC,CAAAA,CAAK,GAAT,CACAA,CAAK,CAACA,KAAN,CAAc,CACVC,IAAI,CAAE,KADI,CAEVC,eAAe,CAAE,SAFP,CAAd,CAIAF,CAAK,CAACG,KAAN,CAAc,CACVC,IAAI,CAAE,KAAKtD,OAAL,CAAauD,0BADT,CAAd,CAGAL,CAAK,CAACM,KAAN,CAAc,CACVL,IAAI,CAAE,UADI,CAAd,CAGAD,CAAK,CAACO,KAAN,CAAc,CACVC,aAAa,GADH,CAEVL,KAAK,CAAE,CACHM,OAAO,GADJ,CAEHL,IAAI,CAAE,KAAKtD,OAAL,CAAa4D,cAFhB,CAFG,CAAd,CAOAV,CAAK,CAACW,OAAN,CAAgB,CACZC,SAAS,CAAE,oBAAY,CACnB,GAAIC,CAAAA,CAAW,CAAc,CAAV,OAAKC,CAAN,CAAgBrE,CAAG,CAACK,OAAJ,CAAYiE,YAA5B,CAA2CtE,CAAG,CAACK,OAAJ,CAAYkE,aAAzE,CACA,MAAO,MAAQ,KAAKC,GAAb,CAAmB,QAAnB,CAA8B,KAAKH,CAAnC,CAAuC,GAAvC,CAA6CD,CAA7C,YACMpE,CAAG,CAACK,OAAJ,CAAYoE,eADlB,CACoC,MAC9C,CALW,CAAhB,CAOAlB,CAAK,CAACmB,WAAN,CAAoB,CAChBC,MAAM,CAAE,CACJC,MAAM,CAAE,SADJ,CAEAC,KAAK,CAAE,CACPC,MAAM,CAAE,CACJC,KAAK,CAAE,gBAAY,CACfnF,OAAO,CAACC,GAAR,CAAY,IAAZ,EACAG,CAAG,CAACgF,kBAAJ,CAAuB,KAAKC,CAA5B,CAEH,CALG,CADD,CAFP,CADQ,CAApB,CAcA1B,CAAK,CAAC2B,MAAN,CAAe,CACXlB,OAAO,GADI,CAdf,CAiBAT,CAAK,CAACoB,MAAN,CAAe,CAAC,CACZQ,YAAY,GADA,CAEZ/E,IAAI,CAAE,CACF,CAACgF,IAAI,CAAE,KAAK/E,OAAL,CAAagF,kCAApB,CAAwDhB,CAAC,CAAE,KAAKnD,aAAL,CAAmBqB,GAAnB,CAAuB+C,MAAlF,CADE,CAEF,CAACF,IAAI,CAAE,KAAK/E,OAAL,CAAakF,oCAApB,CAA0DlB,CAAC,CAAE,KAAKnD,aAAL,CAAmBqB,GAAnB,CAAuBiD,QAApF,CAFE,CAGF,CAACJ,IAAI,CAAE,KAAK/E,OAAL,CAAaoF,iCAApB,CAAuDpB,CAAC,CAAE,KAAKnD,aAAL,CAAmBqB,GAAnB,CAAuBmD,KAAjF,CAHE,CAFM,CAAD,CAAf,CAQA,MAAOnC,CAAAA,CACV,CA1FK,CA4FNoC,wBA5FM,oCA4FqB,CACvB,GAAIpC,CAAAA,CAAK,GAAT,CACAA,CAAK,CAACA,KAAN,CAAc,CACVC,IAAI,CAAE,QADI,CAEVC,eAAe,CAAE,SAFP,CAAd,CAIAF,CAAK,CAACG,KAAN,CAAc,CACVC,IAAI,CAAE,KAAKtD,OAAL,CAAauF,wBADT,CAAd,CAGArC,CAAK,CAACM,KAAN,CAAc,CACVgC,UAAU,CAAE,KAAKxE,6BADP,CAEVqC,KAAK,CAAE,CACHC,IAAI,CAAE,IADH,CAFG,CAKVmC,SAAS,GALC,CAAd,CAOAvC,CAAK,CAACO,KAAN,CAAc,CACVC,aAAa,GADH,CAEVL,KAAK,CAAE,CACHC,IAAI,CAAE,KAAKtD,OAAL,CAAa4D,cADhB,CAFG,CAAd,CAMAV,CAAK,CAACW,OAAN,CAAgB,CACZ6B,MAAM,GADM,CAEZD,SAAS,GAFG,CAAhB,CAIAvC,CAAK,CAACmB,WAAN,CAAoB,CAChBC,MAAM,CAAE,CACJC,MAAM,CAAE,SADJ,CAEJC,KAAK,CAAE,CACHC,MAAM,CAAE,CACJC,KAAK,CAAE,gBAAY,CACfnF,OAAO,CAACC,GAAR,CAAY,IAAZ,EACAG,CAAG,CAACgF,kBAAJ,CAAuB,KAAKgB,UAA5B,CAAwC,KAAKf,CAA7C,CAEH,CALG,CADL,CAFH,CADQ,CAApB,CAqBA1B,CAAK,CAACoB,MAAN,CAAe,KAAKvD,uBArBpB,CAsBA,MAAOmC,CAAAA,CACV,CA7IK,CA+INF,gCA/IM,4CA+I6B,YAC3Bf,CAAS,CAAG,CADe,CACZ2D,CAAQ,CAAG,CADC,CACEC,CAAe,CAAG,CADpB,CACuBC,CAAa,CAAG,CADvC,CAE3BnD,CAAO,CAAG,EAFiB,CAEboD,CAAW,CAAG,EAFD,CAEKC,CAAS,CAAG,EAFjB,CAEqBR,CAAU,CAAG,EAFlC,CAG3BS,CAH2B,CAI/B,KAAKvF,OAAL,CAAawF,KAAb,CAAmB/D,OAAnB,CAA2B,SAAAgE,CAAI,CAAI,CAE/BN,CAAe,CAAG,CAAlB,CAAqBC,CAAa,CAAG,CAArC,CACAK,CAAI,CAACzD,QAAL,CAAcP,OAAd,CAAsB,SAAAE,CAAO,CAAI,CAE7BJ,CAAS,EAAUI,CAAO,CAACJ,SAA3B,CACAI,CAAO,CAACJ,SAAR,CAAoBA,CAApB,CAEAU,CAAO,CAAG,CAAI,CAACyD,WAAL,CAAiBnE,CAAjB,CAAV,CACAU,CAAO,CAACR,OAAR,CAAgB,SAAAkE,CAAM,CAAI,CAEtBT,CAAQ,EAAUS,CAAM,CAACtD,EAAzB,CACAsD,CAAM,CAACtD,EAAP,CAAY6C,CAAZ,CAEAK,CAAO,CAAG,CAAI,CAACK,eAAL,CAAqBV,CAArB,CAAV,CAEA,GAAIK,CAAJ,CAAa,CACRA,CAAO,CAACd,QAAT,EAAsBU,CAAe,EAArC,CACCI,CAAO,CAAChB,MAAT,EAAoBa,CAAa,EACpC,CAEJ,CAZD,CAcH,CApBD,EAqBAC,CAAW,CAACtD,IAAZ,CAAiBoD,CAAjB,EACAG,CAAS,CAACvD,IAAV,CAAeqD,CAAf,EACAN,CAAU,CAAC/C,IAAX,WAAmB0D,CAAI,CAACpB,IAAxB,aAAiCoB,CAAI,CAACI,QAAL,CAAgB,CAAjD,EACH,CA3BD,EA6BA,KAAKvF,6BAAL,CAAqCwE,CAArC,CACA,KAAKzE,uBAAL,CAA+B,CAC3B,CAAEgE,IAAI,CAAE,KAAK/E,OAAL,CAAagF,kCAArB,CAAyDjF,IAAI,CAAEiG,CAA/D,CAD2B,CAE3B,CAAEjB,IAAI,CAAE,KAAK/E,OAAL,CAAakF,oCAArB,CAA2DnF,IAAI,CAAEgG,CAAjE,CAF2B,CAIlC,CArLK,CAuLNpB,kBAvLM,6BAuLaxB,CAvLb,CAuLmBgD,CAvLnB,CAuLwB,CAC1B5G,OAAO,CAACC,GAAR,CAAY,CAAC2D,IAAI,CAAJA,CAAD,CAAOgD,IAAI,CAAJA,CAAP,CAAZ,CACH,CAzLK,CA2LNC,WA3LM,sBA2LMnE,CA3LN,CA2LiB,CAGnB,OAFIU,CAAAA,CAAO,CAAG,EAEd,CADID,CAAQ,CAAG,KAAKhC,OAAL,CAAagC,QAC5B,CAAS8D,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG9D,CAAQ,CAACvB,MAA7B,CAAqCqF,CAAC,EAAtC,CAA0C,CACtC,GAAI9D,CAAQ,CAAC8D,CAAD,CAAR,CAAYvE,SAAZ,EAAyBA,CAA7B,CAAwC,CACpCU,CAAO,CAAGD,CAAQ,CAAC8D,CAAD,CAAR,CAAY7D,OAAtB,CACA,KACH,CACJ,CACD,MAAOA,CAAAA,CACV,CArMK,CAuMN2D,eAvMM,0BAuMUV,CAvMV,CAuMoB,CAGtB,OAFIS,CAAAA,CAEJ,CADInE,CAAG,CAAG,KAAKrB,aAAL,CAAmBqB,GAAnB,CAAuBA,GACjC,CAASsE,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGtE,CAAG,CAACf,MAAxB,CAAgCqF,CAAC,EAAjC,CAAqC,CACjCtE,CAAG,CAACsE,CAAD,CAAH,CAAOzD,EAAP,EAAmBb,CAAG,CAACsE,CAAD,CAAH,CAAOzD,EAA1B,CACA,GAAIb,CAAG,CAACsE,CAAD,CAAH,CAAOzD,EAAP,EAAa6C,CAAjB,CAA2B,CACvBS,CAAM,CAAGnE,CAAG,CAACsE,CAAD,CAAZ,CACA,KACH,CACJ,CACD,MAAOH,CAAAA,CACV,CAlNK,CAoNNI,mBApNM,8BAoNcN,CApNd,CAoNmB,YACrB,KAAK5F,OAAL,IACA,KAAKC,MAAL,CAAc,EAAd,CACA,GAAIT,CAAAA,CAAI,CAAG,CACP2G,MAAM,CAAG,MADF,CAEPxG,MAAM,CAAG,KAAKA,MAFP,CAGPC,QAAQ,CAAG,KAAKA,QAHT,CAIPwG,QAAQ,CAAGR,CAAI,CAACQ,QAJT,CAKPC,OAAO,CAAG,KAAKvG,UALR,CAAX,CAOArB,CAAK,CAAC,CACF6H,MAAM,CAAC,KADL,CAEFC,GAAG,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,8BAFnB,CAGFC,MAAM,CAAGnH,CAHP,CAAD,CAAL,CAIGoH,IAJH,CAIQ,SAACC,CAAD,CAAc,CAClB,GAAuB,GAAnB,EAAAA,CAAQ,CAACC,MAAT,EAA0BD,CAAQ,CAACrH,IAAT,CAAcuH,EAA5C,CAAgD,CAC5C,CAAI,CAACC,aAAL,CAAqBH,CAAQ,CAACrH,IAAT,CAAcA,IAAd,CAAmBwH,aAC3C,CAFD,IAEO,CACH,CAAI,CAACC,cAAL,CAAoB/E,IAApB,CAAyB,CAAI,CAACzC,OAAL,CAAayH,aAAtC,CACH,CACJ,CAVD,EAUGC,KAVH,CAUS,UAAO,CACZ,CAAI,CAAClH,MAAL,CAAYiC,IAAZ,CAAiB,CAAI,CAACzC,OAAL,CAAa2H,iBAA9B,CACH,CAZD,EAYGC,OAZH,CAYW,UAAM,CACb,CAAI,CAACrH,OAAL,GACH,CAdD,EAeA,MAAO,MAAKR,IACf,CA9OK,CAgPN8H,aAhPM,yBAgPS,CACX,GAAIC,CAAAA,CAAO,CAAG,CACV,CAAExE,IAAI,CAAE,EAAR,CAAYyE,KAAK,CAAG,IAApB,CAA0BC,KAAK,CAAG,QAAlC,CAA4CC,QAAQ,GAApD,CADU,CAEV,CAAE3E,IAAI,CAAE,KAAKtD,OAAL,CAAakI,UAArB,CAAkCH,KAAK,CAAG,WAA1C,CAFU,CAGV,CAAEzE,IAAI,CAAE,KAAKtD,OAAL,CAAamI,cAArB,CAAsCJ,KAAK,CAAG,UAA9C,CAHU,CAIV,CAAEzE,IAAI,CAAE,KAAKtD,OAAL,CAAaoI,cAArB,CAAsCL,KAAK,CAAG,qBAA9C,CAJU,CAAd,CAMA,MAAOD,CAAAA,CACV,CAxPK,CA0PNO,WA1PM,sBA0PMxF,CA1PN,CA0PY,CACd,KAAKhC,aAAL,CAAqBgC,CAArB,CACA,KAAKG,gCAAL,EACH,CA7PK,CA+PNsF,eA/PM,0BA+PUpI,CA/PV,CA+PiB,CACnB,gBAAU6G,CAAC,CAACC,GAAF,CAAMC,OAAhB,gCAA8C/G,CAA9C,WACH,CAjQK,CAmQNqI,iBAnQM,6BAmQa,CACf,gBAAU,KAAK1H,aAAL,CAAmB2H,SAA7B,aAA0C,KAAK3H,aAAL,CAAmB4H,QAA7D,CACH,CArQK,CAuQNC,YAvQM,wBAuQQ,CACV,iBAAW,KAAK7H,aAAL,CAAmB8H,QAA9B,CACH,CAzQK,CA2QNC,WA3QM,uBA2QS,IACP7F,CAAAA,CAAE,CAAG,KAAKlC,aAAL,CAAmBkC,EADjB,CAEP+D,CAAG,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,oBAAhB,CAAqClE,CAArC,CAAwC,UAAxC,CAAmDpD,CAAG,CAACQ,QAFtD,CAGX0I,MAAM,CAACC,IAAP,CAAYhC,CAAZ,CACH,CA/QK,CAiRNiC,oBAjRM,gCAiRgB,IACd9E,CAAAA,CAAY,CAAG,KAAKjE,OAAL,CAAakE,aADd,CAEd8E,CAAc,CAAG,KAAKhJ,OAAL,CAAaiJ,eAFhB,CAGlB,GAAuC,CAAnC,OAAKpI,aAAL,CAAmBqB,GAAnB,CAAuBiD,QAA3B,CAA0C,CACtClB,CAAY,CAAG,KAAKjE,OAAL,CAAaiE,YAA5B,CACA+E,CAAc,CAAG,KAAKhJ,OAAL,CAAagJ,cACjC,CACD,gBAAU,KAAKnI,aAAL,CAAmBqB,GAAnB,CAAuBiD,QAAjC,aAA6ClB,CAA7C,aAA6D+E,CAA7D,aAA+E,KAAKhJ,OAAL,CAAakJ,WAA5F,aAA2G,KAAKxI,OAAL,CAAayI,SAAxH,CACH,CAzRK,CA2RNC,uBA3RM,mCA2RoB,CACtB,gBAAU,KAAKvI,aAAL,CAAmBwI,mBAA7B,MACH,CA7RK,CA+RNC,iBA/RM,6BA+Rc,CAChB,GAAIC,CAAAA,CAAK,CAAG,KAAK1I,aAAL,CAAmB2I,WAA/B,CACAD,CAAK,CAACE,UAAN,EAA0BF,CAAK,CAACE,UAAhC,CACAF,CAAK,CAACG,QAAN,EAAwBH,CAAK,CAACG,QAA9B,CAHgB,GAIZC,CAAAA,CAAa,CAAG,KAAKC,KAAL,CAAWL,CAAK,CAACE,UAAjB,EAA+BF,CAAK,CAACE,UAArC,CAAkDF,CAAK,CAACE,UAAN,CAAiBI,OAAjB,CAAyB,CAAzB,CAJtD,CAKZC,CAAS,CAAG,KAAKF,KAAL,CAAWL,CAAK,CAACG,QAAjB,EAA6BH,CAAK,CAACG,QAAnC,CAA8CH,CAAK,CAACG,QAAN,CAAeG,OAAf,CAAuB,CAAvB,CAL9C,CAMhB,gBAAUF,CAAV,aAA2BG,CAA3B,CACH,CAtSK,CAwSNF,KAxSM,gBAwSAG,CAxSA,CAwSG,CACL,MAAiB,EAAV,EAAAA,CAAC,CAAG,CACd,CA1SK,CA4SNC,YA5SM,wBA4SQ,CACV,GAAIC,CAAAA,CAAW,WAAM,KAAKjK,OAAL,CAAakK,kBAAnB,aAAyC,KAAK9J,QAA9C,CAAf,CACA,MAAO6J,CAAAA,CACV,CA/SK,CAvCI,CAAR,CAyVb,CAEM,CAGV,CA/WC,CAAN","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartdynamic\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, Pagination, ChartDynamic, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            console.log(content);\r\n            Vue.use(Vuetify)\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', ChartDynamic);\r\n            Vue.component('pageheader', Pageheader);\r\n            let vue = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#dropout\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings : content.strings,\r\n                        groups : content.groups,\r\n                        userid : content.userid,\r\n                        courseid : content.courseid,\r\n                        timezone : content.timezone,\r\n                        render_has : content.profile_render,\r\n                        loading : false,\r\n                        errors : [],\r\n                        pages : content.pages,\r\n\r\n                        dropout: content.dropout,\r\n                        selected_cluster: [],\r\n                        cluster_users: [],\r\n                        selected_user: {},\r\n                        search: null,\r\n                        week_modules_chart_data: [],\r\n                        week_modules_chart_categories: [],\r\n                    }\r\n                },\r\n                beforeMount(){\r\n                    if (this.dropout.clusters.length) {\r\n                        this.set_modules_in_sections();\r\n                        this.selected_cluster = this.dropout.clusters[0];\r\n                        this.change_cluster(this.selected_cluster.users);\r\n                    };\r\n                },\r\n                mounted(){\r\n                    document.querySelector(\"#sessions-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#dropout\").style.display = \"block\";\r\n                },\r\n                computed :{\r\n\r\n                },\r\n                methods : {\r\n                    get_help_content(){\r\n                        let helpcontents = `Texto de Ayuda`;\r\n                        return helpcontents;\r\n                    },\r\n\r\n                    set_modules_in_sections() {\r\n                        let sectionsMap = new Map();\r\n                        let sectionid = 0;\r\n                        this.dropout.cms.forEach(cm => {\r\n                            sectionid = Number(cm.section);\r\n                            if (!sectionsMap.has(sectionid)) {\r\n                                sectionsMap.set(sectionid, [cm]);\r\n                            } else {\r\n                                sectionsMap.get(sectionid).push(cm);\r\n                            }\r\n                        });\r\n                        this.dropout.sections.forEach(section => {\r\n                            sectionid = Number(section.sectionid);\r\n                            section.sectionid = sectionid;\r\n                            section.modules = sectionsMap.get(sectionid);\r\n                        });\r\n                    },\r\n\r\n                    change_cluster(users) {\r\n                        let selected_users = [];\r\n                        this.dropout.users.forEach(user => {\r\n                            if (users.includes(user.id)) {\r\n                                selected_users.push(user);\r\n                            }\r\n                        });\r\n                        this.cluster_users = selected_users;\r\n                        this.selected_user = this.cluster_users[0] || {};\r\n                        // console.log(this.cluster_users);\r\n                        console.log(this.selected_user);\r\n                        this.calculate_modules_access_by_week();\r\n                    },\r\n\r\n                    build_modules_access_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'bar',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.modules_access_chart_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            type: 'category',\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                enabled: true,\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            formatter: function () {\r\n                                let module_text = (this.y == 1) ? vue.strings.module_label : vue.strings.modules_label;\r\n                                return '<b>' + this.key + '</b>: ' + this.y + ' ' + module_text + '<br/>'\r\n                                    + '<i>'+ vue.strings.modules_details + '<i/>';\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                    point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            console.log(this);\r\n                                            vue.open_modules_modal(this.x);\r\n                                            // alert('Category: ' + this.category + ', value: ' + this.y);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                        chart.legend = {\r\n                            enabled: false\r\n                        };\r\n                        chart.series = [{\r\n                            colorByPoint: true,\r\n                            data: [\r\n                                {name: this.strings.modules_access_chart_series_viewed, y: this.selected_user.cms.viewed},\r\n                                {name: this.strings.modules_access_chart_series_complete, y: this.selected_user.cms.complete},\r\n                                {name: this.strings.modules_access_chart_series_total, y: this.selected_user.cms.total}\r\n                            ]\r\n                        }];\r\n                        return chart;\r\n                    },\r\n\r\n                    build_week_modules_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'column',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.week_modules_chart_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            categories: this.week_modules_chart_categories,\r\n                            title: {\r\n                                text: null\r\n                            },\r\n                            crosshair: true\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            crosshair: true,\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            console.log(this);\r\n                                            vue.open_modules_modal(this.colorIndex, this.x);\r\n                                            // alert('Category: ' + this.category + ', value: ' + this.y);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                        // chart.tooltip = {\r\n                        //     formatter: function () {\r\n                        //         let module_text = (this.y == 1) ? vue.strings.module_label : vue.strings.modules_label;\r\n                        //         return '<b>' + this.key + '</b>: ' + this.y + ' ' + module_text + '<br/>'\r\n                        //             + '<i>'+ vue.strings.modules_details + '<i/>';\r\n                        //     }\r\n                        // };\r\n                        chart.series = this.week_modules_chart_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    calculate_modules_access_by_week() {\r\n                        let sectionid = 0, moduleid = 0, weekcompletecms = 0, weekviewedcms = 0;\r\n                        let modules = [], completecms = [], viewedcms = [], categories = [];\r\n                        let user_cm;\r\n                        this.dropout.weeks.forEach(week => {\r\n                            // console.log({week});\r\n                            weekcompletecms = 0, weekviewedcms = 0;\r\n                            week.sections.forEach(section => {\r\n                                // console.log({section});\r\n                                sectionid = Number(section.sectionid);\r\n                                section.sectionid = sectionid;\r\n\r\n                                modules = this.get_section(sectionid);\r\n                                modules.forEach(module => {\r\n                                    // console.log({module});\r\n                                    moduleid = Number(module.id);\r\n                                    module.id = moduleid;\r\n\r\n                                    user_cm = this.get_user_module(moduleid);\r\n                                    // console.log(user_cm);\r\n                                    if (user_cm) {\r\n                                        (user_cm.complete) && weekcompletecms++;\r\n                                        (user_cm.viewed) && weekviewedcms++;\r\n                                    }\r\n\r\n                                });\r\n\r\n                            });\r\n                            completecms.push(weekcompletecms);\r\n                            viewedcms.push(weekviewedcms);\r\n                            categories.push(`${week.name} ${(week.position + 1)}`);\r\n                        });\r\n                        // console.log({completecms, viewedcms});\r\n                        this.week_modules_chart_categories = categories;\r\n                        this.week_modules_chart_data = [\r\n                            { name: this.strings.modules_access_chart_series_viewed, data: viewedcms },\r\n                            { name: this.strings.modules_access_chart_series_complete, data: completecms }\r\n                        ];\r\n                    },\r\n\r\n                    open_modules_modal(type, week){\r\n                        console.log({type, week});\r\n                    },\r\n\r\n                    get_section(sectionid) {\r\n                        let modules = [];\r\n                        let sections = this.dropout.sections;\r\n                        for (let i = 0; i < sections.length; i++) {\r\n                            if (sections[i].sectionid == sectionid) {\r\n                                modules = sections[i].modules;\r\n                                break;\r\n                            }\r\n                        }\r\n                        return modules;\r\n                    },\r\n\r\n                    get_user_module(moduleid) {\r\n                        let module;\r\n                        let cms = this.selected_user.cms.cms;\r\n                        for (let i = 0; i < cms.length; i++) {\r\n                            cms[i].id = Number(cms[i].id);\r\n                            if (cms[i].id == moduleid) {\r\n                                module = cms[i];\r\n                                break;\r\n                            }\r\n                        }\r\n                        return module;\r\n                    },\r\n\r\n                    update_interactions(week){\r\n                        this.loading = true;\r\n                        this.errors = [];\r\n                        let data = {\r\n                            action : \"time\",\r\n                            userid : this.userid,\r\n                            courseid : this.courseid,\r\n                            weekcode : week.weekcode,\r\n                            profile : this.render_has,\r\n                        }\r\n                        Axios({\r\n                            method:'get',\r\n                            url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                            params : data,\r\n                        }).then((response) => {\r\n                            if (response.status == 200 && response.data.ok) {\r\n                                this.inverted_time = response.data.data.inverted_time;\r\n                            } else {\r\n                                this.error_messages.push(this.strings.error_network);\r\n                            }\r\n                        }).catch((e) => {\r\n                            this.errors.push(this.strings.api_error_network);\r\n                        }).finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                        return this.data;\r\n                    },\r\n\r\n                    table_headers(){\r\n                        let headers = [\r\n                            { text: '', value : 'id', align : 'center', sortable : false},\r\n                            { text: this.strings.thead_name , value : 'firstname'},\r\n                            { text: this.strings.thead_lastname , value : 'lastname'},\r\n                            { text: this.strings.thead_progress , value : 'progress_percentage'},\r\n                        ];\r\n                        return headers;\r\n                    },\r\n\r\n                    change_user(user) {\r\n                        this.selected_user = user;\r\n                        this.calculate_modules_access_by_week();\r\n                    },\r\n\r\n                    get_picture_url(userid){\r\n                        return `${M.cfg.wwwroot}/user/pix.php?file=/${userid}/f1.jpg`;\r\n                    },\r\n\r\n                    get_user_fullname(){\r\n                        return `${this.selected_user.firstname} ${this.selected_user.lastname}`;\r\n                    },\r\n\r\n                    get_username(){\r\n                        return `@${this.selected_user.username}`;\r\n                    },\r\n\r\n                    see_profile () {\r\n                        let id = this.selected_user.id;\r\n                        let url = M.cfg.wwwroot + '/user/view.php?id='+id+'&course='+vue.courseid;\r\n                        window.open(url);\r\n                    },\r\n\r\n                    get_progress_message(){\r\n                        let module_label = this.strings.modules_label;\r\n                        let finished_label = this.strings.finisheds_label;\r\n                        if (this.selected_user.cms.complete == 1) {\r\n                            module_label = this.strings.module_label;\r\n                            finished_label = this.strings.finished_label;\r\n                        }\r\n                        return `${this.selected_user.cms.complete} ${module_label} ${finished_label} ${this.strings.of_conector} ${this.dropout.total_cms}`;\r\n                    },\r\n\r\n                    get_progress_percentage() {\r\n                        return `${this.selected_user.progress_percentage} %`;\r\n                    },\r\n\r\n                    get_student_grade() {\r\n                        let grade = this.selected_user.coursegrade;\r\n                        grade.finalgrade = Number(grade.finalgrade);\r\n                        grade.maxgrade = Number(grade.maxgrade);\r\n                        let student_grade = this.isInt(grade.finalgrade) ? grade.finalgrade : grade.finalgrade.toFixed(2);\r\n                        let max_grade = this.isInt(grade.maxgrade) ? grade.maxgrade : grade.maxgrade.toFixed(2);\r\n                        return `${student_grade}/${max_grade}`;\r\n                    },\r\n\r\n                    isInt(n) {\r\n                        return n % 1 === 0;\r\n                    },\r\n\r\n                    get_timezone(){\r\n                        let information = `${this.strings.ss_change_timezone} ${this.timezone}`\r\n                        return information;\r\n                    },\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init : init\r\n        };\r\n    });"],"file":"dropout.min.js"}