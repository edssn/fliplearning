{"version":3,"sources":["../src/dropout.js"],"names":["define","Vue","Vuetify","Axios","Moment","MomentTimezone","Pagination","ChartDynamic","PageHeader","EmailForm","ModulesForm","HelpDialog","init","content","use","component","vue","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","dropout","modules_access_colors","week_modules_colors","sessions_evolution_colors","user_grades_colors","selected_cluster","cluster_users","selected_user","search","week_modules_chart_data","week_modules_chart_categories","selected_sections","sessions_evolution_data","user_grades_categories","user_grades_data","modules_dialog","email_users","email_dialog","modulename","moduleid","email_strings","emailComponent","emailTarget","help_dialog","help_contents","pluginSectionName","students_group_selector","modules_access_chart","week_modules_chart","sessions_evolution_chart","user_grades_chart","beforeMount","clusters","length","set_modules_in_sections","change_cluster","users","mounted","document","querySelector","style","display","computed","methods","get_help_content","contents","title","section_help_title","description","section_help_description","sectionsMap","Map","sectionid","cms","forEach","cm","section","has","set","get","push","sections","modules","saveInteraction","selected_users","user","includes","id","change_user","calculate_week_modules_access","calculate_sessions_evolution","calculate_user_grades","weekcompletecms","weekviewedcms","completecms","viewedcms","categories","user_cm","weeks","week","sections_modules","module","complete","viewed","name","position","modules_access_chart_series_viewed","modules_access_chart_series_complete","sessions_data","time_data","sumtime","sumsessions","time","timestamp","sessions","session","start","duration","x","y","sessions_evolution_chart_legend1","yAxis","sessions_evolution_chart_legend2","course_grades","user_grades","user_grade","user_name","firstname","gradeitems","item","finalgrade","grademax","itemname","average_percentage","user_grades_chart_legend","build_modules_access_chart","chart","type","backgroundColor","fontFamily","text","colors","xAxis","allowDecimals","enabled","modules_amount","tooltip","shared","useHTML","formatter","module_text","capitalizeFirstLetter","modules_label","points","key","color","modules_details","plotOptions","series","cursor","point","events","click","open_modules_modal","legend","colorByPoint","modules_access_chart_series_total","total","build_week_modules_chart","crosshair","text1","text2","viewed_series_name","completed_series_name","colorIndex","build_sessions_evolution_chart","zoomType","sessions_evolution_chart_xaxis1","sessions_evolution_chart_xaxis2","opposite","date_label","calculate_timezone_date_string","get_sessions_evolution_tooltip","build_user_grades_chart","max","labels","format","user_grades_chart_yaxis","header","footer","user_grades_chart_view_activity","body","gradecount","user_grades_chart_tooltip_no_graded","get_user_grades_tooltip","url","M","cfg","wwwroot","itemmodule","coursemoduleid","window","open","sessions_prefix","time_prefix","convert_time","serie_name","average","isInt","toFixed","dat","weekday","monthday","month","tz","zone","day","date","Intl","DateTimeFormat","resolvedOptions","timeZone","Date","getDay","getDate","getMonth","getHours","getMinutes","getSeconds","weekdays","shortMonths","h","hours_short","m","minutes_short","s","seconds_short","hours","Math","floor","minutes","seconds","weekposition","Number","isInteger","interactions","i","get_user_module","table_headers","headers","value","align","sortable","thead_name","thead_lastname","thead_progress","get_picture_url","get_user_fullname","lastname","get_username","username","see_profile","get_progress_message","finished_label","finished_resources","of_conector","get_progress_percentage","progress_percentage","get_student_grade","grade","coursegrade","maxgrade","student_grade","max_grade","get_sendmail_user_text","send_mail_to_user","sendmail","subject","subject_prefix","update_email_dialog","update_modules_dialog","n","string","charAt","toUpperCase","slice","generate_dropout_data","action","profile","method","params","then","response","status","ok","location","reload","error_messages","error_network","catch","api_error_network","finally","openChartHelp","group_students_help_title","group_students_help_description_p1","group_students_help_description_p2","modules_access_help_title","modules_access_help_description_p1","modules_access_help_description_p2","modules_access_help_description_p3","week_modules_help_title","week_modules_help_description_p1","week_modules_help_description_p2","week_modules_help_description_p3","sessions_evolution_help_title","sessions_evolution_help_description_p1","sessions_evolution_help_description_p2","sessions_evolution_help_description_p3","user_grades_help_title","user_grades_help_description_p1","user_grades_help_description_p2","user_grades_help_description_p3","interaction","target","interactiontype","pluginsection","href","update_help_dialog","get_timezone","information","change_timezone"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/momenttimezone\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartdynamic\",\r\n        \"local_fliplearning/pageheader\",\r\n        \"local_fliplearning/emailform\",\r\n        \"local_fliplearning/modulesform\",\r\n        \"local_fliplearning/helpdialog\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, MomentTimezone, Pagination, ChartDynamic, PageHeader, EmailForm, ModulesForm, HelpDialog) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            // console.logs(content);\r\n            Vue.use(Vuetify);\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', ChartDynamic);\r\n            Vue.component('pageheader', PageHeader);\r\n            Vue.component('emailform', EmailForm);\r\n            Vue.component('modulesform', ModulesForm);\r\n            Vue.component('helpdialog', HelpDialog);\r\n            let vue = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#teacher_dropout\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings: content.strings,\r\n                        groups: content.groups,\r\n                        userid: content.userid,\r\n                        courseid: content.courseid,\r\n                        timezone: content.timezone,\r\n                        render_has: content.profile_render,\r\n                        loading: false,\r\n                        errors: [],\r\n                        pages: content.pages,\r\n\r\n                        dropout: content.dropout,\r\n                        modules_access_colors: content.modules_access_colors,\r\n                        week_modules_colors: content.week_modules_colors,\r\n                        sessions_evolution_colors: content.sessions_evolution_colors,\r\n                        user_grades_colors: content.user_grades_colors,\r\n                        selected_cluster: [],\r\n                        cluster_users: [],\r\n                        selected_user: null,\r\n                        search: null,\r\n                        week_modules_chart_data: [],\r\n                        week_modules_chart_categories: [],\r\n                        selected_sections: [],\r\n                        sessions_evolution_data: [],\r\n                        user_grades_categories: [],\r\n                        user_grades_data: [],\r\n                        modules_dialog: false,\r\n\r\n                        email_users: [],\r\n                        email_dialog: false,\r\n                        modulename: \"\",\r\n                        moduleid: false,\r\n                        email_strings: content.strings.email_strings,\r\n                        emailComponent: \"\",\r\n                        emailTarget: \"\",\r\n\r\n                        help_dialog: false,\r\n                        help_contents: [],\r\n\r\n                        pluginSectionName: \"teacher_dropout\",\r\n                        students_group_selector: \"students_group_selector\",\r\n                        modules_access_chart: \"modules_access_chart\",\r\n                        week_modules_chart: \"week_modules_chart\",\r\n                        sessions_evolution_chart: \"sessions_evolution_chart\",\r\n                        user_grades_chart: \"user_grades_chart\",\r\n                    }\r\n                },\r\n                beforeMount() {\r\n                    if (this.dropout.clusters.length) {\r\n                        this.set_modules_in_sections();\r\n                        this.selected_cluster = this.dropout.clusters[0];\r\n                        this.change_cluster(this.selected_cluster.users);\r\n                    };\r\n                },\r\n                mounted() {\r\n                    document.querySelector(\"#teacher_dropout_loader\").style.display = \"none\";\r\n                    document.querySelector(\"#teacher_dropout\").style.display = \"block\";\r\n                },\r\n                computed: {\r\n\r\n                },\r\n                methods: {\r\n                    get_help_content() {\r\n                        let contents = [];\r\n                        contents.push({\r\n                            title: this.strings.section_help_title,\r\n                            description: this.strings.section_help_description,\r\n                        });\r\n                        return contents;\r\n                    },\r\n\r\n                    set_modules_in_sections() {\r\n                        let sectionsMap = new Map();\r\n                        let sectionid = 0,\r\n                            modules = [];\r\n                        this.dropout.cms.forEach(cm => {\r\n                            sectionid = Number(cm.section);\r\n                            if (!sectionsMap.has(sectionid)) {\r\n                                sectionsMap.set(sectionid, [cm]);\r\n                            } else {\r\n                                sectionsMap.get(sectionid).push(cm);\r\n                            }\r\n                        });\r\n                        this.dropout.sections.forEach(section => {\r\n                            sectionid = Number(section.sectionid);\r\n                            section.sectionid = sectionid;\r\n                            section.modules = (sectionsMap.has(sectionid)) ? sectionsMap.get(sectionid) : [];\r\n                        });\r\n                    },\r\n\r\n                    change_cluster(users) {\r\n                        this.saveInteraction (this.students_group_selector, \"selected\", \"group\", 14);\r\n\r\n                        let selected_users = [];\r\n                        this.dropout.users.forEach(user => {\r\n                            if (users.includes(user.id)) {\r\n                                selected_users.push(user);\r\n                            }\r\n                        });\r\n                        if (selected_users.length) {\r\n                            this.cluster_users = selected_users;\r\n                            let user = this.cluster_users[0];\r\n                            this.change_user(user);\r\n                        } else {\r\n                            this.cluster_users = [];\r\n                            this.selected_user = null;\r\n                        }\r\n                    },\r\n\r\n                    change_user(user) {\r\n                        this.selected_user = user;\r\n                        this.calculate_week_modules_access();\r\n                        this.calculate_sessions_evolution();\r\n                        this.calculate_user_grades();\r\n\r\n                        this.saveInteraction (\"students_table\", \"selected\", \"user\", 15);\r\n                    },\r\n\r\n                    calculate_week_modules_access() {\r\n                        let sectionid = 0,\r\n                            moduleid = 0,\r\n                            weekcompletecms = 0,\r\n                            weekviewedcms = 0;\r\n                        let modules = [],\r\n                            completecms = [],\r\n                            viewedcms = [],\r\n                            categories = [];\r\n                        let user_cm;\r\n                        this.dropout.weeks.forEach(week => {\r\n                            weekcompletecms = 0, weekviewedcms = 0;\r\n                            week.sections.forEach(section => {\r\n                                sectionid = Number(section.sectionid);\r\n                                section.sectionid = sectionid;\r\n\r\n                                modules = this.sections_modules(sectionid);\r\n                                modules.forEach(module => {\r\n                                    moduleid = Number(module.id);\r\n                                    module.id = moduleid;\r\n\r\n                                    user_cm = this.selected_user.cms.modules[`cm${module.id}`];\r\n                                    if (user_cm) {\r\n                                        (user_cm.complete) && weekcompletecms++;\r\n                                        (user_cm.viewed) && weekviewedcms++;\r\n                                    }\r\n                                });\r\n                            });\r\n                            completecms.push(weekcompletecms);\r\n                            viewedcms.push(weekviewedcms);\r\n                            categories.push(`${week.name} ${(week.position + 1)}`);\r\n                        });\r\n                        this.week_modules_chart_categories = categories;\r\n                        this.week_modules_chart_data = [\r\n                            { name: this.strings.modules_access_chart_series_viewed, data: viewedcms },\r\n                            { name: this.strings.modules_access_chart_series_complete, data: completecms }\r\n                        ];\r\n                    },\r\n\r\n                    calculate_sessions_evolution() {\r\n                        let sessions_data = [],\r\n                            time_data = [];\r\n                        let sumtime = 0,\r\n                            sumsessions = 0,\r\n                            time = 0,\r\n                            timestamp = 0;\r\n                        this.selected_user.sessions.forEach(session => {\r\n                            timestamp = Number(session.start) * 1000;\r\n                            time = (Number(session.duration)) / 60;\r\n                            sumtime += time;\r\n                            sumsessions++;\r\n                            sessions_data.push({ x: timestamp, y: sumsessions });\r\n                            time_data.push({ x: timestamp, y: sumtime });\r\n                        });\r\n                        this.sessions_evolution_data = [\r\n                            { name: this.strings.sessions_evolution_chart_legend1, yAxis: 0, data: sessions_data },\r\n                            { name: this.strings.sessions_evolution_chart_legend2, yAxis: 1, data: time_data },\r\n                        ];\r\n                    },\r\n\r\n                    calculate_user_grades() {\r\n                        let categories = [],\r\n                            course_grades = [],\r\n                            user_grades = [];\r\n                        let user_grade = 0,\r\n                            user_name = this.selected_user.firstname;\r\n                        if (this.selected_user.gradeitems) {\r\n                            this.selected_user.gradeitems.forEach(item => {\r\n                                user_grade = (Number(item.finalgrade) * 100) / Number(item.grademax);\r\n                                categories.push(item.itemname);\r\n                                course_grades.push(item.average_percentage);\r\n                                user_grades.push(user_grade);\r\n                            });\r\n                            this.user_grades_data = [\r\n                                { name: user_name, data: user_grades },\r\n                                { name: this.strings.user_grades_chart_legend, data: course_grades },\r\n                            ];\r\n                            this.user_grades_categories = categories;\r\n                        }\r\n                    },\r\n\r\n                    build_modules_access_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'bar',\r\n                            backgroundColor: null,\r\n                            style: { fontFamily: 'poppins' },\r\n                        };\r\n                        chart.title = { text: null };\r\n                        chart.colors = this.modules_access_colors;\r\n                        chart.xAxis = {\r\n                            type: 'category',\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                enabled: true,\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function() {\r\n                                let module_text = vue.capitalizeFirstLetter(vue.strings.modules_label);\r\n                                return '<small>' + this.points[0].key + ' </small><br/>' +\r\n                                    '<b style=\"color: ' + this.points[0].color + ';\">• </b>' +\r\n                                    '<b>' + module_text + '</b>: ' + this.y + '<br/>' +\r\n                                    '<small>' + vue.strings.modules_details + '</small>';\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                                series: {\r\n                                    cursor: 'pointer',\r\n                                    point: {\r\n                                        events: {\r\n                                            click: function() {\r\n                                                vue.open_modules_modal(this.x);\r\n\r\n                                                vue.saveInteraction (\r\n                                                    vue.modules_access_chart,\r\n                                                    \"viewed\",\r\n                                                    \"resources_details_dialog\",\r\n                                                    18\r\n                                                );\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            },\r\n                            chart.legend = {\r\n                                enabled: false\r\n                            };\r\n                        chart.series = [{\r\n                            colorByPoint: true,\r\n                            data: [\r\n                                { name: this.strings.modules_access_chart_series_viewed, y: this.selected_user.cms.viewed },\r\n                                { name: this.strings.modules_access_chart_series_complete, y: this.selected_user.cms.complete },\r\n                                { name: this.strings.modules_access_chart_series_total, y: this.selected_user.cms.total }\r\n                            ]\r\n                        }];\r\n                        return chart;\r\n                    },\r\n\r\n                    build_week_modules_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'column',\r\n                            backgroundColor: null,\r\n                            style: { fontFamily: 'poppins' },\r\n                        };\r\n                        chart.title = { text: null };\r\n                        chart.colors = this.week_modules_colors;\r\n                        chart.xAxis = {\r\n                            categories: this.week_modules_chart_categories,\r\n                            title: {\r\n                                text: null\r\n                            },\r\n                            crosshair: true\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function() {\r\n                                let text1 = '',\r\n                                    text2 = '';\r\n                                if (this.points[0]) {\r\n                                    let viewed_series_name = this.points[0].series.name;\r\n                                    text1 = `<b style=\"color: ${this.points[0].color};\">• </b>\r\n                                            <b>${viewed_series_name}: </b>${this.points[0].y}<br/>`;\r\n                                }\r\n                                if (this.points[1]) {\r\n                                    let completed_series_name = this.points[1].series.name;\r\n                                    text2 = `<b style=\"color: ${this.points[1].color};\">• </b>\r\n                                            <b>${completed_series_name}: </b>${this.points[1].y}<br/>`;\r\n                                }\r\n                                return `<small>${this.x}</small><br/> ${text1}${text2} \r\n                                        <small>${vue.strings.modules_details}</small>`;\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                point: {\r\n                                    events: {\r\n                                        click: function() {\r\n                                            vue.open_modules_modal(this.colorIndex, this.x);\r\n\r\n                                            vue.saveInteraction (\r\n                                                vue.week_modules_chart,\r\n                                                \"viewed\",\r\n                                                \"week_resources_details_dialog\",\r\n                                                18\r\n                                            );\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        chart.series = this.week_modules_chart_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    build_sessions_evolution_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            zoomType: 'x',\r\n                            backgroundColor: null,\r\n                            style: { fontFamily: 'poppins' },\r\n                        };\r\n                        chart.title = { text: null };\r\n                        chart.colors = this.sessions_evolution_colors;\r\n                        chart.xAxis = {\r\n                            type: 'datetime'\r\n                        };\r\n                        chart.yAxis = [{\r\n                            allowDecimals: false,\r\n                            title: { text: this.strings.sessions_evolution_chart_xaxis1 }\r\n                        }, {\r\n                            title: { text: this.strings.sessions_evolution_chart_xaxis2 },\r\n                            opposite: true\r\n                        }];\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function() {\r\n                                let date_label = vue.calculate_timezone_date_string(this.x);\r\n                                let text1 = (this.points[0]) ? vue.get_sessions_evolution_tooltip(this.points[0]) : '';\r\n                                let text2 = (this.points[1]) ? vue.get_sessions_evolution_tooltip(this.points[1]) : '';\r\n                                return `<small>${date_label}</small><br/>${text1}${text2}`;\r\n                            }\r\n                        };\r\n                        chart.series = this.sessions_evolution_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    build_user_grades_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'column',\r\n                            backgroundColor: null,\r\n                            style: { fontFamily: 'poppins' },\r\n                        };\r\n                        chart.title = { text: null };\r\n                        chart.colors = this.user_grades_colors;\r\n                        chart.xAxis = {\r\n                            crosshair: true,\r\n                            categories: this.user_grades_categories,\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            max: 100,\r\n                            labels: {\r\n                                format: '{value} %',\r\n                            },\r\n                            title: { text: this.strings.user_grades_chart_yaxis }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function() {\r\n                                let itemname = this.x;\r\n                                let position = this.points[0].point.x;\r\n                                let item = vue.selected_user.gradeitems[position];\r\n                                let header = `<small>${itemname}</small><br/>`;\r\n                                let footer = `<small>(${vue.strings.user_grades_chart_view_activity})</small><br/>`;\r\n                                let body = '';\r\n                                if (item.gradecount == 0) {\r\n                                    body = vue.strings.user_grades_chart_tooltip_no_graded;\r\n                                } else {\r\n                                    let text1 = (this.points[0]) ? vue.get_user_grades_tooltip(this.points[0], item) : '';\r\n                                    let text2 = (this.points[1]) ? vue.get_user_grades_tooltip(this.points[1], item) : '';\r\n                                    body = `${text1}${text2}${footer}`;\r\n                                }\r\n                                return `${header}${body}`;\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                point: {\r\n                                    events: {\r\n                                        click: function() {\r\n                                            let position = this.x;\r\n                                            let item = vue.selected_user.gradeitems[position];\r\n                                            let url = `${M.cfg.wwwroot}/mod/${item.itemmodule}/view.php?id=${item.coursemoduleid}`;\r\n                                            window.open(url, '_blank');\r\n\r\n                                            vue.saveInteraction (\r\n                                                vue.user_grades_chart,\r\n                                                \"selected\",\r\n                                                \"grade_item\",\r\n                                                19\r\n                                            );\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        chart.series = this.user_grades_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    get_sessions_evolution_tooltip(point) {\r\n                        let text = '',\r\n                            sessions, sessions_prefix, time_prefix, time;\r\n                        if (point.colorIndex == 0) {\r\n                            sessions = point.y;\r\n                            sessions_prefix = point.series.name;\r\n                            text = `<b style=\"color: ${point.color};\">• </b>\r\n                                    <b>${sessions_prefix}: </b>${sessions}<br/>`;\r\n                        } else {\r\n                            time_prefix = point.series.name;\r\n                            time = this.convert_time(point.y * 60);\r\n                            text = `<b style=\"color: ${point.color};\">• </b>\r\n                                    <b>${time_prefix}: </b>\r\n                                    ${time}<br/>`;\r\n                        }\r\n                        return text;\r\n                    },\r\n\r\n                    get_user_grades_tooltip(point, item) {\r\n                        let serie_name = point.series.name,\r\n                            user_grade = 0;\r\n                        let finalgrade = Number(item.finalgrade),\r\n                            average = Number(item.average),\r\n                            grademax = Number(item.grademax);\r\n                        grademax = this.isInt(grademax) ? grademax : grademax.toFixed(2);\r\n                        if (point.colorIndex == 0) {\r\n                            user_grade = this.isInt(finalgrade) ? finalgrade : finalgrade.toFixed(2);\r\n                        } else {\r\n                            user_grade = this.isInt(average) ? average : average.toFixed(2);\r\n                        }\r\n                        return `<b style=\"color: ${point.color};\">• </b>\r\n                                <b>${serie_name}: </b>${user_grade}/${grademax}<br/>`;\r\n                    },\r\n\r\n                    calculate_timezone_date_string(timestamp) {\r\n                        let dat, weekday, monthday, month, time;\r\n                        if (Moment.tz.zone(this.timezone)) {\r\n                            dat = Moment(timestamp).tz(this.timezone);\r\n                            weekday = dat.day();\r\n                            monthday = dat.date();\r\n                            month = dat.month();\r\n                            time = dat.format('HH:mm:ss');\r\n                        } else {\r\n                            let tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n                            dat = new Date(timestamp);\r\n                            weekday = dat.getDay();\r\n                            monthday = dat.getDate();\r\n                            month = dat.getMonth();\r\n                            time = `${dat.getHours()}:${dat.getMinutes()}:${dat.getSeconds()} (${tz})`;\r\n                        }\r\n                        weekday = this.strings.chart.weekdays[weekday];\r\n                        month = this.strings.chart.shortMonths[month];\r\n                        return `${weekday}, ${month} ${monthday}, ${time}`;\r\n                    },\r\n\r\n                    convert_time(time) {\r\n                        time *= 60; // pasar los minutos a segundos\r\n                        let h = this.strings.hours_short;\r\n                        let m = this.strings.minutes_short;\r\n                        let s = this.strings.seconds_short;\r\n                        let hours = Math.floor(time / 3600);\r\n                        let minutes = Math.floor((time % 3600) / 60);\r\n                        let seconds = Math.floor(time % 60);\r\n                        let text;\r\n                        if (hours >= 1) {\r\n                            if (minutes >= 1) {\r\n                                text = `${hours}${h} ${minutes}${m}`;\r\n                            } else {\r\n                                text = `${hours}${h}`;\r\n                            }\r\n                        } else if ((minutes >= 1)) {\r\n                            if (seconds >= 1) {\r\n                                text = `${minutes}${m} ${seconds}${s}`;\r\n                            } else {\r\n                                text = `${minutes}${m}`;\r\n                            }\r\n                        } else {\r\n                            text = `${seconds}${s}`;\r\n                        }\r\n                        return text;\r\n                    },\r\n\r\n                    open_modules_modal(type, weekposition) {\r\n                        let sections = this.dropout.sections;\r\n                        if (Number.isInteger(weekposition)) {\r\n                            sections = [];\r\n                            let section;\r\n                            let week = this.dropout.weeks[weekposition];\r\n                            week.sections.forEach(item => {\r\n                                section = {\r\n                                    sectionid: item.sectionid,\r\n                                    name: item.name,\r\n                                    modules: this.sections_modules(item.sectionid)\r\n                                };\r\n                                sections.push(section);\r\n                            });\r\n                        }\r\n                        sections.forEach(section => {\r\n                            section.modules.forEach(module => {\r\n                                module.complete = false;\r\n                                module.viewed = false;\r\n                                module.interactions = 0;\r\n                                let user_cm = this.selected_user.cms.modules[`cm${module.id}`];\r\n                                if (user_cm) {\r\n                                    module.complete = user_cm.complete;\r\n                                    module.viewed = user_cm.viewed;\r\n                                    module.interactions = user_cm.interactions;\r\n                                }\r\n                            });\r\n                        });\r\n\r\n                        this.selected_sections = sections;\r\n                        this.modules_dialog = true;\r\n                    },\r\n\r\n                    sections_modules(sectionid) {\r\n                        let modules = [];\r\n                        let sections = this.dropout.sections;\r\n                        for (let i = 0; i < sections.length; i++) {\r\n                            if (sections[i].sectionid == sectionid) {\r\n                                if (sections[i].modules) {\r\n                                    modules = sections[i].modules;\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                        return modules;\r\n                    },\r\n\r\n                    get_user_module(moduleid) {\r\n                        let module;\r\n                        let cms = this.selected_user.cms.modules;\r\n                        for (let i = 0; i < cms.length; i++) {\r\n                            cms[i].id = Number(cms[i].id);\r\n                            if (cms[i].id == moduleid) {\r\n                                module = cms[i];\r\n                                break;\r\n                            }\r\n                        }\r\n                        return module;\r\n                    },\r\n\r\n                    table_headers() {\r\n                        let headers = [\r\n                            { text: '', value: 'id', align: 'center', sortable: false },\r\n                            { text: this.strings.thead_name, value: 'firstname' },\r\n                            { text: this.strings.thead_lastname, value: 'lastname' },\r\n                            { text: this.strings.thead_progress, value: 'progress_percentage' },\r\n                        ];\r\n                        return headers;\r\n                    },\r\n\r\n                    get_picture_url(userid) {\r\n                        return `${M.cfg.wwwroot}/user/pix.php?file=/${userid}/f1.jpg`;\r\n                    },\r\n\r\n                    get_user_fullname() {\r\n                        return `${this.selected_user.firstname} ${this.selected_user.lastname}`;\r\n                    },\r\n\r\n                    get_username() {\r\n                        return `@${this.selected_user.username}`;\r\n                    },\r\n\r\n                    see_profile() {\r\n                        let id = this.selected_user.id;\r\n                        let url = M.cfg.wwwroot + '/user/view.php?id=' + id + '&course=' + vue.courseid;\r\n                        window.open(url);\r\n                    },\r\n\r\n                    get_progress_message() {\r\n                        let finished_label = this.strings.finished_resources;\r\n                        return `${finished_label}: ${this.selected_user.cms.complete} ${this.strings.of_conector} ${this.selected_user.cms.total}`;\r\n                    },\r\n\r\n                    get_progress_percentage() {\r\n                        return `${this.selected_user.progress_percentage} %`;\r\n                    },\r\n\r\n                    get_student_grade() {\r\n                        let grade = this.selected_user.coursegrade;\r\n                        grade.finalgrade = Number(grade.finalgrade);\r\n                        grade.maxgrade = Number(grade.maxgrade);\r\n                        let student_grade = this.isInt(grade.finalgrade) ? grade.finalgrade : grade.finalgrade.toFixed(2);\r\n                        let max_grade = this.isInt(grade.maxgrade) ? grade.maxgrade : grade.maxgrade.toFixed(2);\r\n                        return `${student_grade}/${max_grade}`;\r\n                    },\r\n\r\n                    get_sendmail_user_text() {\r\n                        return `${this.strings.send_mail_to_user} ${this.selected_user.firstname}`;\r\n                    },\r\n\r\n                    sendmail(type) {\r\n                        this.emailComponent = \"user_profile_card\";\r\n                        this.emailTarget = \"\";\r\n\r\n                        this.strings.email_strings.subject = this.strings.email_strings.subject_prefix;\r\n                        this.modulename = \"course\";\r\n                        this.moduleid = this.courseid;\r\n                        if (type == 1) {\r\n                            this.emailTarget = \"user\";\r\n\r\n                            this.email_users = [this.selected_user];\r\n                            this.email_dialog = true;\r\n                        } else if (type == 2) {\r\n                            this.emailTarget = \"group\";\r\n\r\n                            this.email_users = this.cluster_users;\r\n                            this.email_dialog = true;\r\n                        }\r\n                    },\r\n\r\n                    update_email_dialog(value) {\r\n                        this.email_dialog = value;\r\n                    },\r\n\r\n                    update_modules_dialog(value) {\r\n                        this.modules_dialog = value;\r\n                    },\r\n\r\n                    isInt(n) {\r\n                        return n % 1 === 0;\r\n                    },\r\n\r\n                    capitalizeFirstLetter(string) {\r\n                        return string.charAt(0).toUpperCase() + string.slice(1);\r\n                    },\r\n\r\n                    generate_dropout_data() {\r\n                        this.loading = true;\r\n                        this.errors = [];\r\n                        let data = {\r\n                            action: \"dropoutdata\",\r\n                            userid: this.userid,\r\n                            courseid: this.courseid,\r\n                            profile: this.render_has,\r\n                        }\r\n                        Axios({\r\n                            method: 'get',\r\n                            url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                            params: data,\r\n                        }).then((response) => {\r\n                            if (response.status == 200 && response.data.ok) {\r\n                                location.reload();\r\n                            } else {\r\n                                this.error_messages.push(this.strings.error_network);\r\n                            }\r\n                        }).catch((e) => {\r\n                            this.errors.push(this.strings.api_error_network);\r\n                        }).finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                        return this.data;\r\n                    },\r\n\r\n                    openChartHelp(chart) {\r\n                        let contents = [];\r\n                        if (chart == this.students_group_selector) {\r\n                            contents.push({\r\n                                title: this.strings.group_students_help_title,\r\n                                description: this.strings.group_students_help_description_p1,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.group_students_help_description_p2,\r\n                            });\r\n                        } else if (chart == this.modules_access_chart) {\r\n                            contents.push({\r\n                                title: this.strings.modules_access_help_title,\r\n                                description: this.strings.modules_access_help_description_p1,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.modules_access_help_description_p2,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.modules_access_help_description_p3,\r\n                            });\r\n                        } else if (chart == this.week_modules_chart) {\r\n                            contents.push({\r\n                                title: this.strings.week_modules_help_title,\r\n                                description: this.strings.week_modules_help_description_p1,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.week_modules_help_description_p2,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.week_modules_help_description_p3,\r\n                            });\r\n                        } else if (chart == this.sessions_evolution_chart) {\r\n                            contents.push({\r\n                                title: this.strings.sessions_evolution_help_title,\r\n                                description: this.strings.sessions_evolution_help_description_p1,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.sessions_evolution_help_description_p2,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.sessions_evolution_help_description_p3,\r\n                            });\r\n                        } else if (chart == this.user_grades_chart) {\r\n                            contents.push({\r\n                                title: this.strings.user_grades_help_title,\r\n                                description: this.strings.user_grades_help_description_p1,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.user_grades_help_description_p2,\r\n                            });\r\n                            contents.push({\r\n                                description: this.strings.user_grades_help_description_p3,\r\n                            });\r\n                        }\r\n                        this.help_contents = contents;\r\n                        if (this.help_contents.length) {\r\n                            this.help_dialog = true;\r\n                            this.saveInteraction (chart, \"viewed\", \"chart_help_dialog\", 7);\r\n                        }\r\n                    },\r\n\r\n                    saveInteraction (component, interaction, target, interactiontype) {\r\n                        let data = {\r\n                            action : \"saveinteraction\",\r\n                            pluginsection : this.pluginSectionName,\r\n                            component,\r\n                            interaction,\r\n                            target,\r\n                            url: window.location.href,\r\n                            interactiontype,\r\n                            courseid : this.courseid,\r\n                            userid : this.userid,\r\n                        };\r\n                        Axios({\r\n                            method:'get',\r\n                            url: `${M.cfg.wwwroot}/local/fliplearning/ajax.php`,\r\n                            params : data,\r\n                        }).then((r) => {}).catch((e) => {});\r\n                    },\r\n\r\n                    update_help_dialog(value) {\r\n                        this.help_dialog = value;\r\n                    },\r\n\r\n                    get_timezone() {\r\n                        let information = `${this.strings.change_timezone} ${this.timezone}`\r\n                        return information;\r\n                    },\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init: init\r\n        };\r\n    });"],"file":"dropout.min.js"}