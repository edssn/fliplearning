{"version":3,"sources":["../src/dropout.js"],"names":["define","Vue","Vuetify","Axios","Moment","MomentTimezone","Pagination","ChartDynamic","Pageheader","init","content","console","log","use","component","vue","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","dropout","selected_cluster","cluster_users","selected_user","search","week_modules_chart_data","week_modules_chart_categories","selected_sections","sessions_evolution_data","dialog","beforeMount","clusters","length","set_modules_in_sections","change_cluster","users","mounted","document","querySelector","style","display","computed","methods","get_help_content","sectionsMap","Map","sectionid","cms","forEach","cm","section","has","set","get","push","sections","modules","selected_users","user","includes","id","change_user","build_modules_access_chart","chart","type","backgroundColor","title","text","modules_access_chart_title","xAxis","yAxis","allowDecimals","enabled","modules_amount","tooltip","shared","formatter","module_text","y","module_label","modules_label","points","key","modules_details","plotOptions","series","cursor","point","events","click","open_modules_modal","x","legend","colorByPoint","name","modules_access_chart_series_viewed","viewed","modules_access_chart_series_complete","complete","modules_access_chart_series_total","total","build_week_modules_chart","week_modules_chart_title","categories","crosshair","useHTML","text1","text2","module_text_viewed","viewed_series_name","color","module_text_completed","completed_series_name","colorIndex","build_sessions_evolution_chart","zoomType","sessions_evolution_chart_title","sessions_evolution_chart_xaxis1","sessions_evolution_chart_xaxis2","opposite","date_label","calculate_timezone_date_string","sessions","sessions_suffix","session_text","sessions_text","sessions_prefix","time_prefix","time","convert_time","timestamp","dat","weekday","monthday","month","tz","zone","day","date","format","Intl","DateTimeFormat","resolvedOptions","timeZone","Date","getDay","getDate","getMonth","getHours","getMinutes","getSeconds","weekdays","shortMonths","calculate_modules_access_by_week","moduleid","weekcompletecms","weekviewedcms","completecms","viewedcms","user_cm","weeks","week","sections_modules","module","position","calculate_sessions_evolution","sessions_data","time_data","sumtime","sumsessions","session","start","duration","sessions_evolution_chart_legend1","sessions_evolution_chart_legend2","h","hours_short","m","minutes_short","s","seconds_short","hours","Math","floor","minutes","seconds","weekposition","Number","isInteger","item","interactions","i","get_user_module","update_interactions","action","weekcode","profile","method","url","M","cfg","wwwroot","params","then","response","status","ok","inverted_time","error_messages","error_network","catch","api_error_network","finally","table_headers","headers","value","align","sortable","thead_name","thead_lastname","thead_progress","get_picture_url","get_module_icon","modname","get_module_url","get_interactions_number","interactions_text","modules_interaction","modules_interactions","get_user_fullname","firstname","lastname","get_username","username","see_profile","window","open","get_progress_message","finished_label","finisheds_label","of_conector","total_cms","get_progress_percentage","progress_percentage","get_student_grade","grade","coursegrade","finalgrade","maxgrade","student_grade","isInt","toFixed","max_grade","n","get_timezone","information","ss_change_timezone"],"mappings":"AAAAA,OAAM,8BAAC,CAAC,wBAAD,CACC,4BADD,CAEC,0BAFD,CAGC,2BAHD,CAIC,mCAJD,CAKC,+BALD,CAMC,iCAND,CAOC,+BAPD,CAAD,CASF,SAASC,CAAT,CAAcC,CAAd,CAAuBC,CAAvB,CAA8BC,CAA9B,CAAsCC,CAAtC,CAAsDC,CAAtD,CAAkEC,CAAlE,CAAgFC,CAAhF,CAA4F,CACxF,aA0gBA,MAAO,CACHC,IAAI,CAzgBR,SAAcC,CAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACAT,CAAG,CAACY,GAAJ,CAAQX,CAAR,EACAD,CAAG,CAACa,SAAJ,CAAc,YAAd,CAA4BR,CAA5B,EACAL,CAAG,CAACa,SAAJ,CAAc,OAAd,CAAuBP,CAAvB,EACAN,CAAG,CAACa,SAAJ,CAAc,YAAd,CAA4BN,CAA5B,EACA,GAAIO,CAAAA,CAAG,CAAG,GAAId,CAAAA,CAAJ,CAAQ,CACde,UAAU,CAAE,CAAC,IAAD,CAAO,IAAP,CADE,CAEdC,EAAE,CAAE,UAFU,CAGdC,OAAO,CAAE,GAAIhB,CAAAA,CAHC,CAIdiB,IAJc,gBAIP,CACH,MAAO,CACHC,OAAO,CAAGV,CAAO,CAACU,OADf,CAEHC,MAAM,CAAGX,CAAO,CAACW,MAFd,CAGHC,MAAM,CAAGZ,CAAO,CAACY,MAHd,CAIHC,QAAQ,CAAGb,CAAO,CAACa,QAJhB,CAKHC,QAAQ,CAAGd,CAAO,CAACc,QALhB,CAMHC,UAAU,CAAGf,CAAO,CAACgB,cANlB,CAOHC,OAAO,GAPJ,CAQHC,MAAM,CAAG,EARN,CASHC,KAAK,CAAGnB,CAAO,CAACmB,KATb,CAWHC,OAAO,CAAEpB,CAAO,CAACoB,OAXd,CAYHC,gBAAgB,CAAE,EAZf,CAaHC,aAAa,CAAE,EAbZ,CAcHC,aAAa,CAAE,EAdZ,CAeHC,MAAM,CAAE,IAfL,CAgBHC,uBAAuB,CAAE,EAhBtB,CAiBHC,6BAA6B,CAAE,EAjB5B,CAkBHC,iBAAiB,CAAE,EAlBhB,CAmBHC,uBAAuB,CAAE,EAnBtB,CAoBHC,MAAM,GApBH,CAsBV,CA3Ba,CA4BdC,WA5Bc,uBA4BD,CACT,GAAI,KAAKV,OAAL,CAAaW,QAAb,CAAsBC,MAA1B,CAAkC,CAC9B,KAAKC,uBAAL,GACA,KAAKZ,gBAAL,CAAwB,KAAKD,OAAL,CAAaW,QAAb,CAAsB,CAAtB,CAAxB,CACA,KAAKG,cAAL,CAAoB,KAAKb,gBAAL,CAAsBc,KAA1C,CACH,CACJ,CAlCa,CAmCdC,OAnCc,mBAmCL,CACLC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CC,KAA3C,CAAiDC,OAAjD,CAA2D,MAA3D,CACAH,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCC,KAAnC,CAAyCC,OAAzC,CAAmD,OACtD,CAtCa,CAuCdC,QAAQ,CAAE,EAvCI,CA0CdC,OAAO,CAAG,CACNC,gBADM,4BACY,CAEd,sBACH,CAJK,CAMNV,uBANM,mCAMoB,IAClBW,CAAAA,CAAW,CAAG,GAAIC,CAAAA,GADA,CAElBC,CAAS,CAAG,CAFM,CAGtB,KAAK1B,OAAL,CAAa2B,GAAb,CAAiBC,OAAjB,CAAyB,SAAAC,CAAE,CAAI,CAC3BH,CAAS,EAAUG,CAAE,CAACC,OAAtB,CACA,GAAI,CAACN,CAAW,CAACO,GAAZ,CAAgBL,CAAhB,CAAL,CAAiC,CAC7BF,CAAW,CAACQ,GAAZ,CAAgBN,CAAhB,CAA2B,CAACG,CAAD,CAA3B,CACH,CAFD,IAEO,CACHL,CAAW,CAACS,GAAZ,CAAgBP,CAAhB,EAA2BQ,IAA3B,CAAgCL,CAAhC,CACH,CACJ,CAPD,EAQA,KAAK7B,OAAL,CAAamC,QAAb,CAAsBP,OAAtB,CAA8B,SAAAE,CAAO,CAAI,CACrCJ,CAAS,EAAUI,CAAO,CAACJ,SAA3B,CACAI,CAAO,CAACJ,SAAR,CAAoBA,CAApB,CACAI,CAAO,CAACM,OAAR,CAAkBZ,CAAW,CAACS,GAAZ,CAAgBP,CAAhB,CACrB,CAJD,CAKH,CAtBK,CAwBNZ,cAxBM,yBAwBSC,CAxBT,CAwBgB,CAClB,GAAIsB,CAAAA,CAAc,CAAG,EAArB,CACA,KAAKrC,OAAL,CAAae,KAAb,CAAmBa,OAAnB,CAA2B,SAAAU,CAAI,CAAI,CAC/B,GAAIvB,CAAK,CAACwB,QAAN,CAAeD,CAAI,CAACE,EAApB,CAAJ,CAA6B,CACzBH,CAAc,CAACH,IAAf,CAAoBI,CAApB,CACH,CACJ,CAJD,EAKA,KAAKpC,aAAL,CAAqBmC,CAArB,CACA,GAAIC,CAAAA,CAAI,CAAG,KAAKpC,aAAL,CAAmB,CAAnB,GAAyB,EAApC,CACA,KAAKuC,WAAL,CAAiBH,CAAjB,CAKH,CAtCK,CAwCNI,0BAxCM,sCAwCuB,CACzB,GAAIC,CAAAA,CAAK,GAAT,CACAA,CAAK,CAACA,KAAN,CAAc,CACVC,IAAI,CAAE,KADI,CAEVC,eAAe,CAAE,SAFP,CAAd,CAIAF,CAAK,CAACG,KAAN,CAAc,CACVC,IAAI,CAAE,KAAKzD,OAAL,CAAa0D,0BADT,CAAd,CAGAL,CAAK,CAACM,KAAN,CAAc,CACVL,IAAI,CAAE,UADI,CAAd,CAGAD,CAAK,CAACO,KAAN,CAAc,CACVC,aAAa,GADH,CAEVL,KAAK,CAAE,CACHM,OAAO,GADJ,CAEHL,IAAI,CAAE,KAAKzD,OAAL,CAAa+D,cAFhB,CAFG,CAAd,CAOAV,CAAK,CAACW,OAAN,CAAgB,CACZC,MAAM,GADM,CAEZC,SAAS,CAAE,oBAAY,CACnB,GAAIC,CAAAA,CAAW,CAAc,CAAV,OAAKC,CAAN,CAAgBzE,CAAG,CAACK,OAAJ,CAAYqE,YAA5B,CAA2C1E,CAAG,CAACK,OAAJ,CAAYsE,aAAzE,CACA,MAAO,MAAQ,KAAKC,MAAL,CAAY,CAAZ,EAAeC,GAAvB,CAA6B,QAA7B,CAAwC,KAAKJ,CAA7C,CAAiD,GAAjD,CAAuDD,CAAvD,YACMxE,CAAG,CAACK,OAAJ,CAAYyE,eADlB,CACoC,MAC9C,CANW,CAAhB,CAQApB,CAAK,CAACqB,WAAN,CAAoB,CAChBC,MAAM,CAAE,CACJC,MAAM,CAAE,SADJ,CAEAC,KAAK,CAAE,CACPC,MAAM,CAAE,CACJC,KAAK,CAAE,gBAAY,CACfpF,CAAG,CAACqF,kBAAJ,CAAuB,KAAKC,CAA5B,CACH,CAHG,CADD,CAFP,CADQ,CAApB,CAYA5B,CAAK,CAAC6B,MAAN,CAAe,CACXpB,OAAO,GADI,CAZf,CAeAT,CAAK,CAACsB,MAAN,CAAe,CAAC,CACZQ,YAAY,GADA,CAEZpF,IAAI,CAAE,CACF,CAACqF,IAAI,CAAE,KAAKpF,OAAL,CAAaqF,kCAApB,CAAwDjB,CAAC,CAAE,KAAKvD,aAAL,CAAmBwB,GAAnB,CAAuBiD,MAAlF,CADE,CAEF,CAACF,IAAI,CAAE,KAAKpF,OAAL,CAAauF,oCAApB,CAA0DnB,CAAC,CAAE,KAAKvD,aAAL,CAAmBwB,GAAnB,CAAuBmD,QAApF,CAFE,CAGF,CAACJ,IAAI,CAAE,KAAKpF,OAAL,CAAayF,iCAApB,CAAuDrB,CAAC,CAAE,KAAKvD,aAAL,CAAmBwB,GAAnB,CAAuBqD,KAAjF,CAHE,CAFM,CAAD,CAAf,CAQA,MAAOrC,CAAAA,CACV,CA3FK,CA6FNsC,wBA7FM,oCA6FqB,CACvB,GAAItC,CAAAA,CAAK,GAAT,CACAA,CAAK,CAACA,KAAN,CAAc,CACVC,IAAI,CAAE,QADI,CAEVC,eAAe,CAAE,SAFP,CAAd,CAIAF,CAAK,CAACG,KAAN,CAAc,CACVC,IAAI,CAAE,KAAKzD,OAAL,CAAa4F,wBADT,CAAd,CAGAvC,CAAK,CAACM,KAAN,CAAc,CACVkC,UAAU,CAAE,KAAK7E,6BADP,CAEVwC,KAAK,CAAE,CACHC,IAAI,CAAE,IADH,CAFG,CAKVqC,SAAS,GALC,CAAd,CAOAzC,CAAK,CAACO,KAAN,CAAc,CACVC,aAAa,GADH,CAEVL,KAAK,CAAE,CACHC,IAAI,CAAE,KAAKzD,OAAL,CAAa+D,cADhB,CAFG,CAAd,CAMAV,CAAK,CAACW,OAAN,CAAgB,CACZC,MAAM,GADM,CAEZ8B,OAAO,GAFK,CAGZ7B,SAAS,CAAE,oBAAY,CACnB,GAAI8B,CAAAA,CAAK,CAAG,EAAZ,CAAgBC,CAAK,CAAG,EAAxB,CACA,GAAI,KAAK1B,MAAL,CAAY,CAAZ,CAAJ,CAAoB,IACZ2B,CAAAA,CAAkB,CAAwB,CAApB,OAAK3B,MAAL,CAAY,CAAZ,EAAeH,CAAhB,CAA0BzE,CAAG,CAACK,OAAJ,CAAYqE,YAAtC,CAAqD1E,CAAG,CAACK,OAAJ,CAAYsE,aAD1E,CAEZ6B,CAAkB,CAAG,KAAK5B,MAAL,CAAY,CAAZ,EAAeI,MAAf,CAAsBS,IAF/B,CAGhBY,CAAK,6BAAuB,KAAKzB,MAAL,CAAY,CAAZ,EAAe6B,KAAtC,eAAgDD,CAAhD,gEACK,KAAK5B,MAAL,CAAY,CAAZ,EAAeH,CADpB,aACyB8B,CADzB,SAER,CACD,GAAI,KAAK3B,MAAL,CAAY,CAAZ,CAAJ,CAAoB,IACZ8B,CAAAA,CAAqB,CAAwB,CAApB,OAAK9B,MAAL,CAAY,CAAZ,EAAeH,CAAhB,CAA0BzE,CAAG,CAACK,OAAJ,CAAYqE,YAAtC,CAAqD1E,CAAG,CAACK,OAAJ,CAAYsE,aAD7E,CAEZgC,CAAqB,CAAG,KAAK/B,MAAL,CAAY,CAAZ,EAAeI,MAAf,CAAsBS,IAFlC,CAGhBa,CAAK,6BAAuB,KAAK1B,MAAL,CAAY,CAAZ,EAAe6B,KAAtC,eAAgDE,CAAhD,gEACK,KAAK/B,MAAL,CAAY,CAAZ,EAAeH,CADpB,aACyBiC,CADzB,SAER,CACD,gBAAU,KAAKpB,CAAf,4DACUe,CADV,SACkBC,CADlB,yDAEatG,CAAG,CAACK,OAAJ,CAAYyE,eAFzB,QAGH,CApBW,CAAhB,CAsBApB,CAAK,CAACqB,WAAN,CAAoB,CAChBC,MAAM,CAAE,CACJC,MAAM,CAAE,SADJ,CAEJC,KAAK,CAAE,CACHC,MAAM,CAAE,CACJC,KAAK,CAAE,gBAAY,CACfpF,CAAG,CAACqF,kBAAJ,CAAuB,KAAKuB,UAA5B,CAAwC,KAAKtB,CAA7C,CACH,CAHG,CADL,CAFH,CADQ,CAApB,CAYA5B,CAAK,CAACsB,MAAN,CAAe,KAAK5D,uBAApB,CACA,MAAOsC,CAAAA,CACV,CAvJK,CAyJNmD,8BAzJM,0CAyJ2B,CAC7B,GAAInD,CAAAA,CAAK,GAAT,CACAA,CAAK,CAACA,KAAN,CAAc,CACVoD,QAAQ,CAAE,GADA,CAEVlD,eAAe,CAAE,SAFP,CAAd,CAIAF,CAAK,CAACG,KAAN,CAAc,CACVC,IAAI,CAAE,KAAKzD,OAAL,CAAa0G,8BADT,CAAd,CAGArD,CAAK,CAACM,KAAN,CAAc,CACVL,IAAI,CAAE,UADI,CAAd,CAGAD,CAAK,CAACO,KAAN,CAAc,CAAC,CACXC,aAAa,GADF,CAEXL,KAAK,CAAE,CAAEC,IAAI,CAAE,KAAKzD,OAAL,CAAa2G,+BAArB,CAFI,CAAD,CAGX,CACCnD,KAAK,CAAE,CAAEC,IAAI,CAAE,KAAKzD,OAAL,CAAa4G,+BAArB,CADR,CAECC,QAAQ,GAFT,CAHW,CAAd,CAOAxD,CAAK,CAACW,OAAN,CAAgB,CACZC,MAAM,GADM,CAEZ8B,OAAO,GAFK,CAGZ7B,SAAS,CAAE,oBAAY,IACf4C,CAAAA,CAAU,CAAGnH,CAAG,CAACoH,8BAAJ,CAAmC,KAAK9B,CAAxC,CADE,CAEf+B,CAAQ,CAAG,KAAKzC,MAAL,CAAY,CAAZ,EAAeH,CAFX,CAGf6C,CAAe,CAAwB,CAApB,OAAK1C,MAAL,CAAY,CAAZ,EAAeH,CAAhB,CAA0BzE,CAAG,CAACK,OAAJ,CAAYkH,YAAtC,CAAqDvH,CAAG,CAACK,OAAJ,CAAYmH,aAHpE,CAIfC,CAAe,CAAG,KAAK7C,MAAL,CAAY,CAAZ,EAAeI,MAAf,CAAsBS,IAJzB,CAKfiC,CAAW,CAAG,KAAK9C,MAAL,CAAY,CAAZ,EAAeI,MAAf,CAAsBS,IALrB,CAMfkC,CAAI,CAAG3H,CAAG,CAAC4H,YAAJ,CAAoC,EAAnB,MAAKhD,MAAL,CAAY,CAAZ,EAAeH,CAAhC,CANQ,CAOnB,uBAAiB0C,CAAjB,qFAC2B,KAAKvC,MAAL,CAAY,CAAZ,EAAe6B,KAD1C,eACoDgB,CADpD,4DAEUJ,CAFV,aAEsBC,CAFtB,6EAG2B,KAAK1C,MAAL,CAAY,CAAZ,EAAe6B,KAH1C,eAGoDiB,CAHpD,4DAIUC,CAJV,SAKH,CAfW,CAAhB,CAiBAjE,CAAK,CAACqB,WAAN,CAAoB,CAChBC,MAAM,CAAE,CACJC,MAAM,CAAE,SADJ,CAEAC,KAAK,CAAE,CACPC,MAAM,CAAE,CACJC,KAAK,CAAE,gBAAY,CACfxF,OAAO,CAACC,GAAR,CAAY,IAAZ,CACH,CAHG,CADD,CAFP,CADQ,CAApB,CAYA6D,CAAK,CAACsB,MAAN,CAAe,KAAKzD,uBAApB,CACA,MAAOmC,CAAAA,CACV,CA3MK,CA6MN0D,8BA7MM,yCA6MyBS,CA7MzB,CA6MoC,CACtC,GAAIC,CAAAA,CAAJ,CAASC,CAAT,CAAkBC,CAAlB,CAA4BC,CAA5B,CAAmCN,CAAnC,CACA,GAAItI,CAAM,CAAC6I,EAAP,CAAUC,IAAV,CAAe,KAAK1H,QAApB,CAAJ,CAAmC,CAC/BqH,CAAG,CAAGzI,CAAM,CAACwI,CAAD,CAAN,CAAkBK,EAAlB,CAAqB,KAAKzH,QAA1B,CAAN,CACAsH,CAAO,CAAGD,CAAG,CAACM,GAAJ,EAAV,CACAJ,CAAQ,CAAGF,CAAG,CAACO,IAAJ,EAAX,CACAJ,CAAK,CAAGH,CAAG,CAACG,KAAJ,EAAR,CACAN,CAAI,CAAGG,CAAG,CAACQ,MAAJ,CAAW,UAAX,CACV,CAND,IAMO,CACH,GAAIJ,CAAAA,CAAE,CAAGK,IAAI,CAACC,cAAL,GAAsBC,eAAtB,GAAwCC,QAAjD,CACAZ,CAAG,CAAI,GAAIa,CAAAA,IAAJ,CAASd,CAAT,CAAP,CACAE,CAAO,CAAGD,CAAG,CAACc,MAAJ,EAAV,CACAZ,CAAQ,CAAGF,CAAG,CAACe,OAAJ,EAAX,CACAZ,CAAK,CAAGH,CAAG,CAACgB,QAAJ,EAAR,CACAnB,CAAI,WAAMG,CAAG,CAACiB,QAAJ,EAAN,aAAwBjB,CAAG,CAACkB,UAAJ,EAAxB,aAA4ClB,CAAG,CAACmB,UAAJ,EAA5C,cAAiEf,CAAjE,KACP,CACDH,CAAO,CAAG,KAAK1H,OAAL,CAAaqD,KAAb,CAAmBwF,QAAnB,CAA4BnB,CAA5B,CAAV,CACAE,CAAK,CAAG,KAAK5H,OAAL,CAAaqD,KAAb,CAAmByF,WAAnB,CAA+BlB,CAA/B,CAAR,CACA,gBAAUF,CAAV,cAAsBE,CAAtB,aAA+BD,CAA/B,cAA4CL,CAA5C,CACH,CAhOK,CAkONyB,gCAlOM,4CAkO6B,YAC3B3G,CAAS,CAAG,CADe,CACZ4G,CAAQ,CAAG,CADC,CACEC,CAAe,CAAG,CADpB,CACuBC,CAAa,CAAG,CADvC,CAE3BpG,CAAO,CAAG,EAFiB,CAEbqG,CAAW,CAAG,EAFD,CAEKC,CAAS,CAAG,EAFjB,CAEqBvD,CAAU,CAAG,EAFlC,CAG3BwD,CAH2B,CAI/B,KAAK3I,OAAL,CAAa4I,KAAb,CAAmBhH,OAAnB,CAA2B,SAAAiH,CAAI,CAAI,CAE/BN,CAAe,CAAG,CAAlB,CAAqBC,CAAa,CAAG,CAArC,CACAK,CAAI,CAAC1G,QAAL,CAAcP,OAAd,CAAsB,SAAAE,CAAO,CAAI,CAE7BJ,CAAS,EAAUI,CAAO,CAACJ,SAA3B,CACAI,CAAO,CAACJ,SAAR,CAAoBA,CAApB,CAEAU,CAAO,CAAG,CAAI,CAAC0G,gBAAL,CAAsBpH,CAAtB,CAAV,CACAU,CAAO,CAACR,OAAR,CAAgB,SAAAmH,CAAM,CAAI,CAEtBT,CAAQ,EAAUS,CAAM,CAACvG,EAAzB,CACAuG,CAAM,CAACvG,EAAP,CAAY8F,CAAZ,CAGAK,CAAO,CAAG,CAAI,CAACxI,aAAL,CAAmBwB,GAAnB,CAAuBS,OAAvB,aAAoC2G,CAAM,CAACvG,EAA3C,EAAV,CAEA,GAAImG,CAAJ,CAAa,CACRA,CAAO,CAAC7D,QAAT,EAAsByD,CAAe,EAArC,CACCI,CAAO,CAAC/D,MAAT,EAAoB4D,CAAa,EACpC,CAEJ,CAbD,CAeH,CArBD,EAsBAC,CAAW,CAACvG,IAAZ,CAAiBqG,CAAjB,EACAG,CAAS,CAACxG,IAAV,CAAesG,CAAf,EACArD,CAAU,CAACjD,IAAX,WAAmB2G,CAAI,CAACnE,IAAxB,aAAiCmE,CAAI,CAACG,QAAL,CAAgB,CAAjD,EACH,CA5BD,EA8BA,KAAK1I,6BAAL,CAAqC6E,CAArC,CACA,KAAK9E,uBAAL,CAA+B,CAC3B,CAAEqE,IAAI,CAAE,KAAKpF,OAAL,CAAaqF,kCAArB,CAAyDtF,IAAI,CAAEqJ,CAA/D,CAD2B,CAE3B,CAAEhE,IAAI,CAAE,KAAKpF,OAAL,CAAauF,oCAArB,CAA2DxF,IAAI,CAAEoJ,CAAjE,CAF2B,CAIlC,CAzQK,CA2QNQ,4BA3QM,wCA2QyB,IACvBC,CAAAA,CAAa,CAAG,EADO,CACHC,CAAS,CAAG,EADT,CAEvBC,CAAO,CAAG,CAFa,CAEVC,CAAW,CAAG,CAFJ,CAEOzC,CAAI,CAAG,CAFd,CAEiBE,CAAS,CAAG,CAF7B,CAG3B,KAAK3G,aAAL,CAAmBmG,QAAnB,CAA4B1E,OAA5B,CAAoC,SAAA0H,CAAO,CAAI,CAC3CxC,CAAS,CAA2B,GAAxB,EAAOwC,CAAO,CAACC,KAA3B,CACA3C,CAAI,CAAG,CAAQ0C,CAAO,CAACE,QAAhB,CAA6B,EAApC,CACAJ,CAAO,EAAIxC,CAAX,CACAyC,CAAW,GACXH,CAAa,CAAChH,IAAd,CAAmB,CAAEqC,CAAC,CAAEuC,CAAL,CAAgBpD,CAAC,CAAE2F,CAAnB,CAAnB,EACAF,CAAS,CAACjH,IAAV,CAAe,CAAEqC,CAAC,CAAEuC,CAAL,CAAgBpD,CAAC,CAAE0F,CAAnB,CAAf,CACH,CAPD,EAQA,KAAK5I,uBAAL,CAA+B,CAC3B,CAAEkE,IAAI,CAAE,KAAKpF,OAAL,CAAamK,gCAArB,CAAuDvG,KAAK,CAAE,CAA9D,CAAiE7D,IAAI,CAAE6J,CAAvE,CAD2B,CAE3B,CAAExE,IAAI,CAAE,KAAKpF,OAAL,CAAaoK,gCAArB,CAAuDxG,KAAK,CAAE,CAA9D,CAAiE7D,IAAI,CAAE8J,CAAvE,CAF2B,CAIlC,CA1RK,CA4RNtC,YA5RM,uBA4ROD,CA5RP,CA4Ra,CACfA,CAAI,EAAI,EAAR,CADe,GAEX+C,CAAAA,CAAC,CAAG,KAAKrK,OAAL,CAAasK,WAFN,CAGXC,CAAC,CAAG,KAAKvK,OAAL,CAAawK,aAHN,CAIXC,CAAC,CAAG,KAAKzK,OAAL,CAAa0K,aAJN,CAKXC,CAAK,CAAGC,IAAI,CAACC,KAAL,CAAWvD,CAAI,CAAG,IAAlB,CALG,CAMXwD,CAAO,CAAGF,IAAI,CAACC,KAAL,CAAYvD,CAAI,CAAG,IAAR,CAAgB,EAA3B,CANC,CAOXyD,CAAO,CAAGH,IAAI,CAACC,KAAL,CAAWvD,CAAI,CAAG,EAAlB,CAPC,CAQX7D,CARW,CASf,GAAa,CAAT,EAAAkH,CAAJ,CAAgB,CACZlH,CAAI,WAAMkH,CAAN,SAAcN,CAAd,aAAmBS,CAAnB,SAA6BP,CAA7B,CACP,CAFD,IAEO,IAAgB,CAAX,EAAAO,CAAL,CAAoB,CACvBrH,CAAI,WAAMqH,CAAN,SAAgBP,CAAhB,aAAqBQ,CAArB,SAA+BN,CAA/B,CACP,CAFM,IAEA,CACHhH,CAAI,WAAMsH,CAAN,SAAgBN,CAAhB,CACP,CACD,MAAOhH,CAAAA,CACV,CA7SK,CA+SNuB,kBA/SM,6BA+Sa1B,CA/Sb,CA+SmB0H,CA/SnB,CA+SgC,YAC9BnI,CAAQ,CAAG,KAAKnC,OAAL,CAAamC,QADM,CAElC,GAAIoI,MAAM,CAACC,SAAP,CAAiBF,CAAjB,CAAJ,CAAoC,CAChCnI,CAAQ,CAAG,EAAX,CADgC,GAE5BL,CAAAA,CAF4B,CAG5B+G,CAAI,CAAG,KAAK7I,OAAL,CAAa4I,KAAb,CAAmB0B,CAAnB,CAHqB,CAIhCzB,CAAI,CAAC1G,QAAL,CAAcP,OAAd,CAAsB,SAAA6I,CAAI,CAAI,CAC1B3I,CAAO,CAAG,CACNJ,SAAS,CAAE+I,CAAI,CAAC/I,SADV,CAENgD,IAAI,CAAE+F,CAAI,CAAC/F,IAFL,CAGNtC,OAAO,CAAE,CAAI,CAAC0G,gBAAL,CAAsB2B,CAAI,CAAC/I,SAA3B,CAHH,CAAV,CAKAS,CAAQ,CAACD,IAAT,CAAcJ,CAAd,CACH,CAPD,CAQH,CACDK,CAAQ,CAACP,OAAT,CAAiB,SAAAE,CAAO,CAAI,CACxBA,CAAO,CAACM,OAAR,CAAgBR,OAAhB,CAAwB,SAAAmH,CAAM,CAAI,CAC9BA,CAAM,CAACjE,QAAP,IACAiE,CAAM,CAACnE,MAAP,IACAmE,CAAM,CAAC2B,YAAP,CAAsB,CAAtB,CACA,GAAI/B,CAAAA,CAAO,CAAG,CAAI,CAACxI,aAAL,CAAmBwB,GAAnB,CAAuBS,OAAvB,aAAoC2G,CAAM,CAACvG,EAA3C,EAAd,CACA,GAAImG,CAAJ,CAAa,CACTI,CAAM,CAACjE,QAAP,CAAkB6D,CAAO,CAAC7D,QAA1B,CACAiE,CAAM,CAACnE,MAAP,CAAgB+D,CAAO,CAAC/D,MAAxB,CACAmE,CAAM,CAAC2B,YAAP,CAAsB/B,CAAO,CAAC+B,YACjC,CACJ,CAVD,CAWH,CAZD,EAcA,KAAKjK,MAAL,IACA,KAAKF,iBAAL,CAAyB4B,CAC5B,CA9UK,CAgVN2G,gBAhVM,2BAgVWpH,CAhVX,CAgVsB,CAGxB,OAFIU,CAAAA,CAAO,CAAG,EAEd,CADID,CAAQ,CAAG,KAAKnC,OAAL,CAAamC,QAC5B,CAASwI,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGxI,CAAQ,CAACvB,MAA7B,CAAqC+J,CAAC,EAAtC,CAA0C,CACtC,GAAIxI,CAAQ,CAACwI,CAAD,CAAR,CAAYjJ,SAAZ,EAAyBA,CAA7B,CAAwC,CACpCU,CAAO,CAAGD,CAAQ,CAACwI,CAAD,CAAR,CAAYvI,OAAtB,CACA,KACH,CACJ,CACD,MAAOA,CAAAA,CACV,CA1VK,CA4VNwI,eA5VM,0BA4VUtC,CA5VV,CA4VoB,CAGtB,OAFIS,CAAAA,CAEJ,CADIpH,CAAG,CAAG,KAAKxB,aAAL,CAAmBwB,GAAnB,CAAuBS,OACjC,CAASuI,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGhJ,CAAG,CAACf,MAAxB,CAAgC+J,CAAC,EAAjC,CAAqC,CACjChJ,CAAG,CAACgJ,CAAD,CAAH,CAAOnI,EAAP,EAAmBb,CAAG,CAACgJ,CAAD,CAAH,CAAOnI,EAA1B,CACA,GAAIb,CAAG,CAACgJ,CAAD,CAAH,CAAOnI,EAAP,EAAa8F,CAAjB,CAA2B,CACvBS,CAAM,CAAGpH,CAAG,CAACgJ,CAAD,CAAZ,CACA,KACH,CACJ,CACD,MAAO5B,CAAAA,CACV,CAvWK,CAyWN8B,mBAzWM,8BAyWchC,CAzWd,CAyWmB,YACrB,KAAKhJ,OAAL,IACA,KAAKC,MAAL,CAAc,EAAd,CACA,GAAIT,CAAAA,CAAI,CAAG,CACPyL,MAAM,CAAG,MADF,CAEPtL,MAAM,CAAG,KAAKA,MAFP,CAGPC,QAAQ,CAAG,KAAKA,QAHT,CAIPsL,QAAQ,CAAGlC,CAAI,CAACkC,QAJT,CAKPC,OAAO,CAAG,KAAKrL,UALR,CAAX,CAOAtB,CAAK,CAAC,CACF4M,MAAM,CAAC,KADL,CAEFC,GAAG,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,8BAFnB,CAGFC,MAAM,CAAGjM,CAHP,CAAD,CAAL,CAIGkM,IAJH,CAIQ,SAACC,CAAD,CAAc,CAClB,GAAuB,GAAnB,EAAAA,CAAQ,CAACC,MAAT,EAA0BD,CAAQ,CAACnM,IAAT,CAAcqM,EAA5C,CAAgD,CAC5C,CAAI,CAACC,aAAL,CAAqBH,CAAQ,CAACnM,IAAT,CAAcA,IAAd,CAAmBsM,aAC3C,CAFD,IAEO,CACH,CAAI,CAACC,cAAL,CAAoB1J,IAApB,CAAyB,CAAI,CAAC5C,OAAL,CAAauM,aAAtC,CACH,CACJ,CAVD,EAUGC,KAVH,CAUS,UAAO,CACZ,CAAI,CAAChM,MAAL,CAAYoC,IAAZ,CAAiB,CAAI,CAAC5C,OAAL,CAAayM,iBAA9B,CACH,CAZD,EAYGC,OAZH,CAYW,UAAM,CACb,CAAI,CAACnM,OAAL,GACH,CAdD,EAeA,MAAO,MAAKR,IACf,CAnYK,CAqYN4M,aArYM,yBAqYS,CACX,GAAIC,CAAAA,CAAO,CAAG,CACV,CAAEnJ,IAAI,CAAE,EAAR,CAAYoJ,KAAK,CAAG,IAApB,CAA0BC,KAAK,CAAG,QAAlC,CAA4CC,QAAQ,GAApD,CADU,CAEV,CAAEtJ,IAAI,CAAE,KAAKzD,OAAL,CAAagN,UAArB,CAAkCH,KAAK,CAAG,WAA1C,CAFU,CAGV,CAAEpJ,IAAI,CAAE,KAAKzD,OAAL,CAAaiN,cAArB,CAAsCJ,KAAK,CAAG,UAA9C,CAHU,CAIV,CAAEpJ,IAAI,CAAE,KAAKzD,OAAL,CAAakN,cAArB,CAAsCL,KAAK,CAAG,qBAA9C,CAJU,CAAd,CAMA,MAAOD,CAAAA,CACV,CA7YK,CA+YNzJ,WA/YM,sBA+YMH,CA/YN,CA+YY,CACd,KAAKnC,aAAL,CAAqBmC,CAArB,CACAzD,OAAO,CAACC,GAAR,CAAY,CAACwD,IAAI,CAAJA,CAAD,CAAZ,EACA,KAAK+F,gCAAL,GACA,KAAKY,4BAAL,EACH,CApZK,CAsZNwD,eAtZM,0BAsZUjN,CAtZV,CAsZiB,CACnB,gBAAU2L,CAAC,CAACC,GAAF,CAAMC,OAAhB,gCAA8C7L,CAA9C,WACH,CAxZK,CA0ZNkN,eA1ZM,0BA0ZUC,CA1ZV,CA0ZkB,CACpB,gBAAUxB,CAAC,CAACC,GAAF,CAAMC,OAAhB,mCAAiDsB,CAAjD,WACH,CA5ZK,CA8ZNC,cA9ZM,yBA8ZS7D,CA9ZT,CA8ZgB,CAClB,gBAAUoC,CAAC,CAACC,GAAF,CAAMC,OAAhB,iBAA+BtC,CAAM,CAAC4D,OAAtC,yBAA6D5D,CAAM,CAACvG,EAApE,CACH,CAhaK,CAkaNqK,uBAlaM,kCAkakBnC,CAlalB,CAka+B,CACjC,GAAIoC,CAAAA,CAAiB,CAAoB,CAAhB,EAAApC,CAAD,CAAsB,KAAKpL,OAAL,CAAayN,mBAAnC,CAAyD,KAAKzN,OAAL,CAAa0N,oBAA9F,CACA,iBAAWtC,CAAX,aAA2BoC,CAA3B,KACH,CAraK,CAuaNG,iBAvaM,6BAuaa,CACf,gBAAU,KAAK9M,aAAL,CAAmB+M,SAA7B,aAA0C,KAAK/M,aAAL,CAAmBgN,QAA7D,CACH,CAzaK,CA2aNC,YA3aM,wBA2aQ,CACV,iBAAW,KAAKjN,aAAL,CAAmBkN,QAA9B,CACH,CA7aK,CA+aNC,WA/aM,uBA+aS,IACP9K,CAAAA,CAAE,CAAG,KAAKrC,aAAL,CAAmBqC,EADjB,CAEP0I,CAAG,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,oBAAhB,CAAqC7I,CAArC,CAAwC,UAAxC,CAAmDvD,CAAG,CAACQ,QAFtD,CAGX8N,MAAM,CAACC,IAAP,CAAYtC,CAAZ,CACH,CAnbK,CAqbNuC,oBArbM,gCAqbgB,IACd9J,CAAAA,CAAY,CAAG,KAAKrE,OAAL,CAAasE,aADd,CAEd8J,CAAc,CAAG,KAAKpO,OAAL,CAAaqO,eAFhB,CAGlB,GAAuC,CAAnC,OAAKxN,aAAL,CAAmBwB,GAAnB,CAAuBmD,QAA3B,CAA0C,CACtCnB,CAAY,CAAG,KAAKrE,OAAL,CAAaqE,YAA5B,CACA+J,CAAc,CAAG,KAAKpO,OAAL,CAAaoO,cACjC,CACD,gBAAU,KAAKvN,aAAL,CAAmBwB,GAAnB,CAAuBmD,QAAjC,aAA6CnB,CAA7C,aAA6D+J,CAA7D,aAA+E,KAAKpO,OAAL,CAAasO,WAA5F,aAA2G,KAAK5N,OAAL,CAAa6N,SAAxH,CACH,CA7bK,CA+bNC,uBA/bM,mCA+boB,CACtB,gBAAU,KAAK3N,aAAL,CAAmB4N,mBAA7B,MACH,CAjcK,CAmcNC,iBAncM,6BAmcc,CAChB,GAAIC,CAAAA,CAAK,CAAG,KAAK9N,aAAL,CAAmB+N,WAA/B,CACAD,CAAK,CAACE,UAAN,EAA0BF,CAAK,CAACE,UAAhC,CACAF,CAAK,CAACG,QAAN,EAAwBH,CAAK,CAACG,QAA9B,CAHgB,GAIZC,CAAAA,CAAa,CAAG,KAAKC,KAAL,CAAWL,CAAK,CAACE,UAAjB,EAA+BF,CAAK,CAACE,UAArC,CAAkDF,CAAK,CAACE,UAAN,CAAiBI,OAAjB,CAAyB,CAAzB,CAJtD,CAKZC,CAAS,CAAG,KAAKF,KAAL,CAAWL,CAAK,CAACG,QAAjB,EAA6BH,CAAK,CAACG,QAAnC,CAA8CH,CAAK,CAACG,QAAN,CAAeG,OAAf,CAAuB,CAAvB,CAL9C,CAMhB,gBAAUF,CAAV,aAA2BG,CAA3B,CACH,CA1cK,CA4cNF,KA5cM,gBA4cAG,CA5cA,CA4cG,CACL,MAAiB,EAAV,EAAAA,CAAC,CAAG,CACd,CA9cK,CAgdNC,YAhdM,wBAgdQ,CACV,GAAIC,CAAAA,CAAW,WAAM,KAAKrP,OAAL,CAAasP,kBAAnB,aAAyC,KAAKlP,QAA9C,CAAf,CACA,MAAOiP,CAAAA,CACV,CAndK,CA1CI,CAAR,CAggBb,CAEM,CAGV,CAvhBC,CAAN","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/momenttimezone\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartdynamic\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, MomentTimezone, Pagination, ChartDynamic, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            console.log(content);\r\n            Vue.use(Vuetify)\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', ChartDynamic);\r\n            Vue.component('pageheader', Pageheader);\r\n            let vue = new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#dropout\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings : content.strings,\r\n                        groups : content.groups,\r\n                        userid : content.userid,\r\n                        courseid : content.courseid,\r\n                        timezone : content.timezone,\r\n                        render_has : content.profile_render,\r\n                        loading : false,\r\n                        errors : [],\r\n                        pages : content.pages,\r\n\r\n                        dropout: content.dropout,\r\n                        selected_cluster: [],\r\n                        cluster_users: [],\r\n                        selected_user: {},\r\n                        search: null,\r\n                        week_modules_chart_data: [],\r\n                        week_modules_chart_categories: [],\r\n                        selected_sections: [],\r\n                        sessions_evolution_data: [],\r\n                        dialog: false,\r\n                    }\r\n                },\r\n                beforeMount(){\r\n                    if (this.dropout.clusters.length) {\r\n                        this.set_modules_in_sections();\r\n                        this.selected_cluster = this.dropout.clusters[0];\r\n                        this.change_cluster(this.selected_cluster.users);\r\n                    };\r\n                },\r\n                mounted(){\r\n                    document.querySelector(\"#sessions-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#dropout\").style.display = \"block\";\r\n                },\r\n                computed :{\r\n\r\n                },\r\n                methods : {\r\n                    get_help_content(){\r\n                        let helpcontents = `Texto de Ayuda`;\r\n                        return helpcontents;\r\n                    },\r\n\r\n                    set_modules_in_sections() {\r\n                        let sectionsMap = new Map();\r\n                        let sectionid = 0;\r\n                        this.dropout.cms.forEach(cm => {\r\n                            sectionid = Number(cm.section);\r\n                            if (!sectionsMap.has(sectionid)) {\r\n                                sectionsMap.set(sectionid, [cm]);\r\n                            } else {\r\n                                sectionsMap.get(sectionid).push(cm);\r\n                            }\r\n                        });\r\n                        this.dropout.sections.forEach(section => {\r\n                            sectionid = Number(section.sectionid);\r\n                            section.sectionid = sectionid;\r\n                            section.modules = sectionsMap.get(sectionid);\r\n                        });\r\n                    },\r\n\r\n                    change_cluster(users) {\r\n                        let selected_users = [];\r\n                        this.dropout.users.forEach(user => {\r\n                            if (users.includes(user.id)) {\r\n                                selected_users.push(user);\r\n                            }\r\n                        });\r\n                        this.cluster_users = selected_users;\r\n                        let user = this.cluster_users[0] || {};\r\n                        this.change_user(user);\r\n                        // console.log(this.cluster_users);\r\n                        // console.log(this.selected_user);\r\n                        // this.calculate_modules_access_by_week();\r\n                        // this.calculate_sessions_evolution();\r\n                    },\r\n\r\n                    build_modules_access_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'bar',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.modules_access_chart_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            type: 'category',\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                enabled: true,\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            formatter: function () {\r\n                                let module_text = (this.y == 1) ? vue.strings.module_label : vue.strings.modules_label;\r\n                                return '<b>' + this.points[0].key + '</b>: ' + this.y + ' ' + module_text + '<br/>'\r\n                                    + '<i>'+ vue.strings.modules_details + '<i/>';\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                    point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            vue.open_modules_modal(this.x);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                        chart.legend = {\r\n                            enabled: false\r\n                        };\r\n                        chart.series = [{\r\n                            colorByPoint: true,\r\n                            data: [\r\n                                {name: this.strings.modules_access_chart_series_viewed, y: this.selected_user.cms.viewed},\r\n                                {name: this.strings.modules_access_chart_series_complete, y: this.selected_user.cms.complete},\r\n                                {name: this.strings.modules_access_chart_series_total, y: this.selected_user.cms.total}\r\n                            ]\r\n                        }];\r\n                        return chart;\r\n                    },\r\n\r\n                    build_week_modules_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'column',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.week_modules_chart_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            categories: this.week_modules_chart_categories,\r\n                            title: {\r\n                                text: null\r\n                            },\r\n                            crosshair: true\r\n                        };\r\n                        chart.yAxis = {\r\n                            allowDecimals: false,\r\n                            title: {\r\n                                text: this.strings.modules_amount,\r\n                            }\r\n                        };\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function () {\r\n                                let text1 = '', text2 = '';\r\n                                if (this.points[0]) {\r\n                                    let module_text_viewed = (this.points[0].y == 1) ? vue.strings.module_label : vue.strings.modules_label;\r\n                                    let viewed_series_name = this.points[0].series.name;\r\n                                    text1 = `<b style=\"color: ${this.points[0].color}\">${viewed_series_name}: </b>\r\n                                            ${this.points[0].y} ${module_text_viewed}<br/>`;\r\n                                }\r\n                                if (this.points[1]) {\r\n                                    let module_text_completed = (this.points[1].y == 1) ? vue.strings.module_label : vue.strings.modules_label;\r\n                                    let completed_series_name = this.points[1].series.name;\r\n                                    text2 = `<b style=\"color: ${this.points[1].color}\">${completed_series_name}: </b>\r\n                                            ${this.points[1].y} ${module_text_completed}<br/>`;\r\n                                }\r\n                                return `${this.x} <br/>\r\n                                        ${text1}${text2}\r\n                                        <i>${vue.strings.modules_details}<i/>`;\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            vue.open_modules_modal(this.colorIndex, this.x);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        chart.series = this.week_modules_chart_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    build_sessions_evolution_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            zoomType: 'x',\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: this.strings.sessions_evolution_chart_title,\r\n                        };\r\n                        chart.xAxis = {\r\n                            type: 'datetime'\r\n                        };\r\n                        chart.yAxis = [{\r\n                            allowDecimals: false,\r\n                            title: { text: this.strings.sessions_evolution_chart_xaxis1 }\r\n                        }, {\r\n                            title: { text: this.strings.sessions_evolution_chart_xaxis2 },\r\n                            opposite: true\r\n                        }];\r\n                        chart.tooltip = {\r\n                            shared: true,\r\n                            useHTML: true,\r\n                            formatter: function () {\r\n                                let date_label = vue.calculate_timezone_date_string(this.x);\r\n                                let sessions = this.points[0].y;\r\n                                let sessions_suffix = (this.points[0].y == 1) ? vue.strings.session_text : vue.strings.sessions_text;\r\n                                let sessions_prefix = this.points[0].series.name;\r\n                                let time_prefix = this.points[1].series.name;\r\n                                let time = vue.convert_time(this.points[1].y * 60);\r\n                                return `<small>${date_label}</small><br/>\r\n                                        <b style=\"color: ${this.points[0].color}\">${sessions_prefix}: </b>\r\n                                        ${sessions} ${sessions_suffix}<br/>\r\n                                        <b style=\"color: ${this.points[1].color}\">${time_prefix}: </b>\r\n                                        ${time}<br/>`;\r\n                            }\r\n                        };\r\n                        chart.plotOptions = {\r\n                            series: {\r\n                                cursor: 'pointer',\r\n                                    point: {\r\n                                    events: {\r\n                                        click: function () {\r\n                                            console.log(this);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        chart.series = this.sessions_evolution_data;\r\n                        return chart;\r\n                    },\r\n\r\n                    calculate_timezone_date_string(timestamp) {\r\n                        let dat, weekday, monthday, month, time;\r\n                        if (Moment.tz.zone(this.timezone)) {\r\n                            dat = Moment(timestamp).tz(this.timezone);\r\n                            weekday = dat.day();\r\n                            monthday = dat.date();\r\n                            month = dat.month();\r\n                            time = dat.format('HH:mm:ss');\r\n                        } else {\r\n                            let tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n                            dat =  new Date(timestamp);\r\n                            weekday = dat.getDay();\r\n                            monthday = dat.getDate();\r\n                            month = dat.getMonth();\r\n                            time = `${dat.getHours()}:${dat.getMinutes()}:${dat.getSeconds()} (${tz})`;\r\n                        }\r\n                        weekday = this.strings.chart.weekdays[weekday];\r\n                        month = this.strings.chart.shortMonths[month];\r\n                        return `${weekday}, ${month} ${monthday}, ${time}`;\r\n                    },\r\n\r\n                    calculate_modules_access_by_week() {\r\n                        let sectionid = 0, moduleid = 0, weekcompletecms = 0, weekviewedcms = 0;\r\n                        let modules = [], completecms = [], viewedcms = [], categories = [];\r\n                        let user_cm;\r\n                        this.dropout.weeks.forEach(week => {\r\n                            // console.log({week});\r\n                            weekcompletecms = 0, weekviewedcms = 0;\r\n                            week.sections.forEach(section => {\r\n                                // console.log({section});\r\n                                sectionid = Number(section.sectionid);\r\n                                section.sectionid = sectionid;\r\n\r\n                                modules = this.sections_modules(sectionid);\r\n                                modules.forEach(module => {\r\n                                    // console.log({module});\r\n                                    moduleid = Number(module.id);\r\n                                    module.id = moduleid;\r\n\r\n                                    // user_cm = this.get_user_module(moduleid);\r\n                                    user_cm = this.selected_user.cms.modules[`cm${module.id}`];\r\n                                    // console.log({user_cm});\r\n                                    if (user_cm) {\r\n                                        (user_cm.complete) && weekcompletecms++;\r\n                                        (user_cm.viewed) && weekviewedcms++;\r\n                                    }\r\n\r\n                                });\r\n\r\n                            });\r\n                            completecms.push(weekcompletecms);\r\n                            viewedcms.push(weekviewedcms);\r\n                            categories.push(`${week.name} ${(week.position + 1)}`);\r\n                        });\r\n                        // console.log({completecms, viewedcms});\r\n                        this.week_modules_chart_categories = categories;\r\n                        this.week_modules_chart_data = [\r\n                            { name: this.strings.modules_access_chart_series_viewed, data: viewedcms },\r\n                            { name: this.strings.modules_access_chart_series_complete, data: completecms }\r\n                        ];\r\n                    },\r\n\r\n                    calculate_sessions_evolution() {\r\n                        let sessions_data = [], time_data = [];\r\n                        let sumtime = 0, sumsessions = 0, time = 0, timestamp = 0;\r\n                        this.selected_user.sessions.forEach(session => {\r\n                            timestamp = Number(session.start) * 1000;\r\n                            time = (Number(session.duration)) / 60;\r\n                            sumtime += time;\r\n                            sumsessions++;\r\n                            sessions_data.push({ x: timestamp, y: sumsessions });\r\n                            time_data.push({ x: timestamp, y: sumtime });\r\n                        });\r\n                        this.sessions_evolution_data = [\r\n                            { name: this.strings.sessions_evolution_chart_legend1, yAxis: 0, data: sessions_data },\r\n                            { name: this.strings.sessions_evolution_chart_legend2, yAxis: 1, data: time_data },\r\n                        ];\r\n                    },\r\n\r\n                    convert_time(time) {\r\n                        time *= 60; // pasar los minutos a segundos\r\n                        let h = this.strings.hours_short;\r\n                        let m = this.strings.minutes_short;\r\n                        let s = this.strings.seconds_short;\r\n                        let hours = Math.floor(time / 3600);\r\n                        let minutes = Math.floor((time % 3600) / 60);\r\n                        let seconds = Math.floor(time % 60);\r\n                        let text;\r\n                        if (hours >= 1) {\r\n                            text = `${hours}${h} ${minutes}${m}`;\r\n                        } else if ((minutes >= 1)) {\r\n                            text = `${minutes}${m} ${seconds}${s}`;\r\n                        } else {\r\n                            text = `${seconds}${s}`;\r\n                        }\r\n                        return text;\r\n                    },\r\n\r\n                    open_modules_modal(type, weekposition){\r\n                        let sections = this.dropout.sections;\r\n                        if (Number.isInteger(weekposition)) {\r\n                            sections = [];\r\n                            let section;\r\n                            let week = this.dropout.weeks[weekposition];\r\n                            week.sections.forEach(item => {\r\n                                section = {\r\n                                    sectionid: item.sectionid,\r\n                                    name: item.name,\r\n                                    modules: this.sections_modules(item.sectionid)\r\n                                };\r\n                                sections.push(section);\r\n                            });\r\n                        }\r\n                        sections.forEach(section => {\r\n                            section.modules.forEach(module => {\r\n                                module.complete = false;\r\n                                module.viewed = false;\r\n                                module.interactions = 0;\r\n                                let user_cm = this.selected_user.cms.modules[`cm${module.id}`];\r\n                                if (user_cm) {\r\n                                    module.complete = user_cm.complete;\r\n                                    module.viewed = user_cm.viewed;\r\n                                    module.interactions = user_cm.interactions;\r\n                                }\r\n                            });\r\n                        });\r\n\r\n                        this.dialog = true;\r\n                        this.selected_sections = sections;\r\n                    },\r\n\r\n                    sections_modules(sectionid) {\r\n                        let modules = [];\r\n                        let sections = this.dropout.sections;\r\n                        for (let i = 0; i < sections.length; i++) {\r\n                            if (sections[i].sectionid == sectionid) {\r\n                                modules = sections[i].modules;\r\n                                break;\r\n                            }\r\n                        }\r\n                        return modules;\r\n                    },\r\n\r\n                    get_user_module(moduleid) {\r\n                        let module;\r\n                        let cms = this.selected_user.cms.modules;\r\n                        for (let i = 0; i < cms.length; i++) {\r\n                            cms[i].id = Number(cms[i].id);\r\n                            if (cms[i].id == moduleid) {\r\n                                module = cms[i];\r\n                                break;\r\n                            }\r\n                        }\r\n                        return module;\r\n                    },\r\n\r\n                    update_interactions(week){\r\n                        this.loading = true;\r\n                        this.errors = [];\r\n                        let data = {\r\n                            action : \"time\",\r\n                            userid : this.userid,\r\n                            courseid : this.courseid,\r\n                            weekcode : week.weekcode,\r\n                            profile : this.render_has,\r\n                        }\r\n                        Axios({\r\n                            method:'get',\r\n                            url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                            params : data,\r\n                        }).then((response) => {\r\n                            if (response.status == 200 && response.data.ok) {\r\n                                this.inverted_time = response.data.data.inverted_time;\r\n                            } else {\r\n                                this.error_messages.push(this.strings.error_network);\r\n                            }\r\n                        }).catch((e) => {\r\n                            this.errors.push(this.strings.api_error_network);\r\n                        }).finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                        return this.data;\r\n                    },\r\n\r\n                    table_headers(){\r\n                        let headers = [\r\n                            { text: '', value : 'id', align : 'center', sortable : false},\r\n                            { text: this.strings.thead_name , value : 'firstname'},\r\n                            { text: this.strings.thead_lastname , value : 'lastname'},\r\n                            { text: this.strings.thead_progress , value : 'progress_percentage'},\r\n                        ];\r\n                        return headers;\r\n                    },\r\n\r\n                    change_user(user) {\r\n                        this.selected_user = user;\r\n                        console.log({user});\r\n                        this.calculate_modules_access_by_week();\r\n                        this.calculate_sessions_evolution();\r\n                    },\r\n\r\n                    get_picture_url(userid){\r\n                        return `${M.cfg.wwwroot}/user/pix.php?file=/${userid}/f1.jpg`;\r\n                    },\r\n\r\n                    get_module_icon(modname){\r\n                        return `${M.cfg.wwwroot}/theme/image.php/boost/${modname}/1/icon`;\r\n                    },\r\n\r\n                    get_module_url(module){\r\n                        return `${M.cfg.wwwroot}/mod/${module.modname}/view.php?id=${module.id}`;\r\n                    },\r\n\r\n                    get_interactions_number(interactions){\r\n                        let interactions_text = (interactions == 1) ? this.strings.modules_interaction : this.strings.modules_interactions;\r\n                        return `(${interactions} ${interactions_text})`;\r\n                    },\r\n\r\n                    get_user_fullname(){\r\n                        return `${this.selected_user.firstname} ${this.selected_user.lastname}`;\r\n                    },\r\n\r\n                    get_username(){\r\n                        return `@${this.selected_user.username}`;\r\n                    },\r\n\r\n                    see_profile () {\r\n                        let id = this.selected_user.id;\r\n                        let url = M.cfg.wwwroot + '/user/view.php?id='+id+'&course='+vue.courseid;\r\n                        window.open(url);\r\n                    },\r\n\r\n                    get_progress_message(){\r\n                        let module_label = this.strings.modules_label;\r\n                        let finished_label = this.strings.finisheds_label;\r\n                        if (this.selected_user.cms.complete == 1) {\r\n                            module_label = this.strings.module_label;\r\n                            finished_label = this.strings.finished_label;\r\n                        }\r\n                        return `${this.selected_user.cms.complete} ${module_label} ${finished_label} ${this.strings.of_conector} ${this.dropout.total_cms}`;\r\n                    },\r\n\r\n                    get_progress_percentage() {\r\n                        return `${this.selected_user.progress_percentage} %`;\r\n                    },\r\n\r\n                    get_student_grade() {\r\n                        let grade = this.selected_user.coursegrade;\r\n                        grade.finalgrade = Number(grade.finalgrade);\r\n                        grade.maxgrade = Number(grade.maxgrade);\r\n                        let student_grade = this.isInt(grade.finalgrade) ? grade.finalgrade : grade.finalgrade.toFixed(2);\r\n                        let max_grade = this.isInt(grade.maxgrade) ? grade.maxgrade : grade.maxgrade.toFixed(2);\r\n                        return `${student_grade}/${max_grade}`;\r\n                    },\r\n\r\n                    isInt(n) {\r\n                        return n % 1 === 0;\r\n                    },\r\n\r\n                    get_timezone(){\r\n                        let information = `${this.strings.ss_change_timezone} ${this.timezone}`\r\n                        return information;\r\n                    },\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init : init\r\n        };\r\n    });"],"file":"dropout.min.js"}