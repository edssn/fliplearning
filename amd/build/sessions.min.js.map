{"version":3,"sources":["../src/sessions.js"],"names":["define","Vue","Vuetify","Axios","Moment","Pagination","Chart","Pageheader","init","content","use","component","delimiters","el","vuetify","data","strings","groups","userid","courseid","timezone","render_has","profile_render","loading","errors","pages","mounted","document","querySelector","style","display","computed","methods","get_help_content","helpcontents","time","time_inside_plataform_description_teacher","time_inside_plataform_description_student","activity","activity_inside_plataform_description_teacher","activity_inside_plataform_description_student","push","title","time_inside_plataform","description","activity_inside_plataform","update_interactions","week","action","weekcode","profile","method","url","M","cfg","wwwroot","params","then","response","sessions","catch","api_error_network","finally","build_chart","chart","type","marginTop","marginBottom","plotBorderWidth","backgroundColor","text","xAxis","categories","days","yAxis","hours","reversed","colorAxis","min","stops","legend","layout","margin","verticalAlign","tooltip","formatter","x","point","y","xCategoryName","series","yCategoryName","label","value","name","borderWidth","borderColor","dataLabels","enabled","credits","responsive","rules","condition","maxWidth","chartOptions","labels","charAt","get_timezone","information","ss_change_timezone"],"mappings":"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","sourcesContent":["define([\"local_fliplearning/vue\",\r\n        \"local_fliplearning/vuetify\",\r\n        \"local_fliplearning/axios\",\r\n        \"local_fliplearning/moment\",\r\n        \"local_fliplearning/pagination\",\r\n        \"local_fliplearning/chartcomponent\",\r\n        \"local_fliplearning/pageheader\",\r\n    ],\r\n    function(Vue, Vuetify, Axios, Moment, Pagination, Chart, Pageheader) {\r\n        \"use strict\";\r\n\r\n        function init(content) {\r\n            Vue.use(Vuetify)\r\n            Vue.component('pagination', Pagination);\r\n            Vue.component('chart', Chart);\r\n            Vue.component('pageheader', Pageheader);\r\n            new Vue({\r\n                delimiters: [\"[[\", \"]]\"],\r\n                el: \"#work_sessions\",\r\n                vuetify: new Vuetify(),\r\n                data() {\r\n                    return {\r\n                        strings : content.strings,\r\n                        groups : content.groups,\r\n                        userid : content.userid,\r\n                        courseid : content.courseid,\r\n                        timezone : content.timezone,\r\n                        render_has : content.profile_render,\r\n                        loading : false,\r\n                        errors : [],\r\n                        pages : content.pages,\r\n                        data: content.data,\r\n                    }\r\n                },\r\n                mounted(){\r\n                    document.querySelector(\"#sessions-loader\").style.display = \"none\";\r\n                    document.querySelector(\"#work_sessions\").style.display = \"block\";\r\n                },\r\n                computed :{\r\n\r\n                },\r\n                methods : {\r\n                    get_help_content(){\r\n                        let helpcontents = [];\r\n                        let time = (this.render_has == 'teacher')\r\n                            ? this.strings.time_inside_plataform_description_teacher\r\n                            : this.strings.time_inside_plataform_description_student;\r\n                        let activity = (this.render_has == 'teacher')\r\n                            ? this.strings.activity_inside_plataform_description_teacher\r\n                            : this.strings.activity_inside_plataform_description_student;\r\n                        helpcontents.push({\r\n                            title: this.strings.time_inside_plataform,\r\n                            description: time,\r\n                        });\r\n                        helpcontents.push({\r\n                            title: this.strings.activity_inside_plataform,\r\n                            description: activity,\r\n                        });\r\n                        return helpcontents;\r\n                    },\r\n\r\n                    update_interactions(week){\r\n                        this.loading = true;\r\n                        let validresponse = false;\r\n                        this.errors = [];\r\n                        let data = {\r\n                            action : \"worksessions\",\r\n                            userid : this.userid,\r\n                            courseid : this.courseid,\r\n                            weekcode : week.weekcode,\r\n                            profile : this.render_has,\r\n                        }\r\n                        Axios({\r\n                            method:'get',\r\n                            url: M.cfg.wwwroot + \"/local/fliplearning/ajax.php\",\r\n                            params : data,\r\n                        }).then((response) => {\r\n                            validresponse = true;\r\n                            this.data = response.data.sessions;\r\n                        }).catch((e) => {\r\n                            this.errors.push(this.strings.api_error_network);\r\n                        }).finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                        return this.data;\r\n                    },\r\n\r\n                    build_chart() {\r\n                        let chart = new Object();\r\n                        chart.chart = {\r\n                            type: 'heatmap',\r\n                            marginTop: 40,\r\n                            marginBottom: 80,\r\n                            plotBorderWidth: 0,\r\n                            backgroundColor: '#FAFAFA',\r\n                        };\r\n                        chart.title = {\r\n                            text: null\r\n                        };\r\n                        chart.xAxis = {\r\n                            categories: this.strings.days,\r\n                        };\r\n                        chart.yAxis = {\r\n                            categories: this.strings.hours,\r\n                            title: null,\r\n                            reversed: true,\r\n                        };\r\n                        chart.colorAxis = {\r\n                            min: 0,\r\n                                stops: [\r\n                                    [0.2, '#DBDDE0'],\r\n                                    [0.4, '#D6E7F9'],\r\n                                    [0.6, '#9AC4EF'],\r\n                                    [0.8, '#5C9FE2'],\r\n                                    [1, '#327FCE']\r\n                            ],\r\n                        };\r\n                        chart.legend = {\r\n                            layout: 'horizontal',\r\n                                margin: 30,\r\n                                verticalAlign: 'bottom',\r\n                        };\r\n                        chart.tooltip = {\r\n                            formatter: function () {\r\n                                let x = this.point.x;\r\n                                let y = this.point.y;\r\n                                let xCategoryName = this.point.series.xAxis.categories[x];\r\n                                let yCategoryName = this.point.series.yAxis.categories[y];\r\n                                let label = ' sesiones';\r\n                                if (this.point.value == 1) {\r\n                                    label = ' sesión';\r\n                                }\r\n                                return '<b>' + xCategoryName + ' ' + yCategoryName + '</b>: '\r\n                                    + this.point.value +' ' + label;\r\n                            }\r\n                        };\r\n                        chart.series = [{\r\n                            name: 'Sales per employee',\r\n                            borderWidth: 2,\r\n                            borderColor: '#FAFAFA',\r\n                            data: this.data,\r\n                            dataLabels: {\r\n                                enabled: false,\r\n                            }\r\n                        }];\r\n                        chart.credits = {\r\n                            enabled: false\r\n                        };\r\n\r\n                        chart.responsive = {\r\n                            rules: [{\r\n                                condition: {\r\n                                    maxWidth: 500\r\n                                },\r\n                                chartOptions: {\r\n                                    yAxis: {\r\n                                        labels: {\r\n                                            formatter: function () {\r\n                                                return this.value.charAt(0);\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }]\r\n                        };\r\n                        return chart;\r\n                    },\r\n\r\n                    get_timezone(){\r\n                        let information = `${this.strings.ss_change_timezone} ${this.timezone}`\r\n                        return information;\r\n                    },\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            init : init\r\n        };\r\n    });"],"file":"sessions.min.js"}